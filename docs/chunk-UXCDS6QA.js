import{A as _i,B as qi,C as Ui,E as Fi,a as eo,e as xi,g as ro,i as gi,j as bi,m as wi,n as Ei,p as oo,q as vi,r as wt,s as dt,t as Wt,u as Ye,v as Dc,w as mo,y as $c,z as jc}from"./chunk-7D3XAEE7.js";import{a as Bc,b as be}from"./chunk-CG2EMPLA.js";import{a as Tc,b as Ic}from"./chunk-CTLUDKZB.js";import{$ as Mc,A as so,B as Rc,C as io,D as kc,E as Nc,F as Hc,G as Vt,H as _c,I as qc,J as Uc,K as Q,L as Er,M as An,N as Et,O as nt,P as vr,Q as Ze,R as Ke,S as X,T as mt,U as Ci,V as Fc,W as ao,X as zc,Y as Lc,Z as co,_ as Tn,aa as Ri,b as J,ba as ki,c as bn,ca as Ni,d as ft,da as uo,e as Ct,f as Ai,g as br,h as no,i as wn,j as Ti,ja as Hi,k as ee,l as Ii,la as In,m as wr,ma as Bn,n as Bi,na as fo,o as Tt,oa as Pn,p as En,pa as Sn,q as Pi,r as Ge,s as Pc,t as Ve,ta as Ar,u as Sc,v as We,w as Si,x as j,y as vn,ya as we,z as Cc}from"./chunk-GSTDJRCA.js";import{$b as yr,A as Qs,Aa as Ue,B as He,Ba as de,Bb as Le,Ca as Zr,Cb as xe,Da as it,Db as tn,E as ti,Ea as te,Eb as Me,Fa as At,Fb as Oe,Gb as dr,Ha as jt,I as ei,Ia as si,J as Gr,Jb as en,K as Wo,Ka as le,Kb as rn,La as Ec,Lb as on,Ma as Jo,Mb as nn,Na as Xo,Nb as De,O as Vr,Oa as he,Ob as ge,P as $t,Pb as sn,Q as Xt,Qa as Kr,Qb as an,Ra as G,Rb as lr,Sb as hr,Ta as vc,Tb as to,Ua as Yr,Ub as cn,V as ri,Vb as $e,Wb as un,Xb as fn,Yb as mn,Z as _e,Zb as pn,_ as Zo,_a as ye,_b as dn,ab as Y,ac as ln,bb as ii,bc as hn,cb as ai,cc as yn,da as oi,dc as xn,ec as gn,fa as qe,fb as ci,fc as xr,gb as Fe,gc as hi,ha as D,hc as yi,ia as Ko,ja as V,jb as Ac,la as st,lb as ui,ma as Yo,na as ot,nb as fi,ne as bt,oa as P,ob as ze,pa as zt,qa as pt,qb as mi,rb as Jr,s as Go,sa as ut,sb as Xr,sc as je,t as M,tb as Qo,tc as gr,te as Lt,u as Ht,ua as Qt,ub as pi,uc as Gt,ue as Oc,va as wc,w as L,wa as K,wb as di,x as Xs,xb as Qr,xc as gt,y as Vo,yb as pr,za as pe,zb as li}from"./chunk-YVA7YSBN.js";import{C as Wr,H as xc,J as gc,K as bc,t as yc,z as ni}from"./chunk-3WGOZNFF.js";import{a as x,b as C,e as O,h as hc}from"./chunk-QGXACWGO.js";function B(t,e,r){let o=t[e.name];if(typeof o=="function")return o;let n=t[r];return typeof n=="function"?n:s=>e(t,s)}var po=class extends L{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};var Gc="/docs/contract/encodeEventTopics";function Mt(t){let{abi:e,eventName:r,args:o}=t,n=e[0];if(r){let a=Kr({abi:e,name:r});if(!a)throw new Wo(r,{docsPath:Gc});n=a}if(n.type!=="event")throw new Wo(void 0,{docsPath:Gc});let s=Go(n),i=pe(s),c=[];if(o&&"inputs"in n){let a=n.inputs?.filter(f=>"indexed"in f&&f.indexed),u=Array.isArray(o)?o:Object.values(o).length>0?a?.map(f=>o[f.name])??[]:[];u.length>0&&(c=a?.map((f,m)=>Array.isArray(u[m])?u[m].map((p,d)=>Vc({param:f,value:u[m][d]})):typeof u[m]<"u"&&u[m]!==null?Vc({param:f,value:u[m]}):null)??[])}return[i,...c]}function Vc({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return K(pt(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new po(t.type);return he([t],[e])}function Ee(t,{method:e}){let r={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:o,response:n,status:s,transport:i})=>{s==="success"&&e===o&&(r[n]=i.request)}),o=>r[o]||t.request}async function Tr(t,e){let{address:r,abi:o,args:n,eventName:s,fromBlock:i,strict:c,toBlock:a}=e,u=Ee(t,{method:"eth_newFilter"}),f=s?Mt({abi:o,args:n,eventName:s}):void 0,m=await t.request({method:"eth_newFilter",params:[{address:r,fromBlock:typeof i=="bigint"?P(i):i,toBlock:typeof a=="bigint"?P(a):a,topics:f}]});return{abi:o,args:n,eventName:s,id:m,request:u(m),strict:!!c,type:"event"}}var gp=3;function It(t,{abi:e,address:r,args:o,docsPath:n,functionName:s,sender:i}){let c=t instanceof Le?t:t instanceof L?t.walk(h=>"data"in h)||t.walk():{},{code:a,data:u,details:f,message:m,shortMessage:p}=c,d=t instanceof He?new li({functionName:s}):[gp,De.code].includes(a)&&(u||f||m||p)?new pr({abi:e,data:typeof u=="object"?u.data:u,functionName:s,message:c instanceof Me?f:p??m}):t;return new Qr(d,{abi:e,args:o,contractAddress:r,docsPath:n,functionName:s,sender:i})}function Wc(t){let e=K(`0x${t.substring(4)}`).substring(26);return Zr(`0x${e}`)}async function zi({hash:t,signature:e}){let r=M(t)?t:st(t),{secp256k1:o}=await import("./chunk-ZOEWKDI2.js");return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:u,s:f,v:m,yParity:p}=e,d=Number(p??m),h=Zc(d);return new o.Signature(D(u),D(f)).addRecoveryBit(h)}let i=M(e)?e:st(e);if(Ht(i)!==65)throw new Error("invalid signature length");let c=V(`0x${i.slice(130)}`),a=Zc(c);return o.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function Zc(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Rt({hash:t,signature:e}){return Wc(await zi({hash:t,signature:e}))}function Kc(t){let{chainId:e,nonce:r,to:o}=t,n=t.contractAddress??t.address,s=K(jt(["0x05",eo([e?P(e):"0x",n,r?P(r):"0x"])]));return o==="bytes"?ut(s):s}async function ve(t){let{authorization:e,signature:r}=t;return Rt({hash:Kc(e),signature:r??e})}var lo=class extends L{constructor(e,{account:r,docsPath:o,chain:n,data:s,gas:i,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:m,value:p}){let d=Ac({from:r?.address,to:m,value:typeof p<"u"&&`${ci(p)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof c<"u"&&`${Fe(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${Fe(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Fe(u)} gwei`,nonce:f});super(e.shortMessage,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}};function Yc(t,o){var n=o,{docsPath:e}=n,r=O(n,["docsPath"]);let s=(()=>{let i=gr(t,r);return i instanceof je?t:i})();return new lo(s,x({docsPath:e},r))}var ho=class extends L{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},re=class extends L{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},yo=class extends L{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Fe(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};var Je=class extends L{constructor({blockHash:e,blockNumber:r}){let o="Block";e&&(o=`Block at hash "${e}"`),r&&(o=`Block at number "${r}"`),super(`${o} could not be found.`,{name:"BlockNotFoundError"})}};async function lt(t,{blockHash:e,blockNumber:r,blockTag:o=t.experimental_blockTag??"latest",includeTransactions:n}={}){let s=n??!1,i=r!==void 0?P(r):void 0,c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,s]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[i||o,s]},{dedupe:!!i}),!c)throw new Je({blockHash:e,blockNumber:r});return(t.chain?.formatters?.block?.format||ro)(c,"getBlock")}async function Ir(t){let e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Jc(t,e){return Li(t,e)}async function Li(t,e){let{block:r,chain:o=t.chain,request:n}=e||{};try{let s=o?.fees?.maxPriorityFeePerGas??o?.fees?.defaultPriorityFee;if(typeof s=="function"){let c=r||await B(t,lt,"getBlock")({}),a=await s({block:c,client:t,request:n});if(a===null)throw new Error;return a}if(typeof s<"u")return s;let i=await t.request({method:"eth_maxPriorityFeePerGas"});return D(i)}catch{let[s,i]=await Promise.all([r?Promise.resolve(r):B(t,lt,"getBlock")({}),B(t,Ir,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new re;let c=i-s.baseFeePerGas;return c<0n?0n:c}}async function Xc(t,e){return Cn(t,e)}async function Cn(t,e){let{block:r,chain:o=t.chain,request:n,type:s="eip1559"}=e||{},i=await(async()=>typeof o?.fees?.baseFeeMultiplier=="function"?o.fees.baseFeeMultiplier({block:r,client:t,request:n}):o?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new ho;let a=10**(i.toString().split(".")[1]?.length??0),u=p=>p*BigInt(Math.ceil(i*a))/BigInt(a),f=r||await B(t,lt,"getBlock")({});if(typeof o?.fees?.estimateFeesPerGas=="function"){let p=await o.fees.estimateFeesPerGas({block:r,client:t,multiply:u,request:n,type:s});if(p!==null)return p}if(s==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new re;let p=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await Li(t,{block:f,chain:o,request:n}),d=u(f.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??d+p,maxPriorityFeePerGas:p}}return{gasPrice:n?.gasPrice??u(await B(t,Ir,"getGasPrice")({}))}}async function Ae(t,{address:e,blockTag:r="latest",blockNumber:o}){let n=await t.request({method:"eth_getTransactionCount",params:[e,typeof o=="bigint"?P(o):r]},{dedupe:!!o});return V(n)}async function Bt(t){let e=await t.request({method:"eth_chainId"},{dedupe:!0});return V(e)}var xo=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Qc=new Map;async function Zt(t,e){let{account:r=t.account,blobs:o,chain:n,gas:s,kzg:i,nonce:c,nonceManager:a,parameters:u=xo,type:f}=e,m=r&&G(r),p=x(x({},e),m?{from:m?.address}:{}),d;async function h(){return d||(d=await B(t,lt,"getBlock")({blockTag:"latest"}),d)}let l;async function b(){return l||(n?n.id:typeof e.chainId<"u"?e.chainId:(l=await B(t,Bt,"getChainId")({}),l))}if(u.includes("nonce")&&typeof c>"u"&&m)if(a){let y=await b();p.nonce=await a.consume({address:m.address,chainId:y,client:t})}else p.nonce=await B(t,Ae,"getTransactionCount")({address:m.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&o&&i){let y=gi({blobs:o,kzg:i});if(u.includes("blobVersionedHashes")){let A=Ei({commitments:y,to:"hex"});p.blobVersionedHashes=A}if(u.includes("sidecars")){let A=bi({blobs:o,commitments:y,kzg:i}),w=oo({blobs:o,commitments:y,proofs:A,to:"hex"});p.sidecars=w}}if(u.includes("chainId")&&(p.chainId=await b()),(u.includes("fees")||u.includes("type"))&&typeof f>"u")try{p.type=vi(p)}catch{let y=Qc.get(t.uid);typeof y>"u"&&(y=typeof(await h())?.baseFeePerGas=="bigint",Qc.set(t.uid,y)),p.type=y?"eip1559":"legacy"}if(u.includes("fees"))if(p.type!=="legacy"&&p.type!=="eip2930"){if(typeof p.maxFeePerGas>"u"||typeof p.maxPriorityFeePerGas>"u"){let y=await h(),{maxFeePerGas:A,maxPriorityFeePerGas:w}=await Cn(t,{block:y,chain:n,request:p});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<w)throw new yo({maxPriorityFeePerGas:w});p.maxPriorityFeePerGas=w,p.maxFeePerGas=A}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new re;if(typeof e.gasPrice>"u"){let y=await h(),{gasPrice:A}=await Cn(t,{block:y,chain:n,request:p,type:"legacy"});p.gasPrice=A}}return u.includes("gas")&&typeof s>"u"&&(p.gas=await B(t,Br,"estimateGas")(C(x({},p),{account:m&&{address:m.address,type:"json-rpc"}}))),bt(p),delete p.parameters,p}async function Br(t,e){let{account:r=t.account}=e,o=r?G(r):void 0;try{let n=await Zt(t,C(x({},e),{parameters:o?.type==="local"?void 0:["blobVersionedHashes"]})),{accessList:s,authorizationList:i,blobs:c,blobVersionedHashes:a,blockNumber:u,blockTag:f,data:m,gas:p,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:y,value:A,stateOverride:w}=n,g=O(n,["accessList","authorizationList","blobs","blobVersionedHashes","blockNumber","blockTag","data","gas","gasPrice","maxFeePerBlobGas","maxFeePerGas","maxPriorityFeePerGas","nonce","value","stateOverride"]),E=(typeof u=="bigint"?P(u):void 0)||f,T=bn(w),I=await(async()=>{if(g.to)return g.to;if(i&&i.length>0)return await ve({authorization:i[0]}).catch(()=>{throw new L("`to` is required. Could not infer from `authorizationList`")})})();bt(e);let H=t.chain?.formatters?.transactionRequest?.format,S=(H||gt)(C(x({},Gt(g,{format:H})),{from:o?.address,accessList:s,authorizationList:i,blobs:c,blobVersionedHashes:a,data:m,gas:p,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:y,to:I,value:A}),"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:T?[S,E??t.experimental_blockTag??"latest",T]:E?[S,E]:[S]}))}catch(s){throw Yc(s,C(x({},e),{account:o,chain:t.chain}))}}async function Rn(t,e){let u=e,{abi:r,address:o,args:n,functionName:s,dataSuffix:i}=u,c=O(u,["abi","address","args","functionName","dataSuffix"]),a=J({abi:r,args:n,functionName:s});try{return await B(t,Br,"estimateGas")(x({data:`${a}${i?i.replace("0x",""):""}`,to:o},c))}catch(f){let m=c.account?G(c.account):void 0;throw It(f,{abi:r,address:o,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:m?.address})}}var tu="/docs/contract/decodeEventLog";function Xe(t){let{abi:e,data:r,strict:o,topics:n}=t,s=o??!0,[i,...c]=n;if(!i)throw new ei({docsPath:tu});let a=e.find(l=>l.type==="event"&&i===pe(Go(l)));if(!(a&&"name"in a)||a.type!=="event")throw new Gr(i,{docsPath:tu});let{name:u,inputs:f}=a,m=f?.some(l=>!("name"in l&&l.name)),p=m?[]:{},d=f.map((l,b)=>[l,b]).filter(([l])=>"indexed"in l&&l.indexed);for(let l=0;l<d.length;l++){let[b,y]=d[l],A=c[l];if(!A)throw new Xt({abiItem:a,param:b});p[m?y:b.name||y]=bp({param:b,value:A})}let h=f.filter(l=>!("indexed"in l&&l.indexed));if(h.length>0){if(r&&r!=="0x")try{let l=ye(h,r);if(l)if(m)for(let b=0;b<f.length;b++)p[b]=p[b]??l.shift();else for(let b=0;b<h.length;b++)p[h[b].name]=l[b]}catch(l){if(s)throw l instanceof Qs||l instanceof vc?new $t({abiItem:a,data:r,params:h,size:Ht(r)}):l}else if(s)throw new $t({abiItem:a,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function bp({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(ye([t],e)||[])[0]}function Qe(t){let{abi:e,args:r,logs:o,strict:n=!0}=t,s=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return o.map(i=>{try{let c=e.find(u=>u.type==="event"&&i.topics[0]===pe(u));if(!c)return null;let a=Xe(C(x({},i),{abi:[c],strict:n}));return s&&!s.includes(a.eventName)||!wp({args:a.args,inputs:c.inputs,matchArgs:r})?null:x(x({},a),i)}catch(c){let a,u;if(c instanceof Gr)return null;if(c instanceof $t||c instanceof Xt){if(n)return null;a=c.abiItem.name,u=c.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return C(x({},i),{args:u?[]:{},eventName:a})}}).filter(Boolean)}function wp(t){let{args:e,inputs:r,matchArgs:o}=t;if(!o)return!0;if(!e)return!1;function n(s,i,c){try{return s.type==="address"?ft(i,c):s.type==="string"||s.type==="bytes"?K(pt(i))===c:i===c}catch{return!1}}return Array.isArray(e)&&Array.isArray(o)?o.every((s,i)=>{if(s==null)return!0;let c=r[i];return c?(Array.isArray(s)?s:[s]).some(u=>n(c,u,e[i])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof o=="object"&&!Array.isArray(o)?Object.entries(o).every(([s,i])=>{if(i==null)return!0;let c=r.find(u=>u.name===s);return c?(Array.isArray(i)?i:[i]).some(u=>n(c,u,e[s])):!1}):!1}async function Pr(t,{address:e,blockHash:r,fromBlock:o,toBlock:n,event:s,events:i,args:c,strict:a}={}){let u=a??!1,f=i??(s?[s]:void 0),m=[];f&&(m=[f.flatMap(l=>Mt({abi:[l],eventName:l.name,args:i?void 0:c}))],s&&(m=m[0]));let p;r?p=await t.request({method:"eth_getLogs",params:[{address:e,topics:m,blockHash:r}]}):p=await t.request({method:"eth_getLogs",params:[{address:e,topics:m,fromBlock:typeof o=="bigint"?P(o):o,toBlock:typeof n=="bigint"?P(n):n}]});let d=p.map(h=>wt(h));return f?Qe({abi:f,args:c,logs:d,strict:u}):d}async function Sr(t,e){let{abi:r,address:o,args:n,blockHash:s,eventName:i,fromBlock:c,toBlock:a,strict:u}=e,f=i?Kr({abi:r,name:i}):void 0,m=f?void 0:r.filter(p=>p.type==="event");return B(t,Pr,"getLogs")({address:o,args:n,blockHash:s,event:f,events:m,fromBlock:c,toBlock:a,strict:u})}async function tt(t,e){let a=e,{abi:r,address:o,args:n,functionName:s}=a,i=O(a,["abi","address","args","functionName"]),c=J({abi:r,args:n,functionName:s});try{let{data:u}=await B(t,we,"call")(C(x({},i),{data:c,to:o}));return Ct({abi:r,args:n,functionName:s,data:u||"0x"})}catch(u){throw It(u,{abi:r,address:o,args:n,docsPath:"/docs/contract/readContract",functionName:s})}}async function kn(t,e){let f=e,{abi:r,address:o,args:n,dataSuffix:s,functionName:i}=f,c=O(f,["abi","address","args","dataSuffix","functionName"]),a=c.account?G(c.account):t.account,u=J({abi:r,args:n,functionName:i});try{let{data:m}=await B(t,we,"call")(C(x({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:o},c),{account:a})),p=Ct({abi:r,args:n,functionName:i,data:m||"0x"}),d=r.filter(h=>"name"in h&&h.name===e.functionName);return{result:p,request:C(x({abi:d,address:o,args:n,dataSuffix:s,functionName:i},c),{account:a})}}catch(m){throw It(m,{abi:r,address:o,args:n,docsPath:"/docs/contract/simulateContract",functionName:i,sender:a?.address})}}var Mi=new Map,eu=new Map,Ep=0;function ht(t,e,r){let o=++Ep,n=()=>Mi.get(t)||[],s=()=>{let f=n();Mi.set(t,f.filter(m=>m.id!==o))},i=()=>{let f=n();if(!f.some(p=>p.id===o))return;let m=eu.get(t);if(f.length===1&&m){let p=m();p instanceof Promise&&p.catch(()=>{})}s()},c=n();if(Mi.set(t,[...c,{id:o,fns:e}]),c&&c.length>0)return i;let a={};for(let f in e)a[f]=(...m)=>{let p=n();if(p.length!==0)for(let d of p)d.fns[f]?.(...m)};let u=r(a);return typeof u=="function"&&eu.set(t,u),i}async function tr(t){return new Promise(e=>setTimeout(e,t))}function _t(t,{emitOnBegin:e,initialWaitTime:r,interval:o}){let n=!0,s=()=>n=!1;return(async()=>{let c;e&&(c=await t({unpoll:s}));let a=await r?.(c)??o;await tr(a);let u=async()=>{n&&(await t({unpoll:s}),await tr(o),u())};u()})(),s}var vp=new Map,Ap=new Map;function ru(t){let e=(n,s)=>({clear:()=>s.delete(n),get:()=>s.get(n),set:i=>s.set(n,i)}),r=e(t,vp),o=e(t,Ap);return{clear:()=>{r.clear(),o.clear()},promise:r,response:o}}async function Oi(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){let o=ru(e),n=o.response.get();if(n&&r>0&&Date.now()-n.created.getTime()<r)return n.data;let s=o.promise.get();s||(s=t(),o.promise.set(s));try{let i=await s;return o.response.set({created:new Date,data:i}),i}finally{o.promise.clear()}}var Tp=t=>`blockNumber.${t}`;async function Kt(t,{cacheTime:e=t.cacheTime}={}){let r=await Oi(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Tp(t.uid),cacheTime:e});return BigInt(r)}async function Te(t,{filter:e}){let r="strict"in e&&e.strict,o=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof o[0]=="string")return o;let n=o.map(s=>wt(s));return!("abi"in e)||!e.abi?n:Qe({abi:e.abi,logs:n,strict:r})}async function Ie(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Nn(t,e){let{abi:r,address:o,args:n,batch:s=!0,eventName:i,fromBlock:c,onError:a,onLogs:u,poll:f,pollingInterval:m=t.pollingInterval,strict:p}=e;return(typeof f<"u"?f:typeof c=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{let b=p??!1,y=Y(["watchContractEvent",o,n,s,t.uid,i,m,b,c]);return ht(y,{onLogs:u,onError:a},A=>{let w;c!==void 0&&(w=c-1n);let g,v=!1,E=_t(async()=>{if(!v){try{g=await B(t,Tr,"createContractEventFilter")({abi:r,address:o,args:n,eventName:i,strict:b,fromBlock:c})}catch{}v=!0;return}try{let T;if(g)T=await B(t,Te,"getFilterChanges")({filter:g});else{let I=await B(t,Kt,"getBlockNumber")({});w&&w<I?T=await B(t,Sr,"getContractEvents")({abi:r,address:o,args:n,eventName:i,fromBlock:w+1n,toBlock:I,strict:b}):T=[],w=I}if(T.length===0)return;if(s)A.onLogs(T);else for(let I of T)A.onLogs([I])}catch(T){g&&T instanceof ge&&(v=!1),A.onError?.(T)}},{emitOnBegin:!0,interval:m});return async()=>{g&&await B(t,Ie,"uninstallFilter")({filter:g}),E()}})})():(()=>{let b=p??!1,y=Y(["watchContractEvent",o,n,s,t.uid,i,m,b]),A=!0,w=()=>A=!1;return ht(y,{onLogs:u,onError:a},g=>((async()=>{try{let v=(()=>{if(t.transport.type==="fallback"){let I=t.transport.transports.find(H=>H.config.type==="webSocket"||H.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),E=i?Mt({abi:r,eventName:i,args:n}):[],{unsubscribe:T}=await v.subscribe({params:["logs",{address:o,topics:E}],onData(I){if(!A)return;let H=I.result;try{let{eventName:N,args:S}=Xe({abi:r,data:H.data,topics:H.topics,strict:p}),_=wt(H,{args:S,eventName:N});g.onLogs([_])}catch(N){let S,_;if(N instanceof $t||N instanceof Xt){if(p)return;S=N.abiItem.name,_=N.abiItem.inputs?.some(Z=>!("name"in Z&&Z.name))}let U=wt(H,{args:_?[]:{},eventName:S});g.onLogs([U])}},onError(I){g.onError?.(I)}});w=T,A||w()}catch(v){a?.(v)}})(),()=>w()))})()}function Cr(t,o){var n=o,{docsPath:e}=n,r=O(n,["docsPath"]);let s=(()=>{let i=gr(t,r);return i instanceof je?t:i})();return new mi(s,x({docsPath:e},r))}async function Rr(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var Di=new de(128);async function Be(t,e){let A=e,{account:r=t.account,chain:o=t.chain,accessList:n,authorizationList:s,blobs:i,data:c,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,type:h,value:l}=A,b=O(A,["account","chain","accessList","authorizationList","blobs","data","gas","gasPrice","maxFeePerBlobGas","maxFeePerGas","maxPriorityFeePerGas","nonce","type","value"]);if(typeof r>"u")throw new dt({docsPath:"/docs/actions/wallet/sendTransaction"});let y=r?G(r):null;try{bt(e);let w=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await ve({authorization:s[0]}).catch(()=>{throw new L("`to` is required. Could not infer from `authorizationList`.")})})();if(y?.type==="json-rpc"||y===null){let g;o!==null&&(g=await B(t,Bt,"getChainId")({}),Ye({currentChainId:g,chain:o}));let v=t.chain?.formatters?.transactionRequest?.format,T=(v||gt)(C(x({},Gt(b,{format:v})),{accessList:n,authorizationList:s,blobs:i,chainId:g,data:c,from:y?.address,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,to:w,type:h,value:l}),"sendTransaction"),I=Di.get(t.uid),H=I?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:H,params:[T]},{retryCount:0})}catch(N){if(I===!1)throw N;let S=N;if(S.name==="InvalidInputRpcError"||S.name==="InvalidParamsRpcError"||S.name==="MethodNotFoundRpcError"||S.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[T]},{retryCount:0}).then(_=>(Di.set(t.uid,!0),_)).catch(_=>{let U=_;throw U.name==="MethodNotFoundRpcError"||U.name==="MethodNotSupportedRpcError"?(Di.set(t.uid,!1),S):U});throw S}}if(y?.type==="local"){let g=await B(t,Zt,"prepareTransactionRequest")(C(x({account:y,accessList:n,authorizationList:s,blobs:i,chain:o,data:c,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,nonceManager:y.nonceManager,parameters:[...xo,"sidecars"],type:h,value:l},b),{to:w})),v=o?.serializers?.transaction,E=await y.signTransaction(g,{serializer:v});return await B(t,Rr,"sendRawTransaction")({serializedTransaction:E})}throw y?.type==="smart"?new Wt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Wt({docsPath:"/docs/actions/wallet/sendTransaction",type:y?.type})}catch(w){throw w instanceof Wt?w:Cr(w,C(x({},e),{account:y,chain:e.chain||void 0}))}}async function oe(t,e){return oe.internal(t,Be,"sendTransaction",e)}(function(t){async function e(r,o,n,s){let l=s,{abi:i,account:c=r.account,address:a,args:u,dataSuffix:f,functionName:m}=l,p=O(l,["abi","account","address","args","dataSuffix","functionName"]);if(typeof c>"u")throw new dt({docsPath:"/docs/contract/writeContract"});let d=c?G(c):null,h=J({abi:i,args:u,functionName:m});try{return await B(r,o,n)(x({data:`${h}${f?f.replace("0x",""):""}`,to:a,account:d},p))}catch(b){throw It(b,{abi:i,address:a,args:u,docsPath:"/docs/contract/writeContract",functionName:m,sender:d?.address})}}t.internal=e})(oe||(oe={}));function Ip({abi:t,address:e,client:r}){let o=r,[n,s]=o?"public"in o&&"wallet"in o?[o.public,o.wallet]:"public"in o?[o.public,void 0]:"wallet"in o?[void 0,o.wallet]:[o,o]:[void 0,void 0],i=n!=null,c=s!=null,a={},u=!1,f=!1,m=!1;for(let p of t)if(p.type==="function"?p.stateMutability==="view"||p.stateMutability==="pure"?u=!0:f=!0:p.type==="event"&&(m=!0),u&&f&&m)break;return i&&(u&&(a.read=new Proxy({},{get(p,d){return(...h)=>{let{args:l,options:b}=Hn(h);return B(n,tt,"readContract")(x({abi:t,address:e,functionName:d,args:l},b))}}})),f&&(a.simulate=new Proxy({},{get(p,d){return(...h)=>{let{args:l,options:b}=Hn(h);return B(n,kn,"simulateContract")(x({abi:t,address:e,functionName:d,args:l},b))}}})),m&&(a.createEventFilter=new Proxy({},{get(p,d){return(...h)=>{let l=t.find(A=>A.type==="event"&&A.name===d),{args:b,options:y}=$i(h,l);return B(n,Tr,"createContractEventFilter")(x({abi:t,address:e,eventName:d,args:b},y))}}}),a.getEvents=new Proxy({},{get(p,d){return(...h)=>{let l=t.find(A=>A.type==="event"&&A.name===d),{args:b,options:y}=$i(h,l);return B(n,Sr,"getContractEvents")(x({abi:t,address:e,eventName:d,args:b},y))}}}),a.watchEvent=new Proxy({},{get(p,d){return(...h)=>{let l=t.find(A=>A.type==="event"&&A.name===d),{args:b,options:y}=$i(h,l);return B(n,Nn,"watchContractEvent")(x({abi:t,address:e,eventName:d,args:b},y))}}}))),c&&f&&(a.write=new Proxy({},{get(p,d){return(...h)=>{let{args:l,options:b}=Hn(h);return B(s,oe,"writeContract")(x({abi:t,address:e,functionName:d,args:l},b))}}})),(i||c)&&f&&(a.estimateGas=new Proxy({},{get(p,d){return(...h)=>{let{args:l,options:b}=Hn(h);return B(n??s,Rn,"estimateContractGas")(C(x({abi:t,address:e,functionName:d,args:l},b),{account:b.account??s.account}))}}})),a.address=e,a.abi=t,a}function Hn(t){let e=t.length&&Array.isArray(t[0]),r=e?t[0]:[],o=(e?t[1]:t[0])??{};return{args:r,options:o}}function $i(t,e){let r=!1;Array.isArray(t[0])?r=!0:t.length===1?r=e.inputs.some(s=>s.indexed):t.length===2&&(r=!0);let o=r?t[0]:void 0,n=(r?t[1]:t[0])??{};return{args:o,options:n}}var go=class extends L{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}};function Pe(t,{delay:e=100,retryCount:r=2,shouldRetry:o=()=>!0}={}){return new Promise((n,s)=>{let i=async({count:c=0}={})=>{let a=async({error:u})=>{let f=typeof e=="function"?e({count:c,error:u}):e;f&&await tr(f),i({count:c+1})};try{let u=await t();n(u)}catch(u){if(c<r&&await o({count:c,error:u}))return a({error:u});s(u)}};i()})}var ji="0x5792579257925792579257925792579257925792579257925792579257925792",Gi=P(0,{size:32});async function _n(t,e){let{account:r=t.account,capabilities:o,chain:n=t.chain,experimental_fallback:s,experimental_fallbackDelay:i=32,forceAtomic:c=!1,id:a,version:u="2.0.0"}=e,f=r?G(r):null,m=e.calls.map(p=>{let d=p,h=d.abi?J({abi:d.abi,functionName:d.functionName,args:d.args}):d.data;return{data:d.dataSuffix&&h?At([h,d.dataSuffix]):h,to:d.to,value:d.value?P(d.value):void 0}});try{let p=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:c,calls:m,capabilities:o,chainId:P(n.id),from:f?.address,id:a,version:u}]},{retryCount:0});return typeof p=="string"?{id:p}:p}catch(p){let d=p;if(s&&(d.name==="MethodNotFoundRpcError"||d.name==="MethodNotSupportedRpcError"||d.name==="UnknownRpcError"||d.details.toLowerCase().includes("does not exist / is not available")||d.details.toLowerCase().includes("missing or invalid. request()")||d.details.toLowerCase().includes("did not match any variant of untagged enum")||d.details.toLowerCase().includes("account upgraded to unsupported contract")||d.details.toLowerCase().includes("eip-7702 not supported")||d.details.toLowerCase().includes("unsupported wc_ method")||d.details.toLowerCase().includes("feature toggled misconfigured")||d.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(o&&Object.values(o).some(A=>!A.optional)){let A="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new yr(new L(A,{details:A}))}if(c&&m.length>1){let y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new xr(new L(y,{details:y}))}let h=[];for(let y of m){let A=Be(t,{account:f,chain:n,data:y.data,to:y.to,value:y.value?D(y.value):void 0});h.push(A),i>0&&await new Promise(w=>setTimeout(w,i))}let l=await Promise.allSettled(h);if(l.every(y=>y.status==="rejected"))throw l[0].reason;let b=l.map(y=>y.status==="fulfilled"?y.value:Gi);return{id:At([...b,P(n.id,{size:32}),ji])}}throw Cr(p,C(x({},e),{account:f,chain:e.chain}))}}async function qn(t,e){async function r(m){if(m.endsWith(ji.slice(2))){let d=qe(le(m,-64,-32)),h=le(m,0,-64).slice(2).match(/.{1,64}/g),l=await Promise.all(h.map(y=>Gi.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),b=l.some(y=>y===null)?100:l.every(y=>y?.status==="0x1")?200:l.every(y=>y?.status==="0x0")?500:600;return{atomic:!1,chainId:V(d),receipts:l.filter(Boolean),status:b,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[m]})}let f=await r(e.id),{atomic:o=!1,chainId:n,receipts:s,version:i="2.0.0"}=f,c=O(f,["atomic","chainId","receipts","version"]),[a,u]=(()=>{let m=c.status;return m>=100&&m<200?["pending",m]:m>=200&&m<300?["success",m]:m>=300&&m<700?["failure",m]:m==="CONFIRMED"?["success",200]:m==="PENDING"?["pending",100]:[void 0,m]})();return C(x({},c),{atomic:o,chainId:n?V(n):void 0,receipts:s?.map(m=>C(x({},m),{blockNumber:D(m.blockNumber),gasUsed:D(m.gasUsed),status:Dc[m.status]}))??[],statusCode:u,status:a,version:i})}async function Fn(t,e){let{id:r,pollingInterval:o=t.pollingInterval,status:n=({statusCode:l})=>l===200||l>=300,retryCount:s=4,retryDelay:i=({count:l})=>~~(1<<l)*200,timeout:c=6e4,throwOnFailure:a=!1}=e,u=Y(["waitForCallsStatus",t.uid,r]),{promise:f,resolve:m,reject:p}=Pn(),d,h=ht(u,{resolve:m,reject:p},l=>{let b=_t(async()=>{let y=A=>{clearTimeout(d),b(),A(),h()};try{let A=await Pe(async()=>{let w=await B(t,qn,"getCallsStatus")({id:r});if(a&&w.status==="failure")throw new go(w);return w},{retryCount:s,delay:i});if(!n(A))return;y(()=>l.resolve(A))}catch(A){y(()=>l.reject(A))}},{interval:o,emitOnBegin:!0});return b});return d=c?setTimeout(()=>{h(),clearTimeout(d),p(new Un({id:r}))},c):void 0,await f}var Un=class extends L{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}};var zn=256,Ln;function Mn(t=11){if(!Ln||zn+t>256*2){Ln="",zn=0;for(let e=0;e<256;e++)Ln+=(256+Math.random()*256|0).toString(16).substring(1)}return Ln.substring(zn,zn+++t)}function er(t){let{batch:e,chain:r,ccipRead:o,key:n="base",name:s="Base Client",type:i="base"}=t,c=t.experimental_blockTag??(typeof r?.experimental_preconfirmationTime=="number"?"pending":void 0),a=r?.blockTime??12e3,u=Math.min(Math.max(Math.floor(a/2),500),4e3),f=t.pollingInterval??u,m=t.cacheTime??f,p=t.account?G(t.account):void 0,{config:d,request:h,value:l}=t.transport({chain:r,pollingInterval:f}),b=x(x({},d),l),y=x({account:p,batch:e,cacheTime:m,ccipRead:o,chain:r,key:n,name:s,pollingInterval:f,request:h,transport:b,type:i,uid:Mn()},c?{experimental_blockTag:c}:{});function A(w){return g=>{let v=g(w);for(let T in y)delete v[T];let E=x(x({},w),v);return Object.assign(E,{extend:A(E)})}}return Object.assign(y,{extend:A(y)})}function Bp(){return null}function kr(t){if(!(t instanceof L))return!1;let e=t.walk(r=>r instanceof pr);return e instanceof pr?e.data?.errorName==="HttpError"||e.data?.errorName==="ResolverError"||e.data?.errorName==="ResolverNotContract"||e.data?.errorName==="ResolverNotFound"||e.data?.errorName==="ReverseAddressMismatch"||e.data?.errorName==="UnsupportedResolverProfile":!1}function On(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;let e=`0x${t.slice(1,65)}`;return M(e)?e:null}function Nr(t){let e=new Uint8Array(32).fill(0);if(!t)return ot(e);let r=t.split(".");for(let o=r.length-1;o>=0;o-=1){let n=On(r[o]),s=n?pt(n):K(Qt(r[o]),"bytes");e=K(At([e,s]),"bytes")}return ot(e)}function ou(t){return`[${t.slice(2)}]`}function Vi(t){let e=new Uint8Array(32).fill(0);return t?On(t)||K(Qt(t)):ot(e)}function Hr(t){let e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let r=new Uint8Array(Qt(e).byteLength+2),o=0,n=e.split(".");for(let s=0;s<n.length;s++){let i=Qt(n[s]);i.byteLength>255&&(i=Qt(ou(Vi(n[s])))),r[o]=i.length,r.set(i,o+1),o+=i.length+1}return r.byteLength!==o+1?r.slice(0,o+1):r}async function nu(t,e){let{blockNumber:r,blockTag:o,coinType:n,name:s,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Lt({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})(),f=a?.ensTlds;if(f&&!f.some(p=>s.endsWith(p)))return null;let m=n!=null?[Nr(s),BigInt(n)]:[Nr(s)];try{let p=J({abi:ki,functionName:"addr",args:m}),d={address:u,abi:Tn,functionName:"resolveWithGateways",args:[st(Hr(s)),p,i??[Ar]],blockNumber:r,blockTag:o},l=await B(t,tt,"readContract")(d);if(l[0]==="0x")return null;let b=Ct({abi:ki,args:m,functionName:"addr",data:l[0]});return b==="0x"||qe(b)==="0x00"?null:b}catch(p){if(c)throw p;if(kr(p))return null;throw p}}var Dn=class extends L{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},ne=class extends L{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},rr=class extends L{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},bo=class extends L{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}},wo=class extends L{constructor({chainId:e}){super(`Invalid ENSIP-11 chainId: ${e}. Must be between 0 and 0x7fffffff, or 1.`,{name:"EnsInvalidChainIdError"})}};var Pp=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Sp=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Cp=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Rp=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function kp(t){try{let e=await fetch(t,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(r=>{let o=new Image;o.onload=()=>{r(!0)},o.onerror=()=>{r(!1)},o.src=t})}}function su(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function Wi({uri:t,gatewayUrls:e}){let r=Cp.test(t);if(r)return{uri:t,isOnChain:!0,isEncoded:r};let o=su(e?.ipfs,"https://ipfs.io"),n=su(e?.arweave,"https://arweave.net"),s=t.match(Pp),{protocol:i,subpath:c,target:a,subtarget:u=""}=s?.groups||{},f=i==="ipns:/"||c==="ipns/",m=i==="ipfs:/"||c==="ipfs/"||Sp.test(t);if(t.startsWith("http")&&!f&&!m){let d=t;return e?.arweave&&(d=t.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:d,isOnChain:!1,isEncoded:!1}}if((f||m)&&a)return{uri:`${o}/${f?"ipns":"ipfs"}/${a}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&a)return{uri:`${n}/${a}${u||""}`,isOnChain:!1,isEncoded:!1};let p=t.replace(Rp,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new rr({uri:t})}function Zi(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Dn({data:t});return t.image||t.image_url||t.image_data}async function iu({gatewayUrls:t,uri:e}){try{let r=await fetch(e).then(n=>n.json());return await $n({gatewayUrls:t,uri:Zi(r)})}catch{throw new rr({uri:e})}}async function $n({gatewayUrls:t,uri:e}){let{uri:r,isOnChain:o}=Wi({uri:e,gatewayUrls:t});if(o||await kp(r))return r;throw new rr({uri:e})}function au(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[r,o,n]=e.split("/"),[s,i]=r.split(":"),[c,a]=o.split(":");if(!s||s.toLowerCase()!=="eip155")throw new ne({reason:"Only EIP-155 supported"});if(!i)throw new ne({reason:"Chain ID not found"});if(!a)throw new ne({reason:"Contract address not found"});if(!n)throw new ne({reason:"Token ID not found"});if(!c)throw new ne({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:c.toLowerCase(),contractAddress:a,tokenID:n}}async function cu(t,{nft:e}){if(e.namespace==="erc721")return tt(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return tt(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new bo({namespace:e.namespace})}async function uu(t,{gatewayUrls:e,record:r}){return/eip155:/i.test(r)?Np(t,{gatewayUrls:e,record:r}):$n({uri:r,gatewayUrls:e})}async function Np(t,{gatewayUrls:e,record:r}){let o=au(r),n=await cu(t,{nft:o}),{uri:s,isOnChain:i,isEncoded:c}=Wi({uri:n,gatewayUrls:e});if(i&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let u=c?atob(s.replace("data:application/json;base64,","")):s,f=JSON.parse(u);return $n({uri:Zi(f),gatewayUrls:e})}let a=o.tokenID;return o.namespace==="erc1155"&&(a=a.replace("0x","").padStart(64,"0")),iu({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,a)})}async function jn(t,e){let{blockNumber:r,blockTag:o,key:n,name:s,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Lt({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})(),f=a?.ensTlds;if(f&&!f.some(m=>s.endsWith(m)))return null;try{let m={address:u,abi:Tn,args:[st(Hr(s)),J({abi:Ri,functionName:"text",args:[Nr(s),n]}),i??[Ar]],functionName:"resolveWithGateways",blockNumber:r,blockTag:o},d=await B(t,tt,"readContract")(m);if(d[0]==="0x")return null;let h=Ct({abi:Ri,functionName:"text",data:d[0]});return h===""?null:h}catch(m){if(c)throw m;if(kr(m))return null;throw m}}async function fu(t,{blockNumber:e,blockTag:r,assetGatewayUrls:o,name:n,gatewayUrls:s,strict:i,universalResolverAddress:c}){let a=await B(t,jn,"getEnsText")({blockNumber:e,blockTag:r,key:"avatar",name:n,universalResolverAddress:c,gatewayUrls:s,strict:i});if(!a)return null;try{return await uu(t,{record:a,gatewayUrls:o})}catch{return null}}async function mu(t,e){let{address:r,blockNumber:o,blockTag:n,coinType:s=60n,gatewayUrls:i,strict:c}=e,{chain:a}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Lt({blockNumber:o,chain:a,contract:"ensUniversalResolver"})})();try{let f={address:u,abi:Mc,args:[r,s,i??[Ar]],functionName:"reverseWithGateways",blockNumber:o,blockTag:n},m=B(t,tt,"readContract"),[p]=await m(f);return p||null}catch(f){if(c)throw f;if(kr(f))return null;throw f}}async function pu(t,e){let{blockNumber:r,blockTag:o,name:n}=e,{chain:s}=t,i=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return Lt({blockNumber:r,chain:s,contract:"ensUniversalResolver"})})(),c=s?.ensTlds;if(c&&!c.some(u=>n.endsWith(u)))throw new Error(`${n} is not a valid ENS TLD (${c?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[a]=await B(t,tt,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[st(Hr(n))],blockNumber:r,blockTag:o});return a}async function Gn(t,e){let b=e,{account:r=t.account,blockNumber:o,blockTag:n="latest",blobs:s,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:d}=b,h=O(b,["account","blockNumber","blockTag","blobs","data","gas","gasPrice","maxFeePerBlobGas","maxFeePerGas","maxPriorityFeePerGas","to","value"]),l=r?G(r):void 0;try{bt(e);let A=(typeof o=="bigint"?P(o):void 0)||n,w=t.chain?.formatters?.transactionRequest?.format,v=(w||gt)(C(x({},Gt(h,{format:w})),{from:l?.address,blobs:s,data:i,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:d}),"createAccessList"),E=await t.request({method:"eth_createAccessList",params:[v,A]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(y){throw Oc(y,C(x({},e),{account:l,chain:t.chain}))}}async function du(t){let e=Ee(t,{method:"eth_newBlockFilter"}),r=await t.request({method:"eth_newBlockFilter"});return{id:r,request:e(r),type:"block"}}async function Vn(t,{address:e,args:r,event:o,events:n,fromBlock:s,strict:i,toBlock:c}={}){let a=n??(o?[o]:void 0),u=Ee(t,{method:"eth_newFilter"}),f=[];a&&(f=[a.flatMap(d=>Mt({abi:[d],eventName:d.name,args:r}))],o&&(f=f[0]));let m=await t.request({method:"eth_newFilter",params:[x({address:e,fromBlock:typeof s=="bigint"?P(s):s,toBlock:typeof c=="bigint"?P(c):c},f.length?{topics:f}:{})]});return{abi:a,args:r,eventName:o?o.name:void 0,fromBlock:s,id:m,request:u(m),strict:!!i,toBlock:c,type:"event"}}async function Wn(t){let e=Ee(t,{method:"eth_newPendingTransactionFilter"}),r=await t.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:e(r),type:"transaction"}}async function lu(t,{address:e,blockNumber:r,blockTag:o=t.experimental_blockTag??"latest"}){let n=typeof r=="bigint"?P(r):void 0,s=await t.request({method:"eth_getBalance",params:[e,n||o]});return BigInt(s)}async function hu(t){let e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function yu(t,{blockHash:e,blockNumber:r,blockTag:o="latest"}={}){let n=r!==void 0?P(r):void 0,s;return e?s=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):s=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[n||o]},{dedupe:!!n}),V(s)}async function Eo(t,{address:e,blockNumber:r,blockTag:o="latest"}){let n=r!==void 0?P(r):void 0,s=await t.request({method:"eth_getCode",params:[e,n||o]},{dedupe:!!n});if(s!=="0x")return s}var Zn=class extends L{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function xu(t,e){let{address:r,factory:o,factoryData:n}=e;try{let[s,i,c,a,u,f,m]=await B(t,tt,"readContract")({abi:Hp,address:r,functionName:"eip712Domain",factory:o,factoryData:n});return{domain:{name:i,version:c,chainId:Number(a),verifyingContract:u,salt:f},extensions:m,fields:s}}catch(s){let i=s;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Zn({address:r}):i}}var Hp=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function gu(t){return{baseFeePerGas:t.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:t.reward?.map(e=>e.map(r=>BigInt(r)))}}async function bu(t,{blockCount:e,blockNumber:r,blockTag:o="latest",rewardPercentiles:n}){let s=typeof r=="bigint"?P(r):void 0,i=await t.request({method:"eth_feeHistory",params:[P(e),s||o,n]},{dedupe:!!s});return gu(i)}async function wu(t,{filter:e}){let r=e.strict??!1,n=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>wt(s));return e.abi?Qe({abi:e.abi,logs:n,strict:r}):n}function _p(t,e){if(t.length!==e.length)throw new ti({expectedLength:t.length,givenLength:e.length});let r=[];for(let o=0;o<t.length;o++){let n=t[o],s=e[o];r.push(Eu(n,s))}return jt(r)}function Eu(t,e,r=!1){if(t==="address"){let i=e;if(!te(i))throw new Ue({address:i});return _e(i.toLowerCase(),{size:r?32:null})}if(t==="string")return zt(e);if(t==="bytes")return e;if(t==="bool")return _e(Yo(e),{size:r?32:1});let o=t.match(Xo);if(o){let[i,c,a="256"]=o,u=Number.parseInt(a,10)/8;return P(e,{size:r?32:u,signed:c==="int"})}let n=t.match(Jo);if(n){let[i,c]=n;if(Number.parseInt(c,10)!==(e.length-2)/2)throw new Vr({expectedSize:Number.parseInt(c,10),givenSize:(e.length-2)/2});return _e(e,{dir:"right",size:r?32:null})}let s=t.match(Ec);if(s&&Array.isArray(e)){let[i,c]=s,a=[];for(let u=0;u<e.length;u++)a.push(Eu(c,e[u],!0));return a.length===0?"0x":jt(a)}throw new ri(t)}function Kn(t){return!t||typeof t!="object"||!("BYTES_PER_ELEMENT"in t)?!1:t.BYTES_PER_ELEMENT===1&&t.constructor.name==="Uint8Array"}function qp(t){return t.opcode==="CREATE2"?Au(t):vu(t)}function vu(t){let e=pt(it(t.from)),r=pt(t.nonce);return r[0]===0&&(r=new Uint8Array([])),it(`0x${K(eo([e,r],"bytes")).slice(26)}`)}function Au(t){let e=pt(it(t.from)),r=_e(Kn(t.salt)?t.salt:pt(t.salt),{size:32}),o="bytecodeHash"in t?Kn(t.bytecodeHash)?t.bytecodeHash:pt(t.bytecodeHash):K(t.bytecode,"bytes");return it(si(K(At([pt("0xff"),e,r,o])),12))}async function Tu({address:t,authorization:e,signature:r}){return ft(it(t),await ve({authorization:e,signature:r}))}var Yn=new de(8192);function Iu(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(Yn.get(r))return Yn.get(r);let o=t().finally(()=>Yn.delete(r));return Yn.set(r,o),o}function Bu(t,e={}){return async(r,o={})=>{let{dedupe:n=!1,methods:s,retryDelay:i=150,retryCount:c=3,uid:a}=x(x({},e),o),{method:u}=r;if(s?.exclude?.includes(u))throw new hr(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new hr(new Error("method not supported"),{method:u});let f=n?zt(`${a}.${Y(r)}`):void 0;return Iu(()=>Pe(async()=>{try{return await t(r)}catch(m){let p=m;switch(p.code){case en.code:throw new en(p);case rn.code:throw new rn(p);case on.code:throw new on(p,{method:r.method});case nn.code:throw new nn(p);case De.code:throw new De(p);case ge.code:throw new ge(p);case sn.code:throw new sn(p);case an.code:throw new an(p);case lr.code:throw new lr(p);case hr.code:throw new hr(p,{method:r.method});case to.code:throw new to(p);case cn.code:throw new cn(p);case $e.code:throw new $e(p);case un.code:throw new un(p);case fn.code:throw new fn(p);case mn.code:throw new mn(p);case pn.code:throw new pn(p);case dn.code:throw new dn(p);case yr.code:throw new yr(p);case ln.code:throw new ln(p);case hn.code:throw new hn(p);case yn.code:throw new yn(p);case xn.code:throw new xn(p);case gn.code:throw new gn(p);case xr.code:throw new xr(p);case 5e3:throw new $e(p);default:throw m instanceof L?m:new hi(p)}}},{delay:({count:m,error:p})=>{if(p&&p instanceof xe){let d=p?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d,10)*1e3}return~~(1<<m)*i},retryCount:c,shouldRetry:({error:m})=>Up(m)}),{enabled:n,id:f})}}function Up(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===to.code||t.code===De.code:t instanceof xe&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Jn(t,e="hex"){let r=(()=>{if(typeof t=="string"){if(t.length>3&&t.length%2!==0)throw new oi(t);return ut(t)}return t})(),o=Yr(r,{recursiveReadLimit:Number.POSITIVE_INFINITY});return Su(o,e)}function Su(t,e="hex"){if(t.bytes.length===0)return e==="hex"?ot(t.bytes):t.bytes;let r=t.readByte();if(r<128&&t.decrementPosition(1),r<192){let n=Pu(t,r,128),s=t.readBytes(n);return e==="hex"?ot(s):s}let o=Pu(t,r,192);return Fp(t,o,e)}function Pu(t,e,r){if(r===128&&e<128)return 1;if(e<=r+55)return e-r;if(e===r+55+1)return t.readUint8();if(e===r+55+2)return t.readUint16();if(e===r+55+3)return t.readUint24();if(e===r+55+4)return t.readUint32();throw new L("Invalid RLP prefix")}function Fp(t,e,r){let o=t.position,n=[];for(;t.position-o<e;)n.push(Su(t,r));return n}function Ki(t){return M(t)&&Ht(t)===32}var zp=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ru=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),Lp=Ru.map(t=>(9*t+5)%16),ku=(()=>{let r=[[Ru],[Lp]];for(let o=0;o<4;o++)for(let n of r)n.push(n[o].map(s=>zp[s]));return r})(),Nu=ku[0],Hu=ku[1],_u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),Mp=Nu.map((t,e)=>t.map(r=>_u[e][r])),Op=Hu.map((t,e)=>t.map(r=>_u[e][r])),Dp=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),$p=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function Cu(t,e,r,o){return t===0?e^r^o:t===1?e&r|~e&o:t===2?(e|~r)^o:t===3?e&o|r&~o:e^(r|~o)}var Xn=new Uint32Array(16),Qn=class extends Tc{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:r,h2:o,h3:n,h4:s}=this;return[e,r,o,n,s]}set(e,r,o,n,s){this.h0=e|0,this.h1=r|0,this.h2=o|0,this.h3=n|0,this.h4=s|0}process(e,r){for(let d=0;d<16;d++,r+=4)Xn[d]=e.getUint32(r,!0);let o=this.h0|0,n=o,s=this.h1|0,i=s,c=this.h2|0,a=c,u=this.h3|0,f=u,m=this.h4|0,p=m;for(let d=0;d<5;d++){let h=4-d,l=Dp[d],b=$p[d],y=Nu[d],A=Hu[d],w=Mp[d],g=Op[d];for(let v=0;v<16;v++){let E=Wr(o+Cu(d,s,c,u)+Xn[y[v]]+l,w[v])+m|0;o=m,m=u,u=Wr(c,10)|0,c=s,s=E}for(let v=0;v<16;v++){let E=Wr(n+Cu(h,i,a,f)+Xn[A[v]]+b,g[v])+p|0;n=p,p=f,f=Wr(a,10)|0,a=i,i=E}}this.set(this.h1+c+f|0,this.h2+u+p|0,this.h3+m+n|0,this.h4+o+i|0,this.h0+s+a|0)}roundClean(){ni(Xn)}destroy(){this.destroyed=!0,ni(this.buffer),this.set(0,0,0,0,0)}},qu=gc(()=>new Qn);var Uu=qu;function jp(t,e){let r=e||"hex",o=Uu(M(t,{strict:!1})?pt(t):t);return r==="bytes"?o:st(o)}function Fu(t){let{source:e}=t,r=new Map,o=new de(8192),n=new Map,s=({address:i,chainId:c})=>`${i}.${c}`;return{async consume({address:i,chainId:c,client:a}){let u=s({address:i,chainId:c}),f=this.get({address:i,chainId:c,client:a});this.increment({address:i,chainId:c});let m=await f;return await e.set({address:i,chainId:c},m),o.set(u,m),m},async increment({address:i,chainId:c}){let a=s({address:i,chainId:c}),u=r.get(a)??0;r.set(a,u+1)},async get({address:i,chainId:c,client:a}){let u=s({address:i,chainId:c}),f=n.get(u);return f||(f=(async()=>{try{let p=await e.get({address:i,chainId:c,client:a}),d=o.get(u)??0;return d>0&&p<=d?d+1:(o.delete(u),p)}finally{this.reset({address:i,chainId:c})}})(),n.set(u,f)),(r.get(u)??0)+await f},reset({address:i,chainId:c}){let a=s({address:i,chainId:c});r.delete(a),n.delete(a)}}}function Gp(){return{async get(t){let{address:e,client:r}=t;return Ae(r,{address:e,blockTag:"pending"})},set(){}}}var Vp=Fu({source:Gp()});function Ao(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:o}){return new Promise((n,s)=>{(async()=>{let i;try{let c=new AbortController;r>0&&(i=setTimeout(()=>{o?c.abort():s(e)},r)),n(await t({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&s(e),s(c)}finally{clearTimeout(i)}})()})}function Wp(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var To=Wp();function zu(t,e={}){return{async request(r){let{body:o,fetchFn:n=e.fetchFn??fetch,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:c=e.timeout??1e4}=r,a=x(x({},e.fetchOptions??{}),r.fetchOptions??{}),{headers:u,method:f,signal:m}=a;try{let p=await Ao(async({signal:h})=>{let l=C(x({},a),{body:Array.isArray(o)?Y(o.map(w=>x({jsonrpc:"2.0",id:w.id??To.take()},w))):Y(x({jsonrpc:"2.0",id:o.id??To.take()},o)),headers:x({"Content-Type":"application/json"},u),method:f||"POST",signal:m||(c>0?h:null)}),b=new Request(t,l),y=await s?.(b,l)??C(x({},l),{url:t});return await n(y.url??t,y)},{errorInstance:new dr({body:o,url:t}),timeout:c,signal:!0});i&&await i(p);let d;if(p.headers.get("Content-Type")?.startsWith("application/json"))d=await p.json();else{d=await p.text();try{d=JSON.parse(d||"{}")}catch(h){if(p.ok)throw h;d={error:d}}}if(!p.ok)throw new xe({body:o,details:Y(d.error)||p.statusText,headers:p.headers,status:p.status,url:t});return d}catch(p){throw p instanceof xe||p instanceof dr?p:new xe({body:o,cause:p,url:t})}}}}var Ji=new Map;async function Lu(t){let{getSocket:e,keepAlive:r=!0,key:o="socket",reconnect:n=!0,url:s}=t,{interval:i=3e4}=typeof r=="object"?r:{},{attempts:c=5,delay:a=2e3}=typeof n=="object"?n:{},u=JSON.stringify({keepAlive:r,key:o,url:s,reconnect:n}),f=Ji.get(u);if(f)return f;let m=0,{schedule:p}=Sn({id:u,fn:async()=>{let l=new Map,b=new Map,y,A,w,g=!1;function v(){if(n&&m<c){if(g)return;g=!0,m++,A?.close(),setTimeout(async()=>{await E().catch(console.error),g=!1},a)}else l.clear(),b.clear()}async function E(){let T=await e({onClose(){for(let I of l.values())I.onError?.(new Oe({url:s}));for(let I of b.values())I.onError?.(new Oe({url:s}));v()},onError(I){y=I;for(let H of l.values())H.onError?.(y);for(let H of b.values())H.onError?.(y);v()},onOpen(){y=void 0,m=0},onResponse(I){let H=I.method==="eth_subscription",N=H?I.params.subscription:I.id,S=H?b:l,_=S.get(N);_&&_.onResponse(I),H||S.delete(N)}});if(A=T,r&&(w&&clearInterval(w),w=setInterval(()=>A.ping?.(),i)),n&&b.size>0){let I=b.entries();for(let[H,{onResponse:N,body:S,onError:_}]of I)S&&(b.delete(H),f?.request({body:S,onResponse:N,onError:_}))}return T}return await E(),y=void 0,f={close(){w&&clearInterval(w),A.close(),Ji.delete(u)},get socket(){return A},request({body:T,onError:I,onResponse:H}){y&&I&&I(y);let N=T.id??To.take(),S=_=>{typeof _.id=="number"&&N!==_.id||(T.method==="eth_subscribe"&&typeof _.result=="string"&&b.set(_.result,{onResponse:S,onError:I,body:T}),T.method==="eth_unsubscribe"&&b.delete(T.params?.[0]),H(_))};l.set(N,{onResponse:S,onError:I});try{A.request({body:x({jsonrpc:"2.0",id:N},T)})}catch(_){I?.(_)}},requestAsync({body:T,timeout:I=1e4}){return Ao(()=>new Promise((H,N)=>this.request({body:T,onError:N,onResponse:H})),{errorInstance:new dr({body:T,url:s}),timeout:I})},requests:l,subscriptions:b,url:s},Ji.set(u,f),[f]}}),[d,[h]]=await p();return h}async function _r(t,e={}){let{keepAlive:r,reconnect:o}=e;return Lu({async getSocket({onClose:n,onError:s,onOpen:i,onResponse:c}){let a=await import("./chunk-MERDUOAW.js").then(d=>d.WebSocket),u=new a(t);function f(){u.removeEventListener("close",f),u.removeEventListener("message",m),u.removeEventListener("error",s),u.removeEventListener("open",i),n()}function m({data:d}){if(!(typeof d=="string"&&d.trim().length===0))try{let h=JSON.parse(d);c(h)}catch(h){s(h)}}u.addEventListener("close",f),u.addEventListener("message",m),u.addEventListener("error",s),u.addEventListener("open",i),u.readyState===a.CONNECTING&&await new Promise((d,h)=>{u&&(u.onopen=d,u.onerror=h)});let{close:p}=u;return Object.assign(u,{close(){p.bind(u)(),f()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new tn({url:u.url,cause:new Oe({url:u.url})});let d={jsonrpc:"2.0",id:null,method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){s(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new tn({body:d,url:u.url,cause:new Oe({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:r,reconnect:o,url:t})}async function Mu(t){let e=await _r(t);return Object.assign(e.socket,{requests:e.requests,subscriptions:e.subscriptions})}var Xi=`Ethereum Signed Message:
`;function Qi(t){let e=typeof t=="string"?zt(t):typeof t.raw=="string"?t.raw:ot(t.raw),r=zt(`${Xi}${Ht(e)}`);return At([r,e])}function or(t,e){return K(Qi(t),e)}var Io=class extends L{constructor({domain:e}){super(`Invalid domain "${Y(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},Bo=class extends L{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},Po=class extends L{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};function ta(t){let{domain:e,message:r,primaryType:o,types:n}=t,s=(a,u)=>{let f=x({},u);for(let m of a){let{name:p,type:d}=m;d==="address"&&(f[p]=f[p].toLowerCase())}return f},i=n.EIP712Domain?e?s(n.EIP712Domain,e):{}:{},c=(()=>{if(o!=="EIP712Domain")return s(n[o],r)})();return Y({domain:i,message:c,primaryType:o,types:n})}function So(t){let{domain:e,message:r,primaryType:o,types:n}=t,s=(i,c)=>{for(let a of i){let{name:u,type:f}=a,m=c[u],p=f.match(Xo);if(p&&(typeof m=="number"||typeof m=="bigint")){let[l,b,y]=p;P(m,{signed:b==="int",size:Number.parseInt(y,10)/8})}if(f==="address"&&typeof m=="string"&&!te(m))throw new Ue({address:m});let d=f.match(Jo);if(d){let[l,b]=d;if(b&&Ht(m)!==Number.parseInt(b,10))throw new Vr({expectedSize:Number.parseInt(b,10),givenSize:Ht(m)})}let h=n[f];h&&(Kp(f),s(h,m))}};if(n.EIP712Domain&&e){if(typeof e!="object")throw new Io({domain:e});s(n.EIP712Domain,e)}if(o!=="EIP712Domain")if(n[o])s(n[o],r);else throw new Bo({primaryType:o,types:n})}function qr({domain:t}){return[typeof t?.name=="string"&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},(typeof t?.chainId=="number"||typeof t?.chainId=="bigint")&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Zp({domain:t}){return ts({domain:t,types:{EIP712Domain:qr({domain:t})}})}function Kp(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Po({type:t})}function Co(t){let{domain:e={},message:r,primaryType:o}=t,n=x({EIP712Domain:qr({domain:e})},t.types);So({domain:e,message:r,primaryType:o,types:n});let s=["0x1901"];return e&&s.push(ts({domain:e,types:n})),o!=="EIP712Domain"&&s.push(ea({data:r,primaryType:o,types:n})),K(At(s))}function ts({domain:t,types:e}){return ea({data:t,primaryType:"EIP712Domain",types:e})}function ea({data:t,primaryType:e,types:r}){let o=Ou({data:t,primaryType:e,types:r});return K(o)}function Ou({data:t,primaryType:e,types:r}){let o=[{type:"bytes32"}],n=[Yp({primaryType:e,types:r})];for(let s of r[e]){let[i,c]=$u({types:r,name:s.name,type:s.type,value:t[s.name]});o.push(i),n.push(c)}return he(o,n)}function Yp({primaryType:t,types:e}){let r=st(Jp({primaryType:t,types:e}));return K(r)}function Jp({primaryType:t,types:e}){let r="",o=Du({primaryType:t,types:e});o.delete(t);let n=[t,...Array.from(o).sort()];for(let s of n)r+=`${s}(${e[s].map(({name:i,type:c})=>`${c} ${i}`).join(",")})`;return r}function Du({primaryType:t,types:e},r=new Set){let n=t.match(/^\w*/u)?.[0];if(r.has(n)||e[n]===void 0)return r;r.add(n);for(let s of e[n])Du({primaryType:s.type,types:e},r);return r}function $u({types:t,name:e,type:r,value:o}){if(t[r]!==void 0)return[{type:"bytes32"},K(Ou({data:o,primaryType:r,types:t}))];if(r==="bytes")return o=`0x${(o.length%2?"0":"")+o.slice(2)}`,[{type:"bytes32"},K(o)];if(r==="string")return[{type:"bytes32"},K(st(o))];if(r.lastIndexOf("]")===r.length-1){let n=r.slice(0,r.lastIndexOf("[")),s=o.map(i=>$u({name:e,type:n,types:t,value:i}));return[{type:"bytes32"},K(he(s.map(([i])=>i),s.map(([,i])=>i)))]}return[{type:r},o]}var es="0x6492649264926492649264926492649264926492649264926492649264926492",Xp="0x0000000000000000000000000000000000000000000000000000000000000000";function ra(t){return le(t,-32)===es}var Dt={};hc(Dt,{InvalidWrappedSignatureError:()=>Fs,assert:()=>zs,from:()=>ul,magicBytes:()=>Za,suffixParameters:()=>Ka,unwrap:()=>em,validate:()=>ml,wrap:()=>fl});var ju="1.1.1";var et=class t extends Error{constructor(e,r={}){let o=r.cause instanceof t?r.cause.details:r.cause?.message?r.cause.message:r.details,n=r.cause instanceof t&&r.cause.docsPath||r.docsPath,s=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...o?[`Details: ${o}`]:[],`Version: abitype@${ju}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=o,this.docsPath=n,this.metaMessages=r.metaMessages,this.shortMessage=e}};function kt(t,e){return t.exec(e)?.groups}var oa=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,na=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rs=/^\(.+?\).*?$/;var Gu=/^tuple(?<array>(\[(\d*)\])*)$/;function os(t){let e=t.type;if(Gu.test(t.type)&&"components"in t){e="(";let r=t.components.length;for(let n=0;n<r;n++){let s=t.components[n];e+=os(s),n<r-1&&(e+=", ")}let o=kt(Gu,t.type);return e+=`)${o?.array??""}`,os(C(x({},t),{type:e}))}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function se(t){let e="",r=t.length;for(let o=0;o<r;o++){let n=t[o];e+=os(n),o!==r-1&&(e+=", ")}return e}function Ro(t){return t.type==="function"?`function ${t.name}(${se(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${se(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${se(t.inputs)})`:t.type==="error"?`error ${t.name}(${se(t.inputs)})`:t.type==="constructor"?`constructor(${se(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var Vu=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Wu(t){return Vu.test(t)}function Zu(t){return kt(Vu,t)}var Ku=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Yu(t){return Ku.test(t)}function Ju(t){return kt(Ku,t)}var Xu=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Qu(t){return Xu.test(t)}function tf(t){return kt(Xu,t)}var ef=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Ur(t){return ef.test(t)}function rf(t){return kt(ef,t)}var of=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function nf(t){return of.test(t)}function sf(t){return kt(of,t)}var af=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function cf(t){return af.test(t)}function uf(t){return kt(af,t)}var Qp=/^receive\(\) external payable$/;function ff(t){return Qp.test(t)}var sa=new Set(["memory","indexed","storage","calldata"]),mf=new Set(["indexed"]),ns=new Set(["calldata","memory","storage"]);var ss=class extends et{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},is=class extends et{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},as=class extends et{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}};var cs=class extends et{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}},us=class extends et{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},fs=class extends et{constructor({param:e,name:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},ms=class extends et{constructor({param:e,type:r,modifier:o}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${o}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},ps=class extends et{constructor({param:e,type:r,modifier:o}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${o}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${o}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},ds=class extends et{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}};var Yt=class extends et{constructor({signature:e,type:r}){super(`Invalid ${r} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},ls=class extends et{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},hs=class extends et{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}};var ys=class extends et{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}};var xs=class extends et{constructor({current:e,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};function pf(t,e,r){let o="";if(r)for(let n of Object.entries(r)){if(!n)continue;let s="";for(let i of n[1])s+=`[${i.type}${i.name?`:${i.name}`:""}]`;o+=`(${n[0]}{${s}})`}return e?`${e}:${t}${o}`:t}var gs=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ia(t,e={}){if(Qu(t))return td(t,e);if(Yu(t))return ed(t,e);if(Wu(t))return rd(t,e);if(nf(t))return od(t,e);if(cf(t))return nd(t);if(ff(t))return{type:"receive",stateMutability:"payable"};throw new ls({signature:t})}function td(t,e={}){let r=tf(t);if(!r)throw new Yt({signature:t,type:"function"});let o=Pt(r.parameters),n=[],s=o.length;for(let c=0;c<s;c++)n.push(Ot(o[c],{modifiers:ns,structs:e,type:"function"}));let i=[];if(r.returns){let c=Pt(r.returns),a=c.length;for(let u=0;u<a;u++)i.push(Ot(c[u],{modifiers:ns,structs:e,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:n,outputs:i}}function ed(t,e={}){let r=Ju(t);if(!r)throw new Yt({signature:t,type:"event"});let o=Pt(r.parameters),n=[],s=o.length;for(let i=0;i<s;i++)n.push(Ot(o[i],{modifiers:mf,structs:e,type:"event"}));return{name:r.name,type:"event",inputs:n}}function rd(t,e={}){let r=Zu(t);if(!r)throw new Yt({signature:t,type:"error"});let o=Pt(r.parameters),n=[],s=o.length;for(let i=0;i<s;i++)n.push(Ot(o[i],{structs:e,type:"error"}));return{name:r.name,type:"error",inputs:n}}function od(t,e={}){let r=sf(t);if(!r)throw new Yt({signature:t,type:"constructor"});let o=Pt(r.parameters),n=[],s=o.length;for(let i=0;i<s;i++)n.push(Ot(o[i],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:n}}function nd(t){let e=uf(t);if(!e)throw new Yt({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}var sd=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,id=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ad=/^u?int$/;function Ot(t,e){let r=pf(t,e?.type,e?.structs);if(gs.has(r))return gs.get(r);let o=rs.test(t),n=kt(o?id:sd,t);if(!n)throw new us({param:t});if(n.name&&ud(n.name))throw new fs({param:t,name:n.name});let s=n.name?{name:n.name}:{},i=n.modifier==="indexed"?{indexed:!0}:{},c=e?.structs??{},a,u={};if(o){a="tuple";let m=Pt(n.type),p=[],d=m.length;for(let h=0;h<d;h++)p.push(Ot(m[h],{structs:c}));u={components:p}}else if(n.type in c)a="tuple",u={components:c[n.type]};else if(ad.test(n.type))a=`${n.type}256`;else if(n.type==="address payable")a="address";else if(a=n.type,e?.type!=="struct"&&!aa(a))throw new as({type:a});if(n.modifier){if(!e?.modifiers?.has?.(n.modifier))throw new ms({param:t,type:e?.type,modifier:n.modifier});if(ns.has(n.modifier)&&!fd(a,!!n.array))throw new ps({param:t,type:e?.type,modifier:n.modifier})}let f=x(x(x({type:`${a}${n.array??""}`},s),i),u);return gs.set(r,f),f}function Pt(t,e=[],r="",o=0){let n=t.trim().length;for(let s=0;s<n;s++){let i=t[s],c=t.slice(s+1);switch(i){case",":return o===0?Pt(c,[...e,r.trim()]):Pt(c,e,`${r}${i}`,o);case"(":return Pt(c,e,`${r}${i}`,o+1);case")":return Pt(c,e,`${r}${i}`,o-1);default:return Pt(c,e,`${r}${i}`,o)}}if(r==="")return e;if(o!==0)throw new xs({current:r,depth:o});return e.push(r.trim()),e}function aa(t){return t==="address"||t==="bool"||t==="function"||t==="string"||oa.test(t)||na.test(t)}var cd=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ud(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||oa.test(t)||na.test(t)||cd.test(t)}function fd(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function bs(t){let e={},r=t.length;for(let i=0;i<r;i++){let c=t[i];if(!Ur(c))continue;let a=rf(c);if(!a)throw new Yt({signature:c,type:"struct"});let u=a.properties.split(";"),f=[],m=u.length;for(let p=0;p<m;p++){let h=u[p].trim();if(!h)continue;let l=Ot(h,{type:"struct"});f.push(l)}if(!f.length)throw new hs({signature:c});e[a.name]=f}let o={},n=Object.entries(e),s=n.length;for(let i=0;i<s;i++){let[c,a]=n[i];o[c]=df(a,e)}return o}var md=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function df(t,e,r=new Set){let o=[],n=t.length;for(let s=0;s<n;s++){let i=t[s];if(rs.test(i.type))o.push(i);else{let a=kt(md,i.type);if(!a?.type)throw new ds({abiParameter:i});let{array:u,type:f}=a;if(f in e){if(r.has(f))throw new ys({type:f});o.push(C(x({},i),{type:`tuple${u??""}`,components:df(e[f]??[],e,new Set([...r,f]))}))}else if(aa(f))o.push(i);else throw new is({type:f})}}return o}function ws(t){let e;if(typeof t=="string")e=ia(t);else{let r=bs(t),o=t.length;for(let n=0;n<o;n++){let s=t[n];if(!Ur(s)){e=ia(s,r);break}}}if(!e)throw new ss({signature:t});return e}function Es(t){let e=[];if(typeof t=="string"){let r=Pt(t),o=r.length;for(let n=0;n<o;n++)e.push(Ot(r[n],{modifiers:sa}))}else{let r=bs(t),o=t.length;for(let n=0;n<o;n++){let s=t[n];if(Ur(s))continue;let i=Pt(s),c=i.length;for(let a=0;a<c;a++)e.push(Ot(i[a],{modifiers:sa,structs:r}))}}if(e.length===0)throw new cs({params:t});return e}var vs=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){let o=this.keys().next().value;o&&this.delete(o)}return this}};var pd={checksum:new vs(8192)},As=pd.checksum;function nr(t,e={}){let{as:r=typeof t=="string"?"Hex":"Bytes"}=e,o=wc(Cc(t));return r==="Bytes"?o:Et(o)}function hf(t,e={}){let{compressed:r}=e,{prefix:o,x:n,y:s}=t;if(r===!1||typeof n=="bigint"&&typeof s=="bigint"){if(o!==4)throw new Ts({prefix:o,cause:new ma});return}if(r===!0||typeof n=="bigint"&&typeof s>"u"){if(o!==3&&o!==2)throw new Ts({prefix:o,cause:new fa});return}throw new ua({publicKey:t})}function yf(t){let e=(()=>{if(ao(t))return xf(t);if(Uc(t))return hd(t);let{prefix:r,x:o,y:n}=t;return typeof o=="bigint"&&typeof n=="bigint"?{prefix:r??4,x:o,y:n}:{prefix:r,x:o}})();return hf(e),e}function hd(t){return xf(Et(t))}function xf(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new pa({publicKey:t});if(t.length===130){let o=BigInt(X(t,0,32)),n=BigInt(X(t,32,64));return{prefix:4,x:o,y:n}}if(t.length===132){let o=Number(X(t,0,1)),n=BigInt(X(t,1,33)),s=BigInt(X(t,33,65));return{prefix:o,x:n,y:s}}let e=Number(X(t,0,1)),r=BigInt(X(t,1,33));return{prefix:e,x:r}}function da(t,e={}){hf(t);let{prefix:r,x:o,y:n}=t,{includePrefix:s=!0}=e;return Q(s?nt(r,{size:1}):"0x",nt(o,{size:32}),typeof n=="bigint"?nt(n,{size:32}):"0x")}var ua=class extends j{constructor({publicKey:e}){super(`Value \`${vn(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},Ts=class extends j{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},fa=class extends j{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},ma=class extends j{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},pa=class extends j{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${mt(Er(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var yd=/^0x[a-fA-F0-9]{40}$/;function sr(t,e={}){let{strict:r=!0}=e;if(!yd.test(t))throw new Is({address:t,cause:new la});if(r){if(t.toLowerCase()===t)return;if(Bs(t)!==t)throw new Is({address:t,cause:new ha})}}function Bs(t){if(As.has(t))return As.get(t);sr(t,{strict:!1});let e=t.substring(2).toLowerCase(),r=nr(Rc(e),{as:"Bytes"}),o=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&o[s]&&(o[s]=o[s].toUpperCase()),(r[s>>1]&15)>=8&&o[s+1]&&(o[s+1]=o[s+1].toUpperCase());let n=`0x${o.join("")}`;return As.set(t,n),n}function xd(t,e={}){let{checksum:r=!1}=e;return sr(t),r?Bs(t):t}function bf(t,e={}){let r=nr(`0x${da(t).slice(4)}`).substring(26);return xd(`0x${r}`,e)}function Ps(t,e={}){let{strict:r=!0}=e??{};try{return sr(t,{strict:r}),!0}catch{return!1}}var Is=class extends j{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},la=class extends j{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},ha=class extends j{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};var wf=/^(.*)\[([0-9]*)\]$/,Ef=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Cs=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,hE=2n**(8n-1n)-1n,yE=2n**(16n-1n)-1n,xE=2n**(24n-1n)-1n,gE=2n**(32n-1n)-1n,bE=2n**(40n-1n)-1n,wE=2n**(48n-1n)-1n,EE=2n**(56n-1n)-1n,vE=2n**(64n-1n)-1n,AE=2n**(72n-1n)-1n,TE=2n**(80n-1n)-1n,IE=2n**(88n-1n)-1n,BE=2n**(96n-1n)-1n,PE=2n**(104n-1n)-1n,SE=2n**(112n-1n)-1n,CE=2n**(120n-1n)-1n,RE=2n**(128n-1n)-1n,kE=2n**(136n-1n)-1n,NE=2n**(144n-1n)-1n,HE=2n**(152n-1n)-1n,_E=2n**(160n-1n)-1n,qE=2n**(168n-1n)-1n,UE=2n**(176n-1n)-1n,FE=2n**(184n-1n)-1n,zE=2n**(192n-1n)-1n,LE=2n**(200n-1n)-1n,ME=2n**(208n-1n)-1n,OE=2n**(216n-1n)-1n,DE=2n**(224n-1n)-1n,$E=2n**(232n-1n)-1n,jE=2n**(240n-1n)-1n,GE=2n**(248n-1n)-1n,VE=2n**(256n-1n)-1n,WE=-(2n**(8n-1n)),ZE=-(2n**(16n-1n)),KE=-(2n**(24n-1n)),YE=-(2n**(32n-1n)),JE=-(2n**(40n-1n)),XE=-(2n**(48n-1n)),QE=-(2n**(56n-1n)),tv=-(2n**(64n-1n)),ev=-(2n**(72n-1n)),rv=-(2n**(80n-1n)),ov=-(2n**(88n-1n)),nv=-(2n**(96n-1n)),sv=-(2n**(104n-1n)),iv=-(2n**(112n-1n)),av=-(2n**(120n-1n)),cv=-(2n**(128n-1n)),uv=-(2n**(136n-1n)),fv=-(2n**(144n-1n)),mv=-(2n**(152n-1n)),pv=-(2n**(160n-1n)),dv=-(2n**(168n-1n)),lv=-(2n**(176n-1n)),hv=-(2n**(184n-1n)),yv=-(2n**(192n-1n)),xv=-(2n**(200n-1n)),gv=-(2n**(208n-1n)),bv=-(2n**(216n-1n)),wv=-(2n**(224n-1n)),Ev=-(2n**(232n-1n)),vv=-(2n**(240n-1n)),Av=-(2n**(248n-1n)),Tv=-(2n**(256n-1n)),Iv=2n**8n-1n,Bv=2n**16n-1n,Pv=2n**24n-1n,Sv=2n**32n-1n,Cv=2n**40n-1n,Rv=2n**48n-1n,kv=2n**56n-1n,Nv=2n**64n-1n,Hv=2n**72n-1n,_v=2n**80n-1n,qv=2n**88n-1n,Uv=2n**96n-1n,Fv=2n**104n-1n,zv=2n**112n-1n,Lv=2n**120n-1n,Mv=2n**128n-1n,Ov=2n**136n-1n,Dv=2n**144n-1n,$v=2n**152n-1n,jv=2n**160n-1n,Gv=2n**168n-1n,Vv=2n**176n-1n,Wv=2n**184n-1n,Zv=2n**192n-1n,Kv=2n**200n-1n,Yv=2n**208n-1n,Jv=2n**216n-1n,Xv=2n**224n-1n,Qv=2n**232n-1n,t5=2n**240n-1n,e5=2n**248n-1n,ya=2n**256n-1n;function ir(t,e,r){let{checksumAddress:o,staticPosition:n}=r,s=ba(e.type);if(s){let[i,c]=s;return bd(t,C(x({},e),{type:c}),{checksumAddress:o,length:i,staticPosition:n})}if(e.type==="tuple")return Ad(t,e,{checksumAddress:o,staticPosition:n});if(e.type==="address")return gd(t,{checksum:o});if(e.type==="bool")return wd(t);if(e.type.startsWith("bytes"))return Ed(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return vd(t,e);if(e.type==="string")return Td(t,{staticPosition:n});throw new Fr(e.type)}var Af=32,xa=32;function gd(t,e={}){let{checksum:r=!1}=e,o=t.readBytes(32);return[(s=>r?Bs(s):s)(Et(kc(o,-20))),32]}function bd(t,e,r){let{checksumAddress:o,length:n,staticPosition:s}=r;if(!n){let a=Vt(t.readBytes(xa)),u=s+a,f=u+Af;t.setPosition(u);let m=Vt(t.readBytes(Af)),p=No(e),d=0,h=[];for(let l=0;l<m;++l){t.setPosition(f+(p?l*32:d));let[b,y]=ir(t,e,{checksumAddress:o,staticPosition:f});d+=y,h.push(b)}return t.setPosition(s+32),[h,32]}if(No(e)){let a=Vt(t.readBytes(xa)),u=s+a,f=[];for(let m=0;m<n;++m){t.setPosition(u+m*32);let[p]=ir(t,e,{checksumAddress:o,staticPosition:u});f.push(p)}return t.setPosition(s+32),[f,32]}let i=0,c=[];for(let a=0;a<n;++a){let[u,f]=ir(t,e,{checksumAddress:o,staticPosition:s+i});i+=f,c.push(u)}return[c,i]}function wd(t){return[Hc(t.readBytes(32),{size:32}),32]}function Ed(t,e,{staticPosition:r}){let[o,n]=e.type.split("bytes");if(!n){let i=Vt(t.readBytes(32));t.setPosition(r+i);let c=Vt(t.readBytes(32));if(c===0)return t.setPosition(r+32),["0x",32];let a=t.readBytes(c);return t.setPosition(r+32),[Et(a),32]}return[Et(t.readBytes(Number.parseInt(n,10),32)),32]}function vd(t,e){let r=e.type.startsWith("int"),o=Number.parseInt(e.type.split("int")[1]||"256",10),n=t.readBytes(32);return[o>48?Nc(n,{signed:r}):Vt(n,{signed:r}),32]}function Ad(t,e,r){let{checksumAddress:o,staticPosition:n}=r,s=e.components.length===0||e.components.some(({name:a})=>!a),i=s?[]:{},c=0;if(No(e)){let a=Vt(t.readBytes(xa)),u=n+a;for(let f=0;f<e.components.length;++f){let m=e.components[f];t.setPosition(u+c);let[p,d]=ir(t,m,{checksumAddress:o,staticPosition:u});c+=d,i[s?f:m?.name]=p}return t.setPosition(n+32),[i,32]}for(let a=0;a<e.components.length;++a){let u=e.components[a],[f,m]=ir(t,u,{checksumAddress:o,staticPosition:n});i[s?a:u?.name]=f,c+=m}return[i,c]}function Td(t,{staticPosition:e}){let r=Vt(t.readBytes(32)),o=e+r;t.setPosition(o);let n=Vt(t.readBytes(32));if(n===0)return t.setPosition(e+32),["",32];let s=t.readBytes(n,32),i=_c(qc(s));return t.setPosition(e+32),[i,32]}function Tf({checksumAddress:t,parameters:e,values:r}){let o=[];for(let n=0;n<e.length;n++)o.push(ga({checksumAddress:t,parameter:e[n],value:r[n]}));return o}function ga({checksumAddress:t=!1,parameter:e,value:r}){let o=e,n=ba(o.type);if(n){let[s,i]=n;return Bd(r,{checksumAddress:t,length:s,parameter:C(x({},o),{type:i})})}if(o.type==="tuple")return kd(r,{checksumAddress:t,parameter:o});if(o.type==="address")return Id(r,{checksum:t});if(o.type==="bool")return Sd(r);if(o.type.startsWith("uint")||o.type.startsWith("int")){let s=o.type.startsWith("int"),[,,i="256"]=Cs.exec(o.type)??[];return Cd(r,{signed:s,size:Number(i)})}if(o.type.startsWith("bytes"))return Pd(r,{type:o.type});if(o.type==="string")return Rd(r);throw new Fr(o.type)}function Rs(t){let e=0;for(let s=0;s<t.length;s++){let{dynamic:i,encoded:c}=t[s];i?e+=32:e+=mt(c)}let r=[],o=[],n=0;for(let s=0;s<t.length;s++){let{dynamic:i,encoded:c}=t[s];i?(r.push(nt(e+n,{size:32})),o.push(c),n+=mt(c)):r.push(c)}return Q(...r,...o)}function Id(t,e){let{checksum:r=!1}=e;return sr(t,{strict:r}),{dynamic:!1,encoded:Ze(t.toLowerCase())}}function Bd(t,e){let{checksumAddress:r,length:o,parameter:n}=e,s=o===null;if(!Array.isArray(t))throw new Ns(t);if(!s&&t.length!==o)throw new ks({expectedLength:o,givenLength:t.length,type:`${n.type}[${o}]`});let i=!1,c=[];for(let a=0;a<t.length;a++){let u=ga({checksumAddress:r,parameter:n,value:t[a]});u.dynamic&&(i=!0),c.push(u)}if(s||i){let a=Rs(c);if(s){let u=nt(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?Q(u,a):u}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Q(...c.map(({encoded:a})=>a))}}function Pd(t,{type:e}){let[,r]=e.split("bytes"),o=mt(t);if(!r){let n=t;return o%32!==0&&(n=Ke(n,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Q(Ze(nt(o,{size:32})),n)}}if(o!==Number.parseInt(r,10))throw new Ho({expectedSize:Number.parseInt(r,10),value:t});return{dynamic:!1,encoded:Ke(t)}}function Sd(t){if(typeof t!="boolean")throw new j(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ze(An(t))}}function Cd(t,{signed:e,size:r}){if(typeof r=="number"){let o=2n**(BigInt(r)-(e?1n:0n))-1n,n=e?-o-1n:0n;if(t>o||t<n)throw new zc({max:o.toString(),min:n.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function Rd(t){let e=vr(t),r=Math.ceil(mt(e)/32),o=[];for(let n=0;n<r;n++)o.push(Ke(X(e,n*32,(n+1)*32)));return{dynamic:!0,encoded:Q(Ke(nt(mt(e),{size:32})),...o)}}function kd(t,e){let{checksumAddress:r,parameter:o}=e,n=!1,s=[];for(let i=0;i<o.components.length;i++){let c=o.components[i],a=Array.isArray(t)?i:c.name,u=ga({checksumAddress:r,parameter:c,value:t[a]});s.push(u),u.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Rs(s):Q(...s.map(({encoded:i})=>i))}}function ba(t){let e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function No(t){let{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(No);let r=ba(t.type);return!!(r&&No(C(x({},t),{type:r[1]})))}var Hd={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Ea({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new wa({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Hs({offset:t});let e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Hs({offset:t});let e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){let e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){let r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){let e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){let e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){let e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){let e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();let r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();let t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();let t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();let t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();let t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){let e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function _s(t,{recursiveReadLimit:e=8192}={}){let r=Object.create(Hd);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}var Hs=class extends j{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},wa=class extends j{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},Ea=class extends j{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function zr(t,e,r={}){let{as:o="Array",checksumAddress:n=!1}=r,s=typeof e=="string"?so(e):e,i=_s(s);if(io(s)===0&&t.length>0)throw new Ta;if(io(s)&&io(s)<32)throw new Aa({data:typeof e=="string"?e:Et(e),parameters:t,size:io(s)});let c=0,a=o==="Array"?[]:{};for(let u=0;u<t.length;++u){let f=t[u];i.setPosition(c);let[m,p]=ir(i,f,{checksumAddress:n,staticPosition:0});c+=p,o==="Array"?a.push(m):a[f.name??u]=m}return a}function Se(t,e,r){let{checksumAddress:o=!1}=r??{};if(t.length!==e.length)throw new qs({expectedLength:t.length,givenLength:e.length});let n=Tf({checksumAddress:o,parameters:t,values:e}),s=Rs(n);return s.length===0?"0x":s}function va(t,e){if(t.length!==e.length)throw new qs({expectedLength:t.length,givenLength:e.length});let r=[];for(let o=0;o<t.length;o++){let n=t[o],s=e[o];r.push(va.encode(n,s))}return Q(...r)}(function(t){function e(r,o,n=!1){if(r==="address"){let a=o;return sr(a),Ze(a.toLowerCase(),n?32:0)}if(r==="string")return vr(o);if(r==="bytes")return o;if(r==="bool")return Ze(An(o),n?32:1);let s=r.match(Cs);if(s){let[a,u,f="256"]=s,m=Number.parseInt(f,10)/8;return nt(o,{size:n?32:m,signed:u==="int"})}let i=r.match(Ef);if(i){let[a,u]=i;if(Number.parseInt(u,10)!==(o.length-2)/2)throw new Ho({expectedSize:Number.parseInt(u,10),value:o});return Ke(o,n?32:0)}let c=r.match(wf);if(c&&Array.isArray(o)){let[a,u]=c,f=[];for(let m=0;m<o.length;m++)f.push(e(u,o[m],!0));return f.length===0?"0x":Q(...f)}throw new Fr(r)}t.encode=e})(va||(va={}));function qo(t){return Array.isArray(t)&&typeof t[0]=="string"?Es(t):typeof t=="string"?Es(t):t}var Aa=class extends j{constructor({data:e,parameters:r,size:o}){super(`Data size of ${o} bytes is too small for given parameters.`,{metaMessages:[`Params: (${se(r)})`,`Data:   ${e} (${o} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}},Ta=class extends j{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}},ks=class extends j{constructor({expectedLength:e,givenLength:r,type:o}){super(`Array length mismatch for type \`${o}\`. Expected: \`${e}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},Ho=class extends j{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${mt(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},qs=class extends j{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},Ns=class extends j{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Fr=class extends j{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function _d(t,e){let{as:r}=e,o=Pf(t),n=_s(new Uint8Array(o.length));return o.encode(n),r==="Hex"?Et(n.bytes):n.bytes}function Bf(t,e={}){let{as:r="Hex"}=e;return _d(t,{as:r})}function Pf(t){return Array.isArray(t)?qd(t.map(e=>Pf(e))):Ud(t)}function qd(t){let e=t.reduce((n,s)=>n+s.length,0),r=Sf(e);return{length:e<=55?1+e:1+r+e,encode(n){e<=55?n.pushByte(192+e):(n.pushByte(247+r),r===1?n.pushUint8(e):r===2?n.pushUint16(e):r===3?n.pushUint24(e):n.pushUint32(e));for(let{encode:s}of t)s(n)}}}function Ud(t){let e=typeof t=="string"?so(t):t,r=Sf(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(n){e.length===1&&e[0]<128?n.pushBytes(e):e.length<=55?(n.pushByte(128+e.length),n.pushBytes(e)):(n.pushByte(183+r),r===1?n.pushUint8(e.length):r===2?n.pushUint16(e.length):r===3?n.pushUint24(e.length):n.pushUint32(e.length),n.pushBytes(e))}}}function Sf(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new j("Length is too large.")}var vt=BigInt(0),xt=BigInt(1),ar=BigInt(2),zd=BigInt(3),Rf=BigInt(4),kf=BigInt(5),Nf=BigInt(8);function yt(t,e){let r=t%e;return r>=vt?r:e+r}function Nt(t,e,r){let o=t;for(;e-- >vt;)o*=o,o%=r;return o}function Us(t,e){if(t===vt)throw new Error("invert: expected non-zero number");if(e<=vt)throw new Error("invert: expected positive modulus, got "+e);let r=yt(t,e),o=e,n=vt,s=xt,i=xt,c=vt;for(;r!==vt;){let u=o/r,f=o%r,m=n-i*u,p=s-c*u;o=r,r=f,n=i,s=c,i=m,c=p}if(o!==xt)throw new Error("invert: does not exist");return yt(n,e)}function Hf(t,e){let r=(t.ORDER+xt)/Rf,o=t.pow(e,r);if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function Ld(t,e){let r=(t.ORDER-kf)/Nf,o=t.mul(e,ar),n=t.pow(o,r),s=t.mul(e,n),i=t.mul(t.mul(s,ar),n),c=t.mul(s,t.sub(i,t.ONE));if(!t.eql(t.sqr(c),e))throw new Error("Cannot find square root");return c}function Md(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-xt,r=0;for(;e%ar===vt;)e/=ar,r++;let o=ar,n=Uo(t);for(;Cf(n,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Hf;let s=n.pow(o,e),i=(e+xt)/ar;return function(a,u){if(a.is0(u))return u;if(Cf(a,u)!==1)throw new Error("Cannot find square root");let f=r,m=a.mul(a.ONE,s),p=a.pow(u,e),d=a.pow(u,i);for(;!a.eql(p,a.ONE);){if(a.is0(p))return a.ZERO;let h=1,l=a.sqr(p);for(;!a.eql(l,a.ONE);)if(h++,l=a.sqr(l),h===f)throw new Error("Cannot find square root");let b=xt<<BigInt(f-h-1),y=a.pow(m,b);f=h,m=a.sqr(y),p=a.mul(p,m),d=a.mul(d,y)}return d}}function Od(t){return t%Rf===zd?Hf:t%Nf===kf?Ld:Md(t)}var Dd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ia(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Dd.reduce((o,n)=>(o[n]="function",o),e);return We(t,r)}function $d(t,e,r){if(r<vt)throw new Error("invalid exponent, negatives unsupported");if(r===vt)return t.ONE;if(r===xt)return e;let o=t.ONE,n=e;for(;r>vt;)r&xt&&(o=t.mul(o,n)),n=t.sqr(n),r>>=xt;return o}function Ba(t,e,r=!1){let o=new Array(e.length).fill(r?t.ZERO:void 0),n=e.reduce((i,c,a)=>t.is0(c)?i:(o[a]=i,t.mul(i,c)),t.ONE),s=t.inv(n);return e.reduceRight((i,c,a)=>t.is0(c)?i:(o[a]=t.mul(i,o[a]),t.mul(i,c)),s),o}function Cf(t,e){let r=(t.ORDER-xt)/ar,o=t.pow(e,r),n=t.eql(o,t.ONE),s=t.eql(o,t.ZERO),i=t.eql(o,t.neg(t.ONE));if(!n&&!s&&!i)throw new Error("invalid Legendre symbol result");return n?1:s?0:-1}function Pa(t,e){e!==void 0&&yc(e);let r=e!==void 0?e:t.toString(2).length,o=Math.ceil(r/8);return{nBitLength:r,nByteLength:o}}function Uo(t,e,r=!1,o={}){if(t<=vt)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:n,nByteLength:s}=Pa(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i,c=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:Ve(n),ZERO:vt,ONE:xt,create:a=>yt(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return vt<=a&&a<t},is0:a=>a===vt,isOdd:a=>(a&xt)===xt,neg:a=>yt(-a,t),eql:(a,u)=>a===u,sqr:a=>yt(a*a,t),add:(a,u)=>yt(a+u,t),sub:(a,u)=>yt(a-u,t),mul:(a,u)=>yt(a*u,t),pow:(a,u)=>$d(c,a,u),div:(a,u)=>yt(a*Us(u,t),t),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Us(a,t),sqrt:o.sqrt||(a=>(i||(i=Od(t)),i(c,a))),toBytes:a=>r?Bi(a,s):wr(a,s),fromBytes:a=>{if(a.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+a.length);return r?Ii(a):ee(a)},invertBatch:a=>Ba(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function _f(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Sa(t){let e=_f(t);return e+Math.ceil(e/2)}function qf(t,e,r=!1){let o=t.length,n=_f(e),s=Sa(e);if(o<16||o<s||o>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+o);let i=r?Ii(t):ee(t),c=yt(i,e-xt)+xt;return r?Bi(c,n):wr(c,n)}var Uf=BigInt(0),Ha=BigInt(1);function Ca(t,e){let r=e.negate();return t?r:e}function zf(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ra(t,e){zf(t,e);let r=Math.ceil(e/t)+1,o=2**(t-1),n=2**t,s=Ve(t),i=BigInt(t);return{windows:r,windowSize:o,mask:s,maxNumber:n,shiftBy:i}}function Ff(t,e,r){let{windowSize:o,mask:n,maxNumber:s,shiftBy:i}=r,c=Number(t&n),a=t>>i;c>o&&(c-=s,a+=Ha);let u=e*o,f=u+Math.abs(c)-1,m=c===0,p=c<0,d=e%2!==0;return{nextN:a,offset:f,isZero:m,isNeg:p,isNegF:d,offsetF:u}}function jd(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,o)=>{if(!(r instanceof e))throw new Error("invalid point at index "+o)})}function Gd(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,o)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+o)})}var ka=new WeakMap,Lf=new WeakMap;function Na(t){return Lf.get(t)||1}function Mf(t,e){return{constTimeNegate:Ca,hasPrecomputes(r){return Na(r)!==1},unsafeLadder(r,o,n=t.ZERO){let s=r;for(;o>Uf;)o&Ha&&(n=n.add(s)),s=s.double(),o>>=Ha;return n},precomputeWindow(r,o){let{windows:n,windowSize:s}=Ra(o,e),i=[],c=r,a=c;for(let u=0;u<n;u++){a=c,i.push(a);for(let f=1;f<s;f++)a=a.add(c),i.push(a);c=a.double()}return i},wNAF(r,o,n){let s=t.ZERO,i=t.BASE,c=Ra(r,e);for(let a=0;a<c.windows;a++){let{nextN:u,offset:f,isZero:m,isNeg:p,isNegF:d,offsetF:h}=Ff(n,a,c);n=u,m?i=i.add(Ca(d,o[h])):s=s.add(Ca(p,o[f]))}return{p:s,f:i}},wNAFUnsafe(r,o,n,s=t.ZERO){let i=Ra(r,e);for(let c=0;c<i.windows&&n!==Uf;c++){let{nextN:a,offset:u,isZero:f,isNeg:m}=Ff(n,c,i);if(n=a,!f){let p=o[u];s=s.add(m?p.negate():p)}}return s},getPrecomputes(r,o,n){let s=ka.get(o);return s||(s=this.precomputeWindow(o,r),r!==1&&ka.set(o,n(s))),s},wNAFCached(r,o,n){let s=Na(r);return this.wNAF(s,this.getPrecomputes(s,r,n),o)},wNAFCachedUnsafe(r,o,n,s){let i=Na(r);return i===1?this.unsafeLadder(r,o,s):this.wNAFUnsafe(i,this.getPrecomputes(i,r,n),o,s)},setWindowSize(r,o){zf(o,e),Lf.set(r,o),ka.delete(r)}}}function Of(t,e,r,o){jd(r,t),Gd(o,e);let n=r.length,s=o.length;if(n!==s)throw new Error("arrays of points and scalars must have equal length");let i=t.ZERO,c=Pc(BigInt(n)),a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);let u=Ve(a),f=new Array(Number(u)+1).fill(i),m=Math.floor((e.BITS-1)/a)*a,p=i;for(let d=m;d>=0;d-=a){f.fill(i);for(let l=0;l<s;l++){let b=o[l],y=Number(b>>BigInt(d)&u);f[y]=f[y].add(r[l])}let h=i;for(let l=f.length-1,b=i;l>0;l--)b=b.add(f[l]),h=h.add(b);if(p=p.add(h),d!==0)for(let l=0;l<a;l++)p=p.double()}return p}function _a(t){return Ia(t.Fp),We(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(C(x(x({},Pa(t.n,t.nBitLength)),t),{p:t.Fp.ORDER}))}function Df(t){t.lowS!==void 0&&br("lowS",t.lowS),t.prehash!==void 0&&br("prehash",t.prehash)}function Vd(t){let e=_a(t);We(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:r,Fp:o,a:n}=e;if(r){if(!o.eql(n,o.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze(x({},e))}var Fa=class extends Error{constructor(e=""){super(e)}},ie={Err:Fa,_tlv:{encode:(t,e)=>{let{Err:r}=ie;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");let o=e.length/2,n=no(o);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=o>127?no(n.length/2|128):"";return no(t)+s+n+e},decode(t,e){let{Err:r}=ie,o=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[o++]!==t)throw new r("tlv.decode: wrong tlv");let n=e[o++],s=!!(n&128),i=0;if(!s)i=n;else{let a=n&127;if(!a)throw new r("tlv.decode(long): indefinite length not supported");if(a>4)throw new r("tlv.decode(long): byte length is too big");let u=e.subarray(o,o+a);if(u.length!==a)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let f of u)i=i<<8|f;if(o+=a,i<128)throw new r("tlv.decode(long): not minimal encoding")}let c=e.subarray(o,o+i);if(c.length!==i)throw new r("tlv.decode: wrong value length");return{v:c,l:e.subarray(o+i)}}},_int:{encode(t){let{Err:e}=ie;if(t<ae)throw new e("integer: negative integers are not allowed");let r=no(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){let{Err:e}=ie;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ee(t)}},toSig(t){let{Err:e,_int:r,_tlv:o}=ie,n=Tt("signature",t),{v:s,l:i}=o.decode(48,n);if(i.length)throw new e("invalid signature: left bytes after parsing");let{v:c,l:a}=o.decode(2,s),{v:u,l:f}=o.decode(2,a);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(c),s:r.decode(u)}},hexFromSig(t){let{_tlv:e,_int:r}=ie,o=e.encode(2,r.encode(t.r)),n=e.encode(2,r.encode(t.s)),s=o+n;return e.encode(48,s)}};function qa(t,e){return wn(wr(t,e))}var ae=BigInt(0),at=BigInt(1),h5=BigInt(2),Ua=BigInt(3),Wd=BigInt(4);function Zd(t){let e=Vd(t),{Fp:r}=e,o=Uo(e.n,e.nBitLength),n=e.toBytes||((w,g,v)=>{let E=g.toAffine();return En(Uint8Array.from([4]),r.toBytes(E.x),r.toBytes(E.y))}),s=e.fromBytes||(w=>{let g=w.subarray(1),v=r.fromBytes(g.subarray(0,r.BYTES)),E=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:v,y:E}});function i(w){let{a:g,b:v}=e,E=r.sqr(w),T=r.mul(E,w);return r.add(r.add(T,r.mul(w,g)),v)}function c(w,g){let v=r.sqr(g),E=i(w);return r.eql(v,E)}if(!c(e.Gx,e.Gy))throw new Error("bad curve params: generator point");let a=r.mul(r.pow(e.a,Ua),Wd),u=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(a,u)))throw new Error("bad curve params: a or b");function f(w){return Pi(w,at,e.n)}function m(w){let{allowedPrivateKeyLengths:g,nByteLength:v,wrapPrivateKey:E,n:T}=e;if(g&&typeof w!="bigint"){if(Ai(w)&&(w=wn(w)),typeof w!="string"||!g.includes(w.length))throw new Error("invalid private key");w=w.padStart(v*2,"0")}let I;try{I=typeof w=="bigint"?w:ee(Tt("private key",w,v))}catch{throw new Error("invalid private key, expected hex or "+v+" bytes, got "+typeof w)}return E&&(I=yt(I,T)),Ge("private key",I,at,T),I}function p(w){if(!(w instanceof l))throw new Error("ProjectivePoint expected")}let d=Si((w,g)=>{let{px:v,py:E,pz:T}=w;if(r.eql(T,r.ONE))return{x:v,y:E};let I=w.is0();g==null&&(g=I?r.ONE:r.inv(T));let H=r.mul(v,g),N=r.mul(E,g),S=r.mul(T,g);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:H,y:N}}),h=Si(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}let{x:g,y:v}=w.toAffine();if(!r.isValid(g)||!r.isValid(v))throw new Error("bad point: x or y not FE");if(!c(g,v))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class l{constructor(g,v,E){if(g==null||!r.isValid(g))throw new Error("x required");if(v==null||!r.isValid(v)||r.is0(v))throw new Error("y required");if(E==null||!r.isValid(E))throw new Error("z required");this.px=g,this.py=v,this.pz=E,Object.freeze(this)}static fromAffine(g){let{x:v,y:E}=g||{};if(!g||!r.isValid(v)||!r.isValid(E))throw new Error("invalid affine point");if(g instanceof l)throw new Error("projective point not allowed");let T=I=>r.eql(I,r.ZERO);return T(v)&&T(E)?l.ZERO:new l(v,E,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){let v=Ba(r,g.map(E=>E.pz));return g.map((E,T)=>E.toAffine(v[T])).map(l.fromAffine)}static fromHex(g){let v=l.fromAffine(s(Tt("pointHex",g)));return v.assertValidity(),v}static fromPrivateKey(g){return l.BASE.multiply(m(g))}static msm(g,v){return Of(l,o,g,v)}_setWindowSize(g){A.setWindowSize(this,g)}assertValidity(){h(this)}hasEvenY(){let{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){p(g);let{px:v,py:E,pz:T}=this,{px:I,py:H,pz:N}=g,S=r.eql(r.mul(v,N),r.mul(I,T)),_=r.eql(r.mul(E,N),r.mul(H,T));return S&&_}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:g,b:v}=e,E=r.mul(v,Ua),{px:T,py:I,pz:H}=this,N=r.ZERO,S=r.ZERO,_=r.ZERO,U=r.mul(T,T),Z=r.mul(I,I),q=r.mul(H,H),R=r.mul(T,I);return R=r.add(R,R),_=r.mul(T,H),_=r.add(_,_),N=r.mul(g,_),S=r.mul(E,q),S=r.add(N,S),N=r.sub(Z,S),S=r.add(Z,S),S=r.mul(N,S),N=r.mul(R,N),_=r.mul(E,_),q=r.mul(g,q),R=r.sub(U,q),R=r.mul(g,R),R=r.add(R,_),_=r.add(U,U),U=r.add(_,U),U=r.add(U,q),U=r.mul(U,R),S=r.add(S,U),q=r.mul(I,H),q=r.add(q,q),U=r.mul(q,R),N=r.sub(N,U),_=r.mul(q,Z),_=r.add(_,_),_=r.add(_,_),new l(N,S,_)}add(g){p(g);let{px:v,py:E,pz:T}=this,{px:I,py:H,pz:N}=g,S=r.ZERO,_=r.ZERO,U=r.ZERO,Z=e.a,q=r.mul(e.b,Ua),R=r.mul(v,I),F=r.mul(E,H),$=r.mul(T,N),k=r.add(v,E),z=r.add(I,H);k=r.mul(k,z),z=r.add(R,F),k=r.sub(k,z),z=r.add(v,T);let W=r.add(I,N);return z=r.mul(z,W),W=r.add(R,$),z=r.sub(z,W),W=r.add(E,T),S=r.add(H,N),W=r.mul(W,S),S=r.add(F,$),W=r.sub(W,S),U=r.mul(Z,z),S=r.mul(q,$),U=r.add(S,U),S=r.sub(F,U),U=r.add(F,U),_=r.mul(S,U),F=r.add(R,R),F=r.add(F,R),$=r.mul(Z,$),z=r.mul(q,z),F=r.add(F,$),$=r.sub(R,$),$=r.mul(Z,$),z=r.add(z,$),R=r.mul(F,z),_=r.add(_,R),R=r.mul(W,z),S=r.mul(k,S),S=r.sub(S,R),R=r.mul(k,F),U=r.mul(W,U),U=r.add(U,R),new l(S,_,U)}subtract(g){return this.add(g.negate())}is0(){return this.equals(l.ZERO)}wNAF(g){return A.wNAFCached(this,g,l.normalizeZ)}multiplyUnsafe(g){let{endo:v,n:E}=e;Ge("scalar",g,ae,E);let T=l.ZERO;if(g===ae)return T;if(this.is0()||g===at)return this;if(!v||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,g,l.normalizeZ);let{k1neg:I,k1:H,k2neg:N,k2:S}=v.splitScalar(g),_=T,U=T,Z=this;for(;H>ae||S>ae;)H&at&&(_=_.add(Z)),S&at&&(U=U.add(Z)),Z=Z.double(),H>>=at,S>>=at;return I&&(_=_.negate()),N&&(U=U.negate()),U=new l(r.mul(U.px,v.beta),U.py,U.pz),_.add(U)}multiply(g){let{endo:v,n:E}=e;Ge("scalar",g,at,E);let T,I;if(v){let{k1neg:H,k1:N,k2neg:S,k2:_}=v.splitScalar(g),{p:U,f:Z}=this.wNAF(N),{p:q,f:R}=this.wNAF(_);U=A.constTimeNegate(H,U),q=A.constTimeNegate(S,q),q=new l(r.mul(q.px,v.beta),q.py,q.pz),T=U.add(q),I=Z.add(R)}else{let{p:H,f:N}=this.wNAF(g);T=H,I=N}return l.normalizeZ([T,I])[0]}multiplyAndAddUnsafe(g,v,E){let T=l.BASE,I=(N,S)=>S===ae||S===at||!N.equals(T)?N.multiplyUnsafe(S):N.multiply(S),H=I(this,v).add(I(g,E));return H.is0()?void 0:H}toAffine(g){return d(this,g)}isTorsionFree(){let{h:g,isTorsionFree:v}=e;if(g===at)return!0;if(v)return v(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:g,clearCofactor:v}=e;return g===at?this:v?v(l,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return br("isCompressed",g),this.assertValidity(),n(l,this,g)}toHex(g=!0){return br("isCompressed",g),wn(this.toRawBytes(g))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let{endo:b,nBitLength:y}=e,A=Mf(l,b?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:m,weierstrassEquation:i,isWithinCurveOrder:f}}function Kd(t){let e=_a(t);return We(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(x({lowS:!0},e))}function $f(t){let e=Kd(t),{Fp:r,n:o,nByteLength:n,nBitLength:s}=e,i=r.BYTES+1,c=2*r.BYTES+1;function a(q){return yt(q,o)}function u(q){return Us(q,o)}let{ProjectivePoint:f,normPrivateKeyToScalar:m,weierstrassEquation:p,isWithinCurveOrder:d}=Zd(C(x({},e),{toBytes(q,R,F){let $=R.toAffine(),k=r.toBytes($.x),z=En;return br("isCompressed",F),F?z(Uint8Array.from([R.hasEvenY()?2:3]),k):z(Uint8Array.from([4]),k,r.toBytes($.y))},fromBytes(q){let R=q.length,F=q[0],$=q.subarray(1);if(R===i&&(F===2||F===3)){let k=ee($);if(!Pi(k,at,r.ORDER))throw new Error("Point is not on curve");let z=p(k),W;try{W=r.sqrt(z)}catch(St){let ct=St instanceof Error?": "+St.message:"";throw new Error("Point is not on curve"+ct)}let rt=(W&at)===at;return(F&1)===1!==rt&&(W=r.neg(W)),{x:k,y:W}}else if(R===c&&F===4){let k=r.fromBytes($.subarray(0,r.BYTES)),z=r.fromBytes($.subarray(r.BYTES,2*r.BYTES));return{x:k,y:z}}else{let k=i,z=c;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+z+", got "+R)}}}));function h(q){let R=o>>at;return q>R}function l(q){return h(q)?a(-q):q}let b=(q,R,F)=>ee(q.slice(R,F));class y{constructor(R,F,$){Ge("r",R,at,o),Ge("s",F,at,o),this.r=R,this.s=F,$!=null&&(this.recovery=$),Object.freeze(this)}static fromCompact(R){let F=n;return R=Tt("compactSignature",R,F*2),new y(b(R,0,F),b(R,F,2*F))}static fromDER(R){let{r:F,s:$}=ie.toSig(Tt("DER",R));return new y(F,$)}assertValidity(){}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){let{r:F,s:$,recovery:k}=this,z=T(Tt("msgHash",R));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");let W=k===2||k===3?F+e.n:F;if(W>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let rt=(k&1)===0?"02":"03",Ft=f.fromHex(rt+qa(W,r.BYTES)),St=u(W),ct=a(-z*St),fe=a($*St),me=f.BASE.multiplyAndAddUnsafe(Ft,ct,fe);if(!me)throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ti(this.toDERHex())}toDERHex(){return ie.hexFromSig(this)}toCompactRawBytes(){return Ti(this.toCompactHex())}toCompactHex(){let R=n;return qa(this.r,R)+qa(this.s,R)}}let A={isValidPrivateKey(q){try{return m(q),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let q=Sa(e.n);return qf(e.randomBytes(q),e.n)},precompute(q=8,R=f.BASE){return R._setWindowSize(q),R.multiply(BigInt(3)),R}};function w(q,R=!0){return f.fromPrivateKey(q).toRawBytes(R)}function g(q){if(typeof q=="bigint")return!1;if(q instanceof f)return!0;let F=Tt("key",q).length,$=r.BYTES,k=$+1,z=2*$+1;if(!(e.allowedPrivateKeyLengths||n===k))return F===k||F===z}function v(q,R,F=!0){if(g(q)===!0)throw new Error("first arg must be private key");if(g(R)===!1)throw new Error("second arg must be public key");return f.fromHex(R).multiply(m(q)).toRawBytes(F)}let E=e.bits2int||function(q){if(q.length>8192)throw new Error("input is too large");let R=ee(q),F=q.length*8-s;return F>0?R>>BigInt(F):R},T=e.bits2int_modN||function(q){return a(E(q))},I=Ve(s);function H(q){return Ge("num < 2^"+s,q,ae,I),wr(q,n)}function N(q,R,F=S){if(["recovered","canonical"].some(ke=>ke in F))throw new Error("sign() legacy options not supported");let{hash:$,randomBytes:k}=e,{lowS:z,prehash:W,extraEntropy:rt}=F;z==null&&(z=!0),q=Tt("msgHash",q),Df(F),W&&(q=Tt("prehashed msgHash",$(q)));let Ft=T(q),St=m(R),ct=[H(St),H(Ft)];if(rt!=null&&rt!==!1){let ke=rt===!0?k(r.BYTES):rt;ct.push(Tt("extraEntropy",ke))}let fe=En(...ct),me=Ft;function Ys(ke){let fr=E(ke);if(!d(fr))return;let Js=u(fr),$r=f.BASE.multiply(fr).toAffine(),Ne=a($r.x);if(Ne===ae)return;let jr=a(Js*a(me+Ne*St));if(jr===ae)return;let mr=($r.x===Ne?0:2)|Number($r.y&at),lc=jr;return z&&h(jr)&&(lc=l(jr),mr^=1),new y(Ne,lc,mr)}return{seed:fe,k2sig:Ys}}let S={lowS:e.lowS,prehash:!1},_={lowS:e.lowS,prehash:!1};function U(q,R,F=S){let{seed:$,k2sig:k}=N(q,R,F),z=e;return Sc(z.hash.outputLen,z.nByteLength,z.hmac)($,k)}f.BASE._setWindowSize(8);function Z(q,R,F,$=_){let k=q;R=Tt("msgHash",R),F=Tt("publicKey",F);let{lowS:z,prehash:W,format:rt}=$;if(Df($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(rt!==void 0&&rt!=="compact"&&rt!=="der")throw new Error("format must be compact or der");let Ft=typeof k=="string"||Ai(k),St=!Ft&&!rt&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!Ft&&!St)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ct,fe;try{if(St&&(ct=new y(k.r,k.s)),Ft){try{rt!=="compact"&&(ct=y.fromDER(k))}catch(mr){if(!(mr instanceof ie.Err))throw mr}!ct&&rt!=="der"&&(ct=y.fromCompact(k))}fe=f.fromHex(F)}catch{return!1}if(!ct||z&&ct.hasHighS())return!1;W&&(R=e.hash(R));let{r:me,s:Ys}=ct,ke=T(R),fr=u(Ys),Js=a(ke*fr),$r=a(me*fr),Ne=f.BASE.multiplyAndAddUnsafe(fe,Js,$r)?.toAffine();return Ne?a(Ne.x)===me:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:v,sign:U,verify:Z,ProjectivePoint:f,Signature:y,utils:A}}function Yd(t){return{hash:t,hmac:(e,...r)=>Bc(t,e,xc(...r)),randomBytes:bc}}function jf(t,e){let r=o=>$f(x(x({},t),Yd(o)));return C(x({},r(e)),{create:r})}var Wf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Jd=BigInt(0),Xd=BigInt(1),za=BigInt(2),Vf=(t,e)=>(t+e/za)/e;function Qd(t){let e=Wf,r=BigInt(3),o=BigInt(6),n=BigInt(11),s=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=t*t*t%e,f=u*u*t%e,m=Nt(f,r,e)*f%e,p=Nt(m,r,e)*f%e,d=Nt(p,za,e)*u%e,h=Nt(d,n,e)*d%e,l=Nt(h,s,e)*h%e,b=Nt(l,c,e)*l%e,y=Nt(b,a,e)*b%e,A=Nt(y,c,e)*l%e,w=Nt(A,r,e)*f%e,g=Nt(w,i,e)*h%e,v=Nt(g,o,e)*u%e,E=Nt(v,za,e);if(!La.eql(La.sqr(E),t))throw new Error("Cannot find square root");return E}var La=Uo(Wf,void 0,void 0,{sqrt:Qd}),Zf=jf({a:Jd,b:BigInt(7),Fp:La,n:Gf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Gf,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-Xd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,i=BigInt("0x100000000000000000000000000000000"),c=Vf(s*t,e),a=Vf(-o*t,e),u=yt(t-c*r-a*n,e),f=yt(-c*o-a*s,e),m=u>i,p=f>i;if(m&&(u=e-u),p&&(f=e-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:m,k1:u,k2neg:p,k2:f}}}},Ic);function ja(t,e={}){let{recovered:r}=e;if(typeof t.r>"u")throw new Fo({signature:t});if(typeof t.s>"u")throw new Fo({signature:t});if(r&&typeof t.yParity>"u")throw new Fo({signature:t});if(t.r<0n||t.r>ya)throw new Oa({value:t.r});if(t.s<0n||t.s>ya)throw new Da({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new zo({value:t.yParity})}function tl(t){return Kf(Et(t))}function Kf(t){if(t.length!==130&&t.length!==132)throw new Ma({signature:t});let e=BigInt(X(t,0,32)),r=BigInt(X(t,32,64)),o=(()=>{let n=+`0x${t.slice(130)}`;if(!Number.isNaN(n))try{return Wa(n)}catch{throw new zo({value:n})}})();return typeof o>"u"?{r:e,s:r}:{r:e,s:r,yParity:o}}function Ga(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return Va(t)}function Va(t){let e=typeof t=="string"?Kf(t):t instanceof Uint8Array?tl(t):typeof t.r=="string"?rl(t):t.v?el(t):x({r:t.r,s:t.s},typeof t.yParity<"u"?{yParity:t.yParity}:{});return ja(e),e}function el(t){return{r:t.r,s:t.s,yParity:Wa(t.v)}}function rl(t){let e=(()=>{let r=t.v?Number(t.v):void 0,o=t.yParity?Number(t.yParity):void 0;if(typeof r=="number"&&typeof o!="number"&&(o=Wa(r)),typeof o!="number")throw new zo({value:t.yParity});return o})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function Yf(t){let{r:e,s:r,yParity:o}=t;return[o?"0x01":"0x",e===0n?"0x":Ci(nt(e)),r===0n?"0x":Ci(nt(r))]}function Wa(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new $a({value:t})}var Ma=class extends j{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${mt(Er(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},Fo=class extends j{constructor({signature:e}){super(`Signature \`${vn(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},Oa=class extends j{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},Da=class extends j{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},zo=class extends j{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},$a=class extends j{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function Xf(t,e={}){return typeof t.chainId=="string"?ol(t):x(x({},t),e.signature)}function ol(t){let{address:e,chainId:r,nonce:o}=t,n=Ga(t);return x({address:e,chainId:Number(r),nonce:BigInt(o)},n)}function Qf(t){return nl(t,{presign:!0})}function nl(t,e={}){let{presign:r}=e;return nr(Q("0x05",Bf(sl(r?{address:t.address,chainId:t.chainId,nonce:t.nonce}:t))))}function sl(t){let{address:e,chainId:r,nonce:o}=t,n=Ga(t);return[r?nt(r):"0x",e,o?nt(o):"0x",...n?Yf(n):[]]}function tm(t){return bf(al(t))}function al(t){let{payload:e,signature:r}=t,{r:o,s:n,yParity:s}=r,c=new Zf.Signature(BigInt(o),BigInt(n)).addRecoveryBit(s).recoverPublicKey(Er(e).substring(2));return yf(c)}var Za="0x8010801080108010801080108010801080108010801080108010801080108010",Ka=qo("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function zs(t){if(typeof t=="string"){if(X(t,-32)!==Za)throw new Fs(t)}else ja(t.authorization)}function ul(t){return typeof t=="string"?em(t):t}function em(t){zs(t);let e=Fc(X(t,-64,-32)),r=X(t,-e-64,-64),o=X(t,0,-e-64),[n,s,i]=zr(Ka,r),c=Xf({address:n.delegation,chainId:Number(n.chainId),nonce:n.nonce,yParity:n.yParity,r:n.r,s:n.s});return x({authorization:c,signature:o},i&&i!=="0x"?{data:i,to:s}:{})}function fl(t){let{data:e,signature:r}=t;zs(t);let o=tm({payload:Qf(t.authorization),signature:Va(t.authorization)}),n=Se(Ka,[C(x({},t.authorization),{delegation:t.authorization.address,chainId:BigInt(t.authorization.chainId)}),t.to??o,e??"0x"]),s=nt(mt(n),{size:32});return Q(r,n,s,Za)}function ml(t){try{return zs(t),!0}catch{return!1}}var Fs=class extends j{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Ya(t){return Dt.validate(t)}function pl(t){if(!ra(t))return{signature:t};let[e,r,o]=ye([{type:"address"},{type:"bytes"},{type:"bytes"}],t);return{address:e,data:r,signature:o}}function dl(t){if(!Ya(t))return{signature:t};let n=Dt.unwrap(t),{authorization:e,to:r}=n,o=O(n,["authorization","to"]);return x(x({authorization:{address:e.address,chainId:e.chainId,nonce:Number(e.nonce),r:P(e.r,{size:32}),s:P(e.s,{size:32}),yParity:e.yParity}},r?{address:r}:{}),o)}async function Ja({message:t,signature:e}){return Rt({hash:or(t),signature:e})}async function Xa(t){let{domain:e,message:r,primaryType:o,signature:n,types:s}=t;return Rt({hash:Co({domain:e,message:r,primaryType:o,types:s}),signature:n})}function ll(t){let{address:e,data:r,signature:o,to:n="hex"}=t,s=jt([he([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,r,o]),es]);return n==="hex"?s:ut(s)}function hl(t){let{address:e,data:r,signature:o,to:n="hex"}=t,s=Dt.wrap({authorization:{address:t.authorization.address,chainId:t.authorization.chainId,nonce:BigInt(t.authorization.nonce),r:BigInt(t.authorization.r),s:BigInt(t.authorization.s),yParity:t.authorization.yParity},data:r,signature:o,to:e});return n==="hex"?s:ut(s)}async function yl({address:t,hash:e,signature:r}){return ft(it(t),await Rt({hash:e,signature:r}))}async function xl({address:t,message:e,signature:r}){return ft(it(t),await Ja({message:e,signature:r}))}async function gl(t){let{address:e,domain:r,message:o,primaryType:n,signature:s,types:i}=t;return ft(it(e),await Xa({domain:r,message:o,primaryType:n,signature:s,types:i}))}function Qa(t){let e=le(t,0,1);if(e==="0x04")return"eip7702";if(e==="0x03")return"eip4844";if(e==="0x02")return"eip1559";if(e==="0x01")return"eip2930";if(e!=="0x"&&V(e)>=192)return"legacy";throw new fi({serializedType:e})}function tc(t){let e=Qa(t);return e==="eip1559"?El(t):e==="eip2930"?vl(t):e==="eip4844"?wl(t):e==="eip7702"?bl(t):Al(t)}function bl(t){let e=Ls(t),[r,o,n,s,i,c,a,u,f,m,p,d,h]=e;if(e.length!==10&&e.length!==13)throw new ze({attributes:x({chainId:r,nonce:o,maxPriorityFeePerGas:n,maxFeePerGas:s,gas:i,to:c,value:a,data:u,accessList:f,authorizationList:m},e.length>9?{v:p,r:d,s:h}:{}),serializedTransaction:t,type:"eip7702"});let l={chainId:V(r),type:"eip7702"};M(c)&&c!=="0x"&&(l.to=c),M(i)&&i!=="0x"&&(l.gas=D(i)),M(u)&&u!=="0x"&&(l.data=u),M(o)&&(l.nonce=o==="0x"?0:V(o)),M(a)&&a!=="0x"&&(l.value=D(a)),M(s)&&s!=="0x"&&(l.maxFeePerGas=D(s)),M(n)&&n!=="0x"&&(l.maxPriorityFeePerGas=D(n)),f.length!==0&&f!=="0x"&&(l.accessList=Ms(f)),m.length!==0&&m!=="0x"&&(l.authorizationList=Tl(m)),$c(l);let b=e.length===13?Lo(e):void 0;return x(x({},b),l)}function wl(t){let e=Ls(t),r=e.length===4,o=r?e[0]:e,n=r?e.slice(1):[],[s,i,c,a,u,f,m,p,d,h,l,b,y,A]=o,[w,g,v]=n;if(!(o.length===11||o.length===14))throw new ze({attributes:x({chainId:s,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:a,gas:u,to:f,value:m,data:p,accessList:d},o.length>9?{v:b,r:y,s:A}:{}),serializedTransaction:t,type:"eip4844"});let E={blobVersionedHashes:l,chainId:V(s),to:f,type:"eip4844"};M(u)&&u!=="0x"&&(E.gas=D(u)),M(p)&&p!=="0x"&&(E.data=p),M(i)&&(E.nonce=i==="0x"?0:V(i)),M(m)&&m!=="0x"&&(E.value=D(m)),M(h)&&h!=="0x"&&(E.maxFeePerBlobGas=D(h)),M(a)&&a!=="0x"&&(E.maxFeePerGas=D(a)),M(c)&&c!=="0x"&&(E.maxPriorityFeePerGas=D(c)),d.length!==0&&d!=="0x"&&(E.accessList=Ms(d)),w&&g&&v&&(E.sidecars=oo({blobs:w,commitments:g,proofs:v})),jc(E);let T=o.length===14?Lo(o):void 0;return x(x({},T),E)}function El(t){let e=Ls(t),[r,o,n,s,i,c,a,u,f,m,p,d]=e;if(!(e.length===9||e.length===12))throw new ze({attributes:x({chainId:r,nonce:o,maxPriorityFeePerGas:n,maxFeePerGas:s,gas:i,to:c,value:a,data:u,accessList:f},e.length>9?{v:m,r:p,s:d}:{}),serializedTransaction:t,type:"eip1559"});let h={chainId:V(r),type:"eip1559"};M(c)&&c!=="0x"&&(h.to=c),M(i)&&i!=="0x"&&(h.gas=D(i)),M(u)&&u!=="0x"&&(h.data=u),M(o)&&(h.nonce=o==="0x"?0:V(o)),M(a)&&a!=="0x"&&(h.value=D(a)),M(s)&&s!=="0x"&&(h.maxFeePerGas=D(s)),M(n)&&n!=="0x"&&(h.maxPriorityFeePerGas=D(n)),f.length!==0&&f!=="0x"&&(h.accessList=Ms(f)),_i(h);let l=e.length===12?Lo(e):void 0;return x(x({},l),h)}function vl(t){let e=Ls(t),[r,o,n,s,i,c,a,u,f,m,p]=e;if(!(e.length===8||e.length===11))throw new ze({attributes:x({chainId:r,nonce:o,gasPrice:n,gas:s,to:i,value:c,data:a,accessList:u},e.length>8?{v:f,r:m,s:p}:{}),serializedTransaction:t,type:"eip2930"});let d={chainId:V(r),type:"eip2930"};M(i)&&i!=="0x"&&(d.to=i),M(s)&&s!=="0x"&&(d.gas=D(s)),M(a)&&a!=="0x"&&(d.data=a),M(o)&&(d.nonce=o==="0x"?0:V(o)),M(c)&&c!=="0x"&&(d.value=D(c)),M(n)&&n!=="0x"&&(d.gasPrice=D(n)),u.length!==0&&u!=="0x"&&(d.accessList=Ms(u)),qi(d);let h=e.length===11?Lo(e):void 0;return x(x({},h),d)}function Al(t){let e=Jn(t,"hex"),[r,o,n,s,i,c,a,u,f]=e;if(!(e.length===6||e.length===9))throw new ze({attributes:x({nonce:r,gasPrice:o,gas:n,to:s,value:i,data:c},e.length>6?{v:a,r:u,s:f}:{}),serializedTransaction:t,type:"legacy"});let m={type:"legacy"};if(M(s)&&s!=="0x"&&(m.to=s),M(n)&&n!=="0x"&&(m.gas=D(n)),M(c)&&c!=="0x"&&(m.data=c),M(r)&&(m.nonce=r==="0x"?0:V(r)),M(i)&&i!=="0x"&&(m.value=D(i)),M(o)&&o!=="0x"&&(m.gasPrice=D(o)),Ui(m),e.length===6)return m;let p=M(a)&&a!=="0x"?D(a):0n;if(f==="0x"&&u==="0x")return p>0&&(m.chainId=Number(p)),m;let d=p,h=Number((d-35n)/2n);if(h>0)m.chainId=h;else if(d!==27n&&d!==28n)throw new ui({v:d});return m.v=d,m.s=f,m.r=u,m.yParity=d%2n===0n?1:0,m}function Ls(t){return Jn(`0x${t.slice(4)}`,"hex")}function Ms(t){let e=[];for(let r=0;r<t.length;r++){let[o,n]=t[r];if(!te(o,{strict:!1}))throw new Ue({address:o});e.push({address:o,storageKeys:n.map(s=>Ki(s)?s:qe(s))})}return e}function Tl(t){let e=[];for(let r=0;r<t.length;r++){let[o,n,s,i,c,a]=t[r];e.push(x({address:n,chainId:o==="0x"?0:V(o),nonce:s==="0x"?0:V(s)},Lo([i,c,a])))}return e}function Lo(t){let e=t.slice(-3),r=e[0]==="0x"||D(e[0])===0n?27n:28n;return{r:Zo(e[1],{size:32}),s:Zo(e[2],{size:32}),v:r,yParity:r===27n?0:1}}var Mo=class extends L{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function Oo(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Mo({value:t});let[r,o="0"]=t.split("."),n=r.startsWith("-");if(n&&(r=r.slice(1)),o=o.replace(/(0+)$/,""),e===0)Math.round(+`.${o}`)===1&&(r=`${BigInt(r)+1n}`),o="";else if(o.length>e){let[s,i,c]=[o.slice(0,e-1),o.slice(e-1,e),o.slice(e)],a=Math.round(+`${i}.${c}`);a>9?o=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):o=`${s}${a}`,o.length>e&&(o=o.slice(1),r=`${BigInt(r)+1n}`),o=o.slice(0,e)}else o=o.padEnd(e,"0");return BigInt(`${n?"-":""}${r}${o}`)}function Il(t,e="wei"){return Oo(t,ii[e])}function Bl(t,e="wei"){return Oo(t,ai[e])}function Cl(t){return t.map(e=>C(x({},e),{value:BigInt(e.value)}))}function rm(t){return C(x({},t),{balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?V(t.nonce):void 0,storageProof:t.storageProof?Cl(t.storageProof):void 0})}async function om(t,{address:e,blockNumber:r,blockTag:o,storageKeys:n}){let s=o??"latest",i=r!==void 0?P(r):void 0,c=await t.request({method:"eth_getProof",params:[e,n,i||s]});return rm(c)}async function nm(t,{address:e,blockNumber:r,blockTag:o="latest",slot:n}){let s=r!==void 0?P(r):void 0;return await t.request({method:"eth_getStorageAt",params:[e,n,s||o]})}async function Lr(t,{blockHash:e,blockNumber:r,blockTag:o,hash:n,index:s}){let i=o||"latest",c=r!==void 0?P(r):void 0,a=null;if(n?a=await t.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):e?a=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,P(s)]},{dedupe:!0}):(c||i)&&(a=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||i,P(s)]},{dedupe:!!c})),!a)throw new Jr({blockHash:e,blockNumber:r,blockTag:i,hash:n,index:s});return(t.chain?.formatters?.transaction?.format||xi)(a,"getTransaction")}async function sm(t,{hash:e,transactionReceipt:r}){let[o,n]=await Promise.all([B(t,Kt,"getBlockNumber")({}),e?B(t,Lr,"getTransaction")({hash:e}):void 0]),s=r?.blockNumber||n?.blockNumber;return s?o-s+1n:0n}async function Mr(t,{hash:e}){let r=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!r)throw new Xr({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||mo)(r,"getTransactionReceipt")}async function im(t,e){let{account:r,authorizationList:o,allowFailure:n=!0,blockNumber:s,blockOverrides:i,blockTag:c,stateOverride:a}=e,u=e.contracts,{batchSize:f=e.batchSize??1024,deployless:m=e.deployless??!1}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},p=(()=>{if(e.multicallAddress)return e.multicallAddress;if(m)return null;if(t.chain)return Lt({blockNumber:s,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),d=[[]],h=0,l=0;for(let A=0;A<u.length;A++){let{abi:w,address:g,args:v,functionName:E}=u[A];try{let T=J({abi:w,args:v,functionName:E});l+=(T.length-2)/2,f>0&&l>f&&d[h].length>0&&(h++,l=(T.length-2)/2,d[h]=[]),d[h]=[...d[h],{allowFailure:!0,callData:T,target:g}]}catch(T){let I=It(T,{abi:w,address:g,args:v,docsPath:"/docs/contract/multicall",functionName:E,sender:r});if(!n)throw I;d[h]=[...d[h],{allowFailure:!0,callData:"0x",target:g}]}}let b=await Promise.allSettled(d.map(A=>B(t,tt,"readContract")(C(x({},p===null?{code:Bn}:{address:p}),{abi:co,account:r,args:[A],authorizationList:o,blockNumber:s,blockOverrides:i,blockTag:c,functionName:"aggregate3",stateOverride:a})))),y=[];for(let A=0;A<b.length;A++){let w=b[A];if(w.status==="rejected"){if(!n)throw w.reason;for(let v=0;v<d[A].length;v++)y.push({status:"failure",error:w.reason,result:void 0});continue}let g=w.value;for(let v=0;v<g.length;v++){let{returnData:E,success:T}=g[v],{callData:I}=d[A][v],{abi:H,address:N,functionName:S,args:_}=u[y.length];try{if(I==="0x")throw new He;if(!T)throw new Le({data:E});let U=Ct({abi:H,args:_,data:E,functionName:S});y.push(n?{result:U,status:"success"}:U)}catch(U){let Z=It(U,{abi:H,address:N,args:_,docsPath:"/docs/contract/multicall",functionName:S});if(!n)throw Z;y.push({error:Z,result:void 0,status:"failure"})}}}if(y.length!==u.length)throw new L("multicall results mismatch");return y}async function Do(t,e){let{blockNumber:r,blockTag:o=t.experimental_blockTag??"latest",blocks:n,returnFullTransactions:s,traceTransfers:i,validation:c}=e;try{let a=[];for(let p of n){let d=p.blockOverrides?Lc(p.blockOverrides):void 0,h=p.calls.map(b=>{let y=b,A=y.account?G(y.account):void 0,w=y.abi?J(y):y.data,g=C(x({},y),{data:y.dataSuffix?At([w||"0x",y.dataSuffix]):w,from:y.from??A?.address});return bt(g),gt(g)}),l=p.stateOverrides?bn(p.stateOverrides):void 0;a.push({blockOverrides:d,calls:h,stateOverrides:l})}let f=(typeof r=="bigint"?P(r):void 0)||o;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:s,traceTransfers:i,validation:c},f]})).map((p,d)=>C(x({},ro(p)),{calls:p.calls.map((h,l)=>{let{abi:b,args:y,functionName:A,to:w}=n[d].calls[l],g=h.error?.data??h.returnData,v=BigInt(h.gasUsed),E=h.logs?.map(N=>wt(N)),T=h.status==="0x1"?"success":"failure",I=b&&T==="success"&&g!=="0x"?Ct({abi:b,data:g,functionName:A}):null,H=(()=>{if(T==="success")return;let N;if(h.error?.data==="0x"?N=new He:h.error&&(N=new Le(h.error)),!!N)return It(N,{abi:b??[],address:w??"0x",args:y,functionName:A??"<unknown>"})})();return x({data:g,gasUsed:v,logs:E,status:T},T==="success"?{result:I}:{error:H})})}))}catch(a){let u=a,f=gr(u,{});throw f instanceof je?u:f}}function Ds(t){let e=!0,r="",o=0,n="",s=!1;for(let i=0;i<t.length;i++){let c=t[i];if(["(",")",","].includes(c)&&(e=!0),c==="("&&o++,c===")"&&o--,!!e){if(o===0){if(c===" "&&["event","function","error",""].includes(n))n="";else if(n+=c,c===")"){s=!0;break}continue}if(c===" "){t[i-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}n+=c,r+=c}}if(!s)throw new j("Unable to normalize signature.");return n}function Os(t,e){let r=typeof t,o=e.type;switch(o){case"address":return Ps(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return o==="tuple"&&"components"in e?Object.values(e.components).every((n,s)=>Os(Object.values(t)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(o)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(o)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(o)?Array.isArray(t)&&t.every(n=>Os(n,C(x({},e),{type:o.replace(/(\[[0-9]{0,}\])$/,"")}))):!1}}function ec(t,e,r){for(let o in t){let n=t[o],s=e[o];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return ec(n.components,s.components,r[o]);let i=[n.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Ps(r[o],{strict:!1}):i.includes("address")&&i.includes("bytes")?Ps(r[o],{strict:!1}):!1)return i}}function $s(t,e={}){let{prepare:r=!0}=e,o=Array.isArray(t)?ws(t):typeof t=="string"?ws(t):t;return x(x({},o),r?{hash:Or(o)}:{})}function $o(t,e,r){let{args:o=[],prepare:n=!0}=r??{},s=ao(e,{strict:!1}),i=t.filter(u=>s?u.type==="function"||u.type==="error"?oc(u)===X(e,0,4):u.type==="event"?Or(u)===e:!1:"name"in u&&u.name===e);if(i.length===0)throw new Ce({name:e});if(i.length===1)return x(x({},i[0]),n?{hash:Or(i[0])}:{});let c;for(let u of i){if(!("inputs"in u))continue;if(!o||o.length===0){if(!u.inputs||u.inputs.length===0)return x(x({},u),n?{hash:Or(u)}:{});continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==o.length)continue;if(o.every((m,p)=>{let d="inputs"in u&&u.inputs[p];return d?Os(m,d):!1})){if(c&&"inputs"in c&&c.inputs){let m=ec(u.inputs,c.inputs,o);if(m)throw new rc({abiItem:u,type:m[0]},{abiItem:c,type:m[1]})}c=u}}let a=(()=>{if(c)return c;let[u,...f]=i;return C(x({},u),{overloads:f})})();if(!a)throw new Ce({name:e});return x(x({},a),n?{hash:Or(a)}:{})}function oc(...t){let e=(()=>{if(Array.isArray(t[0])){let[r,o]=t;return $o(r,o)}return t[0]})();return X(Or(e),0,4)}function kl(...t){let e=(()=>{if(Array.isArray(t[0])){let[o,n]=t;return $o(o,n)}return t[0]})(),r=typeof e=="string"?e:Ro(e);return Ds(r)}function Or(...t){let e=(()=>{if(Array.isArray(t[0])){let[r,o]=t;return $o(r,o)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:nr(vr(kl(e)))}var rc=class extends j{constructor(e,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Ds(Ro(e.abiItem))}\`, and`,`\`${r.type}\` in \`${Ds(Ro(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},Ce=class extends j{constructor({name:e,data:r,type:o="item"}){let n=e?` with name "${e}"`:r?` with data "${r}"`:"";super(`ABI ${o}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};function cm(...t){let[e,r]=(()=>{if(Array.isArray(t[0])){let[s,i]=t;return[Nl(s),i]}return t})(),{bytecode:o,args:n}=r;return Q(o,e.inputs?.length&&n?.length?Se(e.inputs,n):"0x")}function um(t){return $s(t)}function Nl(t){let e=t.find(r=>r.type==="constructor");if(!e)throw new Ce({name:"constructor"});return e}function mm(...t){let[e,r=[]]=(()=>{if(Array.isArray(t[0])){let[u,f,m]=t;return[fm(u,f,{args:m}),m]}let[c,a]=t;return[c,a]})(),{overloads:o}=e,n=o?fm([e,...o],e.name,{args:r}):e,s=_l(n),i=r.length>0?Se(n.inputs,r):void 0;return i?Q(s,i):s}function cr(t,e={}){return $s(t,e)}function fm(t,e,r){let o=$o(t,e,r);if(o.type!=="function")throw new Ce({name:e,type:"function"});return o}function _l(t){return oc(t)}var nc="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Ut="0x0000000000000000000000000000000000000000";var Ul="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function pm(t,e){let{blockNumber:r,blockTag:o,calls:n,stateOverrides:s,traceAssetChanges:i,traceTransfers:c,validation:a}=e,u=e.account?G(e.account):void 0;if(i&&!u)throw new L("`account` is required when `traceAssetChanges` is true");let f=u?cm(um("constructor(bytes, bytes)"),{bytecode:Hi,args:[Ul,mm(cr("function getBalance(address)"),[u.address])]}):void 0,m=i?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;let{accessList:z}=await Gn(t,C(x({account:u.address},k),{data:k.abi?J(k):k.data}));return z.map(({address:W,storageKeys:rt})=>rt.length>0?W:null)})).then(k=>k.flat().filter(Boolean)):[],p=await Do(t,{blockNumber:r,blockTag:o,blocks:[...i?[{calls:[{data:f}],stateOverrides:s},{calls:m.map((k,z)=>({abi:[cr("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:Ut,nonce:z})),stateOverrides:[{address:Ut,nonce:0}]}]:[],{calls:[...n,{}].map(k=>C(x({},k),{from:u?.address})),stateOverrides:s},...i?[{calls:[{data:f}]},{calls:m.map((k,z)=>({abi:[cr("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:k,from:Ut,nonce:z})),stateOverrides:[{address:Ut,nonce:0}]},{calls:m.map((k,z)=>({to:k,abi:[cr("function decimals() returns (uint256)")],functionName:"decimals",from:Ut,nonce:z})),stateOverrides:[{address:Ut,nonce:0}]},{calls:m.map((k,z)=>({to:k,abi:[cr("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Ut,nonce:z})),stateOverrides:[{address:Ut,nonce:0}]},{calls:m.map((k,z)=>({to:k,abi:[cr("function symbol() returns (string)")],functionName:"symbol",from:Ut,nonce:z})),stateOverrides:[{address:Ut,nonce:0}]}]:[]],traceTransfers:c,validation:a}),d=i?p[2]:p[0],[h,l,,b,y,A,w,g]=i?p:[],$=d,{calls:v}=$,E=O($,["calls"]),T=v.slice(0,-1)??[],I=h?.calls??[],H=l?.calls??[],N=[...I,...H].map(k=>k.status==="success"?D(k.data):null),S=b?.calls??[],_=y?.calls??[],U=[...S,..._].map(k=>k.status==="success"?D(k.data):null),Z=(A?.calls??[]).map(k=>k.status==="success"?k.result:null),q=(g?.calls??[]).map(k=>k.status==="success"?k.result:null),R=(w?.calls??[]).map(k=>k.status==="success"?k.result:null),F=[];for(let[k,z]of U.entries()){let W=N[k];if(typeof z!="bigint"||typeof W!="bigint")continue;let rt=Z[k-1],Ft=q[k-1],St=R[k-1],ct=k===0?{address:nc,decimals:18,symbol:"ETH"}:{address:m[k-1],decimals:St||rt?Number(rt??1):void 0,symbol:Ft??void 0};F.some(fe=>fe.token.address===ct.address)||F.push({token:ct,value:{pre:W,post:z,diff:z-W}})}return{assetChanges:F,block:E,results:T}}var jo={};hc(jo,{InvalidWrappedSignatureError:()=>js,assert:()=>ic,from:()=>Ll,magicBytes:()=>sc,universalSignatureValidatorAbi:()=>zl,universalSignatureValidatorBytecode:()=>Fl,unwrap:()=>dm,validate:()=>Ol,wrap:()=>Ml});var sc="0x6492649264926492649264926492649264926492649264926492649264926492",Fl="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",zl=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function ic(t){if(X(t,-32)!==sc)throw new js(t)}function Ll(t){return typeof t=="string"?dm(t):t}function dm(t){ic(t);let[e,r,o]=zr(qo("address, bytes, bytes"),t);return{data:r,signature:o,to:e}}function Ml(t){let{data:e,signature:r,to:o}=t;return Q(Se(qo("address, bytes, bytes"),[o,e,r]),sc)}function Ol(t){try{return ic(t),!0}catch{return!1}}var js=class extends j{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}};function Gs({r:t,s:e,to:r="hex",v:o,yParity:n}){let s=(()=>{if(n===0||n===1)return n;if(o&&(o===27n||o===28n||o>=35n))return o%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new be.Signature(D(t),D(e)).toCompactHex()}${s===0?"1b":"1c"}`;return r==="hex"?i:ut(i)}async function Re(t,e){let{address:r,hash:o,erc6492VerifierAddress:n=e.universalSignatureVerifierAddress??t.chain?.contracts?.erc6492Verifier?.address,multicallAddress:s=e.multicallAddress??t.chain?.contracts?.multicall3?.address}=e,i=(()=>{let c=e.signature;return M(c)?c:typeof c=="object"&&"r"in c&&"s"in c?Gs(c):ot(c)})();try{return Dt.validate(i)?await Dl(t,C(x({},e),{multicallAddress:s,signature:i})):await $l(t,C(x({},e),{verifierAddress:n,signature:i}))}catch(c){try{if(ft(it(r),await Rt({hash:o,signature:i})))return!0}catch{}if(c instanceof ce)return!1;throw c}}async function Dl(t,e){let{address:r,blockNumber:o,blockTag:n,hash:s,multicallAddress:i}=e,{authorization:c,data:a,signature:u,to:f}=Dt.unwrap(e.signature);if(await Eo(t,{address:r,blockNumber:o,blockTag:n})===jt(["0xef0100",c.address]))return await jl(t,{address:r,blockNumber:o,blockTag:n,hash:s,signature:u});let p={address:c.address,chainId:Number(c.chainId),nonce:Number(c.nonce),r:P(c.r,{size:32}),s:P(c.s,{size:32}),yParity:c.yParity};if(!await Tu({address:r,authorization:p}))throw new ce;let h=await B(t,tt,"readContract")(C(x({},i?{address:i}:{code:Bn}),{authorizationList:[p],abi:co,blockNumber:o,blockTag:"pending",functionName:"aggregate3",args:[[...a?[{allowFailure:!0,target:f??r,callData:a}]:[],{allowFailure:!0,target:r,callData:J({abi:Ni,functionName:"isValidSignature",args:[s,u]})}]]}));if(h[h.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new ce}async function $l(t,e){let p=e,{address:r,factory:o,factoryData:n,hash:s,signature:i,verifierAddress:c}=p,a=O(p,["address","factory","factoryData","hash","signature","verifierAddress"]),u=await(async()=>!o&&!n||jo.validate(i)?i:jo.wrap({data:n,signature:i,to:o}))(),f=x(c?{to:c,data:J({abi:uo,functionName:"isValidSig",args:[r,s,u]})}:{data:fo({abi:uo,args:[r,s,u],bytecode:In})},a),{data:m}=await B(t,we,"call")(f).catch(d=>{throw d instanceof di?new ce:d});if(Ko(m??"0x0"))return!0;throw new ce}async function jl(t,e){let{address:r,blockNumber:o,blockTag:n,hash:s,signature:i}=e;if((await B(t,tt,"readContract")({address:r,abi:Ni,args:[s,i],blockNumber:o,blockTag:n,functionName:"isValidSignature"}).catch(a=>{throw a instanceof Qr?new ce:a})).startsWith("0x1626ba7e"))return!0;throw new ce}var ce=class extends Error{};async function lm(t,c){var a=c,{address:e,message:r,factory:o,factoryData:n,signature:s}=a,i=O(a,["address","message","factory","factoryData","signature"]);let u=or(r);return Re(t,x({address:e,factory:o,factoryData:n,hash:u,signature:s},i))}async function hm(t,e){let p=e,{address:r,factory:o,factoryData:n,signature:s,message:i,primaryType:c,types:a,domain:u}=p,f=O(p,["address","factory","factoryData","signature","message","primaryType","types","domain"]),m=Co({message:i,primaryType:c,types:a,domain:u});return Re(t,x({address:r,factory:o,factoryData:n,hash:m,signature:s},f))}function Vs(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:o,onError:n,poll:s,pollingInterval:i=t.pollingInterval}){let c=typeof s<"u"?s:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),a;return c?(()=>{let m=Y(["watchBlockNumber",t.uid,e,r,i]);return ht(m,{onBlockNumber:o,onError:n},p=>_t(async()=>{try{let d=await B(t,Kt,"getBlockNumber")({cacheTime:0});if(a!==void 0){if(d===a)return;if(d-a>1&&r)for(let h=a+1n;h<d;h++)p.onBlockNumber(h,a),a=h}(a===void 0||d>a)&&(p.onBlockNumber(d,a),a=d)}catch(d){p.onError?.(d)}},{emitOnBegin:e,interval:i}))})():(()=>{let m=Y(["watchBlockNumber",t.uid,e,r]);return ht(m,{onBlockNumber:o,onError:n},p=>{let d=!0,h=()=>d=!1;return(async()=>{try{let l=(()=>{if(t.transport.type==="fallback"){let y=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:b}=await l.subscribe({params:["newHeads"],onData(y){if(!d)return;let A=D(y.result?.number);p.onBlockNumber(A,a),a=A},onError(y){p.onError?.(y)}});h=b,d||h()}catch(l){n?.(l)}})(),()=>h()})})()}async function Ws(t,e){let{checkReplacement:r=!0,confirmations:o=1,hash:n,onReplaced:s,retryCount:i=6,retryDelay:c=({count:v})=>~~(1<<v)*200,timeout:a=18e4}=e,u=Y(["waitForTransactionReceipt",t.uid,n]),f=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval,m,p,d,h=!1,l,b,{promise:y,resolve:A,reject:w}=Pn(),g=a?setTimeout(()=>{b?.(),l?.(),w(new pi({hash:n}))},a):void 0;return l=ht(u,{onReplaced:s,resolve:A,reject:w},async v=>{if(d=await B(t,Mr,"getTransactionReceipt")({hash:n}).catch(()=>{}),d&&o<=1){clearTimeout(g),v.resolve(d),l?.();return}b=B(t,Vs,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(E){let T=H=>{clearTimeout(g),b?.(),H(),l?.()},I=E;if(!h)try{if(d){if(o>1&&(!d.blockNumber||I-d.blockNumber+1n<o))return;T(()=>v.resolve(d));return}if(r&&!m&&(h=!0,await Pe(async()=>{m=await B(t,Lr,"getTransaction")({hash:n}),m.blockNumber&&(I=m.blockNumber)},{delay:c,retryCount:i}),h=!1),d=await B(t,Mr,"getTransactionReceipt")({hash:n}),o>1&&(!d.blockNumber||I-d.blockNumber+1n<o))return;T(()=>v.resolve(d))}catch(H){if(H instanceof Jr||H instanceof Xr){if(!m){h=!1;return}try{p=m,h=!0;let N=await Pe(()=>B(t,lt,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:c,retryCount:i,shouldRetry:({error:U})=>U instanceof Je});h=!1;let S=N.transactions.find(({from:U,nonce:Z})=>U===p.from&&Z===p.nonce);if(!S||(d=await B(t,Mr,"getTransactionReceipt")({hash:S.hash}),o>1&&(!d.blockNumber||I-d.blockNumber+1n<o)))return;let _="replaced";S.to===p.to&&S.value===p.value&&S.input===p.input?_="repriced":S.from===S.to&&S.value===0n&&(_="cancelled"),T(()=>{v.onReplaced?.({reason:_,replacedTransaction:p,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){T(()=>v.reject(N))}}else T(()=>v.reject(H))}}})}),y}function ym(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:r=!1,emitOnBegin:o=!1,onBlock:n,onError:s,includeTransactions:i,poll:c,pollingInterval:a=t.pollingInterval}){let u=typeof c<"u"?c:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=i??!1,m;return u?(()=>{let h=Y(["watchBlocks",t.uid,e,r,o,f,a]);return ht(h,{onBlock:n,onError:s},l=>_t(async()=>{try{let b=await B(t,lt,"getBlock")({blockTag:e,includeTransactions:f});if(b.number!==null&&m?.number!=null){if(b.number===m.number)return;if(b.number-m.number>1&&r)for(let y=m?.number+1n;y<b.number;y++){let A=await B(t,lt,"getBlock")({blockNumber:y,includeTransactions:f});l.onBlock(A,m),m=A}}(m?.number==null||e==="pending"&&b?.number==null||b.number!==null&&b.number>m.number)&&(l.onBlock(b,m),m=b)}catch(b){l.onError?.(b)}},{emitOnBegin:o,interval:a}))})():(()=>{let h=!0,l=!0,b=()=>h=!1;return(async()=>{try{o&&B(t,lt,"getBlock")({blockTag:e,includeTransactions:f}).then(w=>{h&&l&&(n(w,void 0),l=!1)}).catch(s);let y=(()=>{if(t.transport.type==="fallback"){let w=t.transport.transports.find(g=>g.config.type==="webSocket"||g.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:A}=await y.subscribe({params:["newHeads"],async onData(w){if(!h)return;let g=await B(t,lt,"getBlock")({blockNumber:w.result?.number,includeTransactions:f}).catch(()=>{});h&&(n(g,m),l=!1,m=g)},onError(w){s?.(w)}});b=A,h||b()}catch(y){s?.(y)}})(),()=>b()})()}function xm(t,{address:e,args:r,batch:o=!0,event:n,events:s,fromBlock:i,onError:c,onLogs:a,poll:u,pollingInterval:f=t.pollingInterval,strict:m}){let p=typeof u<"u"?u:typeof i=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),d=m??!1;return p?(()=>{let b=Y(["watchEvent",e,r,o,t.uid,n,f,i]);return ht(b,{onLogs:a,onError:c},y=>{let A;i!==void 0&&(A=i-1n);let w,g=!1,v=_t(async()=>{if(!g){try{w=await B(t,Vn,"createEventFilter")({address:e,args:r,event:n,events:s,strict:d,fromBlock:i})}catch{}g=!0;return}try{let E;if(w)E=await B(t,Te,"getFilterChanges")({filter:w});else{let T=await B(t,Kt,"getBlockNumber")({});A&&A!==T?E=await B(t,Pr,"getLogs")({address:e,args:r,event:n,events:s,fromBlock:A+1n,toBlock:T}):E=[],A=T}if(E.length===0)return;if(o)y.onLogs(E);else for(let T of E)y.onLogs([T])}catch(E){w&&E instanceof ge&&(g=!1),y.onError?.(E)}},{emitOnBegin:!0,interval:f});return async()=>{w&&await B(t,Ie,"uninstallFilter")({filter:w}),v()}})})():(()=>{let b=!0,y=()=>b=!1;return(async()=>{try{let A=(()=>{if(t.transport.type==="fallback"){let E=t.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),w=s??(n?[n]:void 0),g=[];w&&(g=[w.flatMap(T=>Mt({abi:[T],eventName:T.name,args:r}))],n&&(g=g[0]));let{unsubscribe:v}=await A.subscribe({params:["logs",{address:e,topics:g}],onData(E){if(!b)return;let T=E.result;try{let{eventName:I,args:H}=Xe({abi:w??[],data:T.data,topics:T.topics,strict:d}),N=wt(T,{args:H,eventName:I});a([N])}catch(I){let H,N;if(I instanceof $t||I instanceof Xt){if(m)return;H=I.abiItem.name,N=I.abiItem.inputs?.some(_=>!("name"in _&&_.name))}let S=wt(T,{args:N?[]:{},eventName:H});a([S])}},onError(E){c?.(E)}});y=v,b||y()}catch(A){c?.(A)}})(),()=>y()})()}function gm(t,{batch:e=!0,onError:r,onTransactions:o,poll:n,pollingInterval:s=t.pollingInterval}){return(typeof n<"u"?n:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{let u=Y(["watchPendingTransactions",t.uid,e,s]);return ht(u,{onTransactions:o,onError:r},f=>{let m,p=_t(async()=>{try{if(!m)try{m=await B(t,Wn,"createPendingTransactionFilter")({});return}catch(h){throw p(),h}let d=await B(t,Te,"getFilterChanges")({filter:m});if(d.length===0)return;if(e)f.onTransactions(d);else for(let h of d)f.onTransactions([h])}catch(d){f.onError?.(d)}},{emitOnBegin:!0,interval:s});return async()=>{m&&await B(t,Ie,"uninstallFilter")({filter:m}),p()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{let{unsubscribe:m}=await t.transport.subscribe({params:["newPendingTransactions"],onData(p){if(!u)return;let d=p.result;o([d])},onError(p){r?.(p)}});f=m,u||f()}catch(m){r?.(m)}})(),()=>f()})()}function bm(t){let m=t.match(Gl)?.groups??{},{scheme:e,statement:r}=m,o=O(m,["scheme","statement"]),p=t.match(Vl)?.groups??{},{chainId:n,expirationTime:s,issuedAt:i,notBefore:c,requestId:a}=p,u=O(p,["chainId","expirationTime","issuedAt","notBefore","requestId"]),f=t.split("Resources:")[1]?.split(`
- `).slice(1);return x(x(x(x(x(x(x(x(x(x({},o),u),n?{chainId:Number(n)}:{}),s?{expirationTime:new Date(s)}:{}),i?{issuedAt:new Date(i)}:{}),c?{notBefore:new Date(c)}:{}),a?{requestId:a}:{}),f?{resources:f}:{}),e?{scheme:e}:{}),r?{statement:r}:{})}var Gl=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Vl=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function wm(t){let{address:e,domain:r,message:o,nonce:n,scheme:s,time:i=new Date}=t;if(r&&o.domain!==r||n&&o.nonce!==n||s&&o.scheme!==s||o.expirationTime&&i>=o.expirationTime||o.notBefore&&i<o.notBefore)return!1;try{if(!o.address||!te(o.address,{strict:!1})||e&&!ft(o.address,e))return!1}catch{return!1}return!0}async function Em(t,e){let d=e,{address:r,domain:o,message:n,nonce:s,scheme:i,signature:c,time:a=new Date}=d,u=O(d,["address","domain","message","nonce","scheme","signature","time"]),f=bm(n);if(!f.address||!wm({address:r,domain:o,message:f,nonce:s,scheme:i,time:a}))return!1;let p=or(n);return Re(t,x({address:f.address,hash:p,signature:c},u))}async function Dr(t,{serializedTransaction:e,throwOnReceiptRevert:r,timeout:o}){let n=await t.request({method:"eth_sendRawTransactionSync",params:o?[e,P(o)]:[e]},{retryCount:0}),i=(t.chain?.formatters?.transactionReceipt?.format||mo)(n);if(i.status==="reverted"&&r)throw new Qo({receipt:i});return i}function ac(t){return{call:e=>we(t,e),createAccessList:e=>Gn(t,e),createBlockFilter:()=>du(t),createContractEventFilter:e=>Tr(t,e),createEventFilter:e=>Vn(t,e),createPendingTransactionFilter:()=>Wn(t),estimateContractGas:e=>Rn(t,e),estimateGas:e=>Br(t,e),getBalance:e=>lu(t,e),getBlobBaseFee:()=>hu(t),getBlock:e=>lt(t,e),getBlockNumber:e=>Kt(t,e),getBlockTransactionCount:e=>yu(t,e),getBytecode:e=>Eo(t,e),getChainId:()=>Bt(t),getCode:e=>Eo(t,e),getContractEvents:e=>Sr(t,e),getEip712Domain:e=>xu(t,e),getEnsAddress:e=>nu(t,e),getEnsAvatar:e=>fu(t,e),getEnsName:e=>mu(t,e),getEnsResolver:e=>pu(t,e),getEnsText:e=>jn(t,e),getFeeHistory:e=>bu(t,e),estimateFeesPerGas:e=>Xc(t,e),getFilterChanges:e=>Te(t,e),getFilterLogs:e=>wu(t,e),getGasPrice:()=>Ir(t),getLogs:e=>Pr(t,e),getProof:e=>om(t,e),estimateMaxPriorityFeePerGas:e=>Jc(t,e),getStorageAt:e=>nm(t,e),getTransaction:e=>Lr(t,e),getTransactionConfirmations:e=>sm(t,e),getTransactionCount:e=>Ae(t,e),getTransactionReceipt:e=>Mr(t,e),multicall:e=>im(t,e),prepareTransactionRequest:e=>Zt(t,e),readContract:e=>tt(t,e),sendRawTransaction:e=>Rr(t,e),sendRawTransactionSync:e=>Dr(t,e),simulate:e=>Do(t,e),simulateBlocks:e=>Do(t,e),simulateCalls:e=>pm(t,e),simulateContract:e=>kn(t,e),verifyHash:e=>Re(t,e),verifyMessage:e=>lm(t,e),verifySiweMessage:e=>Em(t,e),verifyTypedData:e=>hm(t,e),uninstallFilter:e=>Ie(t,e),waitForTransactionReceipt:e=>Ws(t,e),watchBlocks:e=>ym(t,e),watchBlockNumber:e=>Vs(t,e),watchContractEvent:e=>Nn(t,e),watchEvent:e=>xm(t,e),watchPendingTransactions:e=>gm(t,e)}}function Wl(t){let{key:e="public",name:r="Public Client"}=t;return er(C(x({},t),{key:e,name:r,type:"publicClient"})).extend(ac)}async function vm(t,{hash:e}){await t.request({method:`${t.mode}_dropTransaction`,params:[e]})}async function Am(t){return t.request({method:`${t.mode}_dumpState`})}async function Tm(t){return t.mode==="ganache"?await t.request({method:"eth_mining"}):await t.request({method:`${t.mode}_getAutomine`})}async function Im(t){return await t.request({method:"txpool_content"})}async function Bm(t){let{pending:e,queued:r}=await t.request({method:"txpool_status"});return{pending:V(e),queued:V(r)}}async function Pm(t,{address:e}){await t.request({method:`${t.mode}_impersonateAccount`,params:[e]})}async function Sm(t,{seconds:e}){return await t.request({method:"evm_increaseTime",params:[P(e)]})}async function Cm(t){return await t.request({method:"txpool_inspect"})}async function Rm(t,{state:e}){await t.request({method:`${t.mode}_loadState`,params:[e]})}async function km(t,{blocks:e,interval:r}){t.mode==="ganache"?await t.request({method:"evm_mine",params:[{blocks:P(e)}]}):await t.request({method:`${t.mode}_mine`,params:[P(e),P(r||0)]})}async function Nm(t){await t.request({method:`${t.mode}_removeBlockTimestampInterval`})}async function Hm(t,{blockNumber:e,jsonRpcUrl:r}={}){await t.request({method:`${t.mode}_reset`,params:[{forking:{blockNumber:Number(e),jsonRpcUrl:r}}]})}async function _m(t,{id:e}){await t.request({method:"evm_revert",params:[e]})}async function qm(t,e){let y=e,{accessList:r,data:o,from:n,gas:s,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:a,nonce:u,to:f,value:m}=y,p=O(y,["accessList","data","from","gas","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","value"]),d=t.chain?.formatters?.transactionRequest?.format,l=(d||gt)(C(x({},Gt(p,{format:d})),{accessList:r,data:o,from:n,gas:s,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:a,nonce:u,to:f,value:m}),"sendUnsignedTransaction");return await t.request({method:"eth_sendUnsignedTransaction",params:[l]})}async function Um(t,e){t.mode==="ganache"?e?await t.request({method:"miner_start"}):await t.request({method:"miner_stop"}):await t.request({method:"evm_setAutomine",params:[e]})}async function Fm(t,{address:e,value:r}){t.mode==="ganache"?await t.request({method:"evm_setAccountBalance",params:[e,P(r)]}):await t.request({method:`${t.mode}_setBalance`,params:[e,P(r)]})}async function zm(t,{gasLimit:e}){await t.request({method:"evm_setBlockGasLimit",params:[P(e)]})}async function Lm(t,{interval:e}){let r=t.mode==="hardhat"?e*1e3:e;await t.request({method:`${t.mode}_setBlockTimestampInterval`,params:[r]})}async function Mm(t,{address:e,bytecode:r}){t.mode==="ganache"?await t.request({method:"evm_setAccountCode",params:[e,r]}):await t.request({method:`${t.mode}_setCode`,params:[e,r]})}async function Om(t,{address:e}){await t.request({method:`${t.mode}_setCoinbase`,params:[e]})}async function Dm(t,{interval:e}){let r=t.mode==="hardhat"?e*1e3:e;await t.request({method:"evm_setIntervalMining",params:[r]})}async function $m(t,e){await t.request({method:`${t.mode}_setLoggingEnabled`,params:[e]})}async function jm(t,{gasPrice:e}){await t.request({method:`${t.mode}_setMinGasPrice`,params:[P(e)]})}async function Gm(t,{baseFeePerGas:e}){await t.request({method:`${t.mode}_setNextBlockBaseFeePerGas`,params:[P(e)]})}async function Vm(t,{timestamp:e}){await t.request({method:"evm_setNextBlockTimestamp",params:[P(e)]})}async function Wm(t,{address:e,nonce:r}){await t.request({method:`${t.mode}_setNonce`,params:[e,P(r)]})}async function Zm(t,e){await t.request({method:`${t.mode}_setRpcUrl`,params:[e]})}async function Km(t,{address:e,index:r,value:o}){await t.request({method:`${t.mode}_setStorageAt`,params:[e,typeof r=="number"?P(r):r,o]})}async function Ym(t){return await t.request({method:"evm_snapshot"})}async function Jm(t,{address:e}){await t.request({method:`${t.mode}_stopImpersonatingAccount`,params:[e]})}function cc({mode:t}){return e=>{let r=e.extend(()=>({mode:t}));return{dropTransaction:o=>vm(r,o),dumpState:()=>Am(r),getAutomine:()=>Tm(r),getTxpoolContent:()=>Im(r),getTxpoolStatus:()=>Bm(r),impersonateAccount:o=>Pm(r,o),increaseTime:o=>Sm(r,o),inspectTxpool:()=>Cm(r),loadState:o=>Rm(r,o),mine:o=>km(r,o),removeBlockTimestampInterval:()=>Nm(r),reset:o=>Hm(r,o),revert:o=>_m(r,o),sendUnsignedTransaction:o=>qm(r,o),setAutomine:o=>Um(r,o),setBalance:o=>Fm(r,o),setBlockGasLimit:o=>zm(r,o),setBlockTimestampInterval:o=>Lm(r,o),setCode:o=>Mm(r,o),setCoinbase:o=>Om(r,o),setIntervalMining:o=>Dm(r,o),setLoggingEnabled:o=>$m(r,o),setMinGasPrice:o=>jm(r,o),setNextBlockBaseFeePerGas:o=>Gm(r,o),setNextBlockTimestamp:o=>Vm(r,o),setNonce:o=>Wm(r,o),setRpcUrl:o=>Zm(r,o),setStorageAt:o=>Km(r,o),snapshot:()=>Ym(r),stopImpersonatingAccount:o=>Jm(r,o)}}}function Zl(t){let{key:e="test",name:r="Test Client",mode:o}=t;return er(C(x({},t),{key:e,name:r,type:"testClient"})).extend(s=>x({mode:o},cc({mode:o})(s)))}async function Xm(t,{chain:e}){let{id:r,name:o,nativeCurrency:n,rpcUrls:s,blockExplorers:i}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:P(r),chainName:o,nativeCurrency:n,rpcUrls:s.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function Qm(t,e){let c=e,{abi:r,args:o,bytecode:n}=c,s=O(c,["abi","args","bytecode"]),i=fo({abi:r,args:o,bytecode:n});return Be(t,C(x(x({},s),s.authorizationList?{to:null}:{}),{data:i}))}async function tp(t){return t.account?.type==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Zr(r))}async function ep(t,e={}){let{account:r=t.account,chainId:o}=e,n=r?G(r):void 0,s=o?[n?.address,[P(o)]]:[n?.address],i=await t.request({method:"wallet_getCapabilities",params:s}),c={};for(let[a,u]of Object.entries(i)){c[Number(a)]={};for(let[f,m]of Object.entries(u))f==="addSubAccount"&&(f="unstable_addSubAccount"),c[Number(a)][f]=m}return typeof o=="number"?c[o]:c}async function rp(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Zs(t,e){let{account:r=t.account,chainId:o,nonce:n}=e;if(!r)throw new dt({docsPath:"/docs/eip7702/prepareAuthorization"});let s=G(r),i=(()=>{if(e.executor)return e.executor==="self"?e.executor:G(e.executor)})(),c={address:e.contractAddress??e.address,chainId:o,nonce:n};return typeof c.chainId>"u"&&(c.chainId=t.chain?.id??await B(t,Bt,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await B(t,Ae,"getTransactionCount")({address:s.address,blockTag:"pending"}),(i==="self"||i?.address&&ft(i.address,s.address))&&(c.nonce+=1)),c}async function op(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(r=>it(r))}async function np(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function sp(t,e){let{chain:r=t.chain}=e,o=e.timeout??Math.max((r?.blockTime??0)*3,5e3),n=await _n(t,e);return await Fn(t,C(x({},e),{id:n.id,timeout:o}))}var uc=new de(128);async function Ks(t,e){let v=e,{account:r=t.account,chain:o=t.chain,accessList:n,authorizationList:s,blobs:i,data:c,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,pollingInterval:h,throwOnReceiptRevert:l,type:b,value:y}=v,A=O(v,["account","chain","accessList","authorizationList","blobs","data","gas","gasPrice","maxFeePerBlobGas","maxFeePerGas","maxPriorityFeePerGas","nonce","pollingInterval","throwOnReceiptRevert","type","value"]),w=e.timeout??Math.max((o?.blockTime??0)*3,5e3);if(typeof r>"u")throw new dt({docsPath:"/docs/actions/wallet/sendTransactionSync"});let g=r?G(r):null;try{bt(e);let E=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await ve({authorization:s[0]}).catch(()=>{throw new L("`to` is required. Could not infer from `authorizationList`.")})})();if(g?.type==="json-rpc"||g===null){let T;o!==null&&(T=await B(t,Bt,"getChainId")({}),Ye({currentChainId:T,chain:o}));let I=t.chain?.formatters?.transactionRequest?.format,N=(I||gt)(C(x({},Gt(A,{format:I})),{accessList:n,authorizationList:s,blobs:i,chainId:T,data:c,from:g?.address,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,to:E,type:b,value:y}),"sendTransaction"),S=uc.get(t.uid),_=S?"wallet_sendTransaction":"eth_sendTransaction",U=await(async()=>{try{return await t.request({method:_,params:[N]},{retryCount:0})}catch(q){if(S===!1)throw q;let R=q;if(R.name==="InvalidInputRpcError"||R.name==="InvalidParamsRpcError"||R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[N]},{retryCount:0}).then(F=>(uc.set(t.uid,!0),F)).catch(F=>{let $=F;throw $.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError"?(uc.set(t.uid,!1),R):$});throw R}})(),Z=await B(t,Ws,"waitForTransactionReceipt")({checkReplacement:!1,hash:U,pollingInterval:h,timeout:w});if(l&&Z.status==="reverted")throw new Qo({receipt:Z});return Z}if(g?.type==="local"){let T=await B(t,Zt,"prepareTransactionRequest")(C(x({account:g,accessList:n,authorizationList:s,blobs:i,chain:o,data:c,gas:a,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,nonceManager:g.nonceManager,parameters:[...xo,"sidecars"],type:b,value:y},A),{to:E})),I=o?.serializers?.transaction,H=await g.signTransaction(T,{serializer:I});return await B(t,Dr,"sendRawTransactionSync")({serializedTransaction:H,throwOnReceiptRevert:l})}throw g?.type==="smart"?new Wt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Wt({docsPath:"/docs/actions/wallet/sendTransactionSync",type:g?.type})}catch(E){throw E instanceof Wt?E:Cr(E,C(x({},e),{account:g,chain:e.chain||void 0}))}}async function ip(t,e){let{id:r}=e;await t.request({method:"wallet_showCallsStatus",params:[r]})}async function ap(t,e){let{account:r=t.account}=e;if(!r)throw new dt({docsPath:"/docs/eip7702/signAuthorization"});let o=G(r);if(!o.signAuthorization)throw new Wt({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:o.type});let n=await Zs(t,e);return o.signAuthorization(n)}async function cp(t,{account:e=t.account,message:r}){if(!e)throw new dt({docsPath:"/docs/actions/wallet/signMessage"});let o=G(e);if(o.signMessage)return o.signMessage({message:r});let n=typeof r=="string"?zt(r):r.raw instanceof Uint8Array?st(r.raw):r.raw;return t.request({method:"personal_sign",params:[n,o.address]},{retryCount:0})}async function up(t,e){let u=e,{account:r=t.account,chain:o=t.chain}=u,n=O(u,["account","chain"]);if(!r)throw new dt({docsPath:"/docs/actions/wallet/signTransaction"});let s=G(r);bt(x({account:s},e));let i=await B(t,Bt,"getChainId")({});o!==null&&Ye({currentChainId:i,chain:o});let a=(o?.formatters||t.chain?.formatters)?.transactionRequest?.format||gt;return s.signTransaction?s.signTransaction(C(x({},n),{chainId:i}),{serializer:t.chain?.serializers?.transaction}):await t.request({method:"eth_signTransaction",params:[C(x({},a(n,"signTransaction")),{chainId:P(i),from:s.address})]},{retryCount:0})}async function fp(t,e){let{account:r=t.account,domain:o,message:n,primaryType:s}=e;if(!r)throw new dt({docsPath:"/docs/actions/wallet/signTypedData"});let i=G(r),c=x({EIP712Domain:qr({domain:o})},e.types);if(So({domain:o,message:n,primaryType:s,types:c}),i.signTypedData)return i.signTypedData({domain:o,message:n,primaryType:s,types:c});let a=ta({domain:o,message:n,primaryType:s,types:c});return t.request({method:"eth_signTypedData_v4",params:[i.address,a]},{retryCount:0})}async function mp(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:P(e)}]},{retryCount:0})}async function pp(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function dp(t,e){return oe.internal(t,Ks,"sendTransactionSync",e)}function fc(t){return{addChain:e=>Xm(t,e),deployContract:e=>Qm(t,e),getAddresses:()=>tp(t),getCallsStatus:e=>qn(t,e),getCapabilities:e=>ep(t,e),getChainId:()=>Bt(t),getPermissions:()=>rp(t),prepareAuthorization:e=>Zs(t,e),prepareTransactionRequest:e=>Zt(t,e),requestAddresses:()=>op(t),requestPermissions:e=>np(t,e),sendCalls:e=>_n(t,e),sendCallsSync:e=>sp(t,e),sendRawTransaction:e=>Rr(t,e),sendRawTransactionSync:e=>Dr(t,e),sendTransaction:e=>Be(t,e),sendTransactionSync:e=>Ks(t,e),showCallsStatus:e=>ip(t,e),signAuthorization:e=>ap(t,e),signMessage:e=>cp(t,e),signTransaction:e=>up(t,e),signTypedData:e=>fp(t,e),switchChain:e=>mp(t,e),waitForCallsStatus:e=>Fn(t,e),watchAsset:e=>pp(t,e),writeContract:e=>oe(t,e),writeContractSync:e=>dp(t,e)}}function Kl(t){let{key:e="wallet",name:r="Wallet Client",transport:o}=t;return er(C(x({},t),{key:e,name:r,transport:o,type:"walletClient"})).extend(fc)}function ue({key:t,methods:e,name:r,request:o,retryCount:n=3,retryDelay:s=150,timeout:i,type:c},a){let u=Mn();return{config:{key:t,methods:e,name:r,request:o,retryCount:n,retryDelay:s,timeout:i,type:c},request:Bu(o,{methods:e,retryCount:n,retryDelay:s,uid:u}),value:a}}function Yl(t,e={}){let{key:r="custom",methods:o,name:n="Custom Provider",retryDelay:s}=e;return({retryCount:i})=>ue({key:r,methods:o,name:n,request:t.request.bind(t),retryCount:e.retryCount??i,retryDelay:s,type:"custom"})}function Jl(t,e={}){let{key:r="fallback",name:o="Fallback",rank:n=!1,shouldThrow:s=lp,retryCount:i,retryDelay:c}=e;return p=>{var d=p,{chain:a,pollingInterval:u=4e3,timeout:f}=d,m=O(d,["chain","pollingInterval","timeout"]);let h=t,l=()=>{},b=ue({key:r,name:o,async request({method:y,params:A}){let w,g=async(v=0)=>{let E=h[v](C(x({},m),{chain:a,retryCount:0,timeout:f}));try{let T=await E.request({method:y,params:A});return l({method:y,params:A,response:T,transport:E,status:"success"}),T}catch(T){if(l({error:T,method:y,params:A,transport:E,status:"error"}),s(T)||v===h.length-1||(w??=h.slice(v+1).some(I=>{let{include:H,exclude:N}=I({chain:a}).config.methods||{};return H?H.includes(y):N?!N.includes(y):!0}),!w))throw T;return g(v+1)}};return g()},retryCount:i,retryDelay:c,type:"fallback"},{onResponse:y=>l=y,transports:h.map(y=>y({chain:a,retryCount:0}))});if(n){let y=typeof n=="object"?n:{};Xl({chain:a,interval:y.interval??u,onTransports:A=>h=A,ping:y.ping,sampleCount:y.sampleCount,timeout:y.timeout,transports:h,weights:y.weights})}return b}}function lp(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===lr.code||t.code===$e.code||yi.nodeMessage.test(t.message)||t.code===5e3))}function Xl({chain:t,interval:e=4e3,onTransports:r,ping:o,sampleCount:n=10,timeout:s=1e3,transports:i,weights:c={}}){let{stability:a=.7,latency:u=.3}=c,f=[],m=async()=>{let p=await Promise.all(i.map(async l=>{let b=l({chain:t,retryCount:0,timeout:s}),y=Date.now(),A,w;try{await(o?o({transport:b}):b.request({method:"net_listening"})),w=1}catch{w=0}finally{A=Date.now()}return{latency:A-y,success:w}}));f.push(p),f.length>n&&f.shift();let d=Math.max(...f.map(l=>Math.max(...l.map(({latency:b})=>b)))),h=i.map((l,b)=>{let y=f.map(E=>E[b].latency),w=1-y.reduce((E,T)=>E+T,0)/y.length/d,g=f.map(E=>E[b].success),v=g.reduce((E,T)=>E+T,0)/g.length;return v===0?[0,b]:[u*w+a*v,b]}).sort((l,b)=>b[0]-l[0]);r(h.map(([,l])=>i[l])),await tr(e),m()};m()}var ur=class extends L{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};function Ql(t,e={}){let{batch:r,fetchFn:o,fetchOptions:n,key:s="http",methods:i,name:c="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:u,retryDelay:f,raw:m}=e;return({chain:p,retryCount:d,timeout:h})=>{let{batchSize:l=1e3,wait:b=0}=typeof r=="object"?r:{},y=e.retryCount??d,A=h??e.timeout??1e4,w=t||p?.rpcUrls.default.http[0];if(!w)throw new ur;let g=zu(w,{fetchFn:o,fetchOptions:n,onRequest:a,onResponse:u,timeout:A});return ue({key:s,methods:i,name:c,async request({method:v,params:E}){let T={method:v,params:E},{schedule:I}=Sn({id:w,wait:b,shouldSplitBatch(_){return _.length>l},fn:_=>g.request({body:_}),sort:(_,U)=>_.id-U.id}),H=async _=>r?I(_):[await g.request({body:_})],[{error:N,result:S}]=await H(T);if(m)return{error:N,result:S};if(N)throw new Me({body:T,error:N,url:w});return S},retryCount:y,retryDelay:f,timeout:A,type:"http"},{fetchOptions:n,url:w})}}function t0(t,e={}){let{keepAlive:r,key:o="webSocket",methods:n,name:s="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=e;return({chain:a,retryCount:u,timeout:f})=>{let m=e.retryCount??u,p=f??e.timeout??1e4,d=t||a?.rpcUrls.default.webSocket?.[0],h={keepAlive:r,reconnect:i};if(!d)throw new ur;return ue({key:o,methods:n,name:s,async request({method:l,params:b}){let y={method:l,params:b},A=await _r(d,h),{error:w,result:g}=await A.requestAsync({body:y,timeout:p});if(w)throw new Me({body:y,error:w,url:d});return g},retryCount:m,retryDelay:c,timeout:p,type:"webSocket"},{getSocket(){return Mu(d)},getRpcClient(){return _r(d,h)},async subscribe({params:l,onData:b,onError:y}){let A=await _r(d,h),{result:w}=await new Promise((g,v)=>A.request({body:{method:"eth_subscribe",params:l},onError(E){v(E),y?.(E)},onResponse(E){if(E.error){v(E.error),y?.(E.error);return}if(typeof E.id=="number"){g(E);return}E.method==="eth_subscription"&&b(E.params)}}));return{subscriptionId:w,async unsubscribe(){return new Promise(g=>A.request({body:{method:"eth_unsubscribe",params:[w]},onResponse:g}))}}}})}}var mc=class extends Error{constructor(e,r){super(r),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=r}};var pc="/docs/contract/decodeDeployData";function e0(t){let{abi:e,bytecode:r,data:o}=t;if(o===r)return{bytecode:r};let n=e.find(i=>"type"in i&&i.type==="constructor");if(!n)throw new Xs({docsPath:pc});if(!("inputs"in n))throw new Vo({docsPath:pc});if(!n.inputs||n.inputs.length===0)throw new Vo({docsPath:pc});return{args:ye(n.inputs,`0x${o.replace(r,"")}`),bytecode:r}}function r0(t){let e=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(c=>ut(c)):t.blobs,o=r.reduce((c,a)=>c+a.length,0),n=Yr(new Uint8Array(o)),s=!0;for(let c of r){let a=Yr(c);for(;s&&a.position<c.length;){a.incrementPosition(1);let u=31;c.length-a.position<31&&(u=c.length-a.position);for(let f in Array.from({length:u})){let m=a.readByte();if(m===128&&!a.inspectBytes(a.remaining).includes(128)){s=!1;break}n.pushByte(m)}}}let i=n.bytes.slice(0,n.position);return e==="hex"?ot(i):i}function o0(t){let{sidecars:e,version:r}=t,o=t.to??(typeof e[0].blob=="string"?"hex":"bytes"),n=[];for(let{commitment:s}of e)n.push(wi({commitment:s,to:o,version:r}));return n}var n0=2147483648;function s0(t){if(t===1)return 60n;if(t>=n0||t<0)throw new wo({chainId:t});return BigInt((2147483648|t)>>>0)}function dc({blobToKzgCommitment:t,computeBlobKzgProof:e}){return{blobToKzgCommitment:t,computeBlobKzgProof:e}}function i0(t,e){try{t.loadTrustedSetup(e)}catch(r){let o=r;if(!o.message.includes("trusted setup is already loaded"))throw o}return dc(t)}function a0({r:t,yParityAndS:e}){let r=ut(e),o=r[0]&128?1:0,n=r;return o===1&&(n[0]&=127),{r:t,s:ot(n),yParity:o}}function hp(t){let{r:e,s:r}=be.Signature.fromCompact(t.slice(2,130));return{r:P(e,{size:32}),yParityAndS:P(r,{size:32})}}function yp(t){let{r:e,s:r}=be.Signature.fromCompact(t.slice(2,130)),o=+`0x${t.slice(130)}`,[n,s]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof n<"u"?{r:P(e,{size:32}),s:P(r,{size:32}),v:n,yParity:s}:{r:P(e,{size:32}),s:P(r,{size:32}),yParity:s}}async function c0(t){let{serializedTransaction:e,signature:r}=t,o=tc(e),n=r??{r:o.r,s:o.s,v:o.v,yParity:o.yParity},s=Fi(C(x({},o),{r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0}));return await Rt({hash:K(s),signature:n})}function xp({r:t,yParityAndS:e}){return`0x${new be.Signature(D(t),D(e)).toCompactHex()}`}function u0(t){let{r:e,s:r,v:o,yParity:n}=t,s=Number(n??o-27n),i=r;if(s===1){let c=ut(r);c[0]|=128,i=ot(c)}return{r:e,yParityAndS:i}}export{po as a,Mt as b,It as c,zi as d,Rt as e,lo as f,ho as g,re as h,yo as i,Je as j,Xe as k,Qe as l,Oi as m,Ip as n,go as o,Pe as p,Un as q,er as r,Bp as s,Nr as t,Vi as u,ne as v,rr as w,bo as x,wo as y,_p as z,Kn as A,qp as B,vu as C,Au as D,Jn as E,Ki as F,jp as G,Fu as H,Vp as I,Ao as J,Xi as K,Qi as L,or as M,Io as N,Bo as O,Po as P,ta as Q,So as R,qr as S,Zp as T,Co as U,ts as V,ea as W,Xp as X,ra as Y,Ya as Z,pl as _,dl as $,Ja as aa,Xa as ba,ll as ca,hl as da,yl as ea,xl as fa,gl as ga,Qa as ha,tc as ia,Mo as ja,Oo as ka,Il as la,Bl as ma,nc as na,Ut as oa,Gs as pa,ac as qa,Wl as ra,cc as sa,Zl as ta,fc as ua,Kl as va,ue as wa,Yl as xa,Jl as ya,lp as za,ur as Aa,Ql as Ba,t0 as Ca,mc as Da,e0 as Ea,r0 as Fa,o0 as Ga,s0 as Ha,dc as Ia,i0 as Ja,a0 as Ka,hp as La,yp as Ma,c0 as Na,xp as Oa,u0 as Pa};
