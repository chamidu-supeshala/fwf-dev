import{A as a,Y as Z,aa as z,b as V,ba as _,d as N,e as Q,f as W,i as j,wa as Y,ya as v,z as A}from"./chunk-RGQWHR4D.js";import{Aa as E,Ab as O,Hb as B,Ib as L,Nb as C,Oa as b,Pb as s,Qb as R,Rb as H,Ta as S,Tb as h,Ua as p,Ub as u,V as g,Vb as m,Yb as T,_a as l,cb as d,db as x,gb as I,hb as k,ka as w,la as y,nc as F,xa as P,ya as D,yb as c,zb as M}from"./chunk-CETXBRZV.js";function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var n=Math.random()*16|0,e=i=="x"?n:n&3|8;return e.toString(16)})}var $=class i extends v{isOpen;isOpenChange=new I;modalRef;handleDismiss(){this.isOpenChange.emit(!1)}uuid=q();ngAfterViewInit(){a.isServer||(this.modalRef?.isCmpOpen||this.isOpen,setTimeout(()=>{this.modalRef?.willPresent.pipe(g(this.onDestroy$)).subscribe(()=>{}),this.modalRef?.willDismiss.pipe(g(this.onDestroy$)).subscribe(n=>{n?.detail?.data?.isPopState})},300))}back(){window.history.state.modal&&window.history.state.uuid===this.uuid&&history.back()}pushState(){if(window.history.state.modal&&window.history.state.uuid===this.uuid)return;let n={modal:!0,desc:"fake state for our modal",uuid:this.uuid};history.pushState(n,"")}ngOnDestroy(){super.ngOnDestroy(),a.isBrowser&&window.removeEventListener("historyChange",this.handlePopState),(this.modalRef?.isCmpOpen||this.isOpen)&&this.modalRef?.dismiss()}handlePopState=async n=>{let e=n.detail.from?.[0];e?.modal&&e?.uuid===this.uuid&&this.modalRef?.isCmpOpen&&await this.modalRef?.dismiss({isPopState:!0})};static \u0275fac=(()=>{let n;return function(o){return(n||(n=D(i)))(o||i)}})();static \u0275cmp=l({type:i,selectors:[["ng-component"]],viewQuery:function(e,o){if(e&1&&h(z,5),e&2){let t;u(t=m())&&(o.modalRef=t.first)}},inputs:{isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},features:[d],decls:0,vars:0,template:function(e,o){},encapsulation:2})};var K=["appTooltip",""],X=["*"],ee=i=>({"mouse-none":i});function oe(i,n){if(i&1&&(M(0,"div",3),B(1,4),O()),i&2){let e=s(2);b(),c("ngTemplateOutlet",e.appTooltip)}}function te(i,n){if(i&1){let e=L();M(0,"ion-popover",2,0),C("didPresent",function(){w(e);let t=s();return y(t.handlePresent())})("didDismiss",function(){w(e);let t=s();return y(t.handleDismiss())}),x(2,oe,2,1,"ng-template"),O()}if(i&2){let e=s();T("white",e.isWhite),c("ngClass",F(9,ee,!e.canMouseOver))("ngStyle",e.popoverStyle)("isOpen",e.isPopoverOpen)("side",e.side)("showBackdrop",!1)("backdropDismiss",!1)("arrow",!0)}}var U=class i extends v{constructor(e,o,t){super();this.ngZone=e;this.container=o;this.renderer=t}canMouseOver=!0;appTooltip;popoverStyle={};delayShow=0;side="bottom";disabled=!1;disableTouchDevice=!1;isWhite=!1;hoverBg=!0;get enalble(){return!this.disabled}preventEvent=!0;ngOnInit(){}ngOnChanges(e){let o=e.disabled;if(o&&!o.isFirstChange()&&o.currentValue===!1){if(!this.isPresented)return;this.closeTooltip()}}popover;isPopoverOpen=!1;isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}delayTooltipTimeOut;async handleOpenPopover(e){await this.closePromise,!this.disabled&&(this.disableTouchDevice&&this.isTouchDevice()||this.isPopoverOpen||(this.popover.event=e,this.delayTooltipTimeOut=setTimeout(()=>{this.isPopoverOpen=!0,this.cdr.detectChanges(),this.cdr.markForCheck()},this.delayShow)))}handleClick(e){this.disabled||this.disableTouchDevice&&this.isTouchDevice()||this.preventEvent&&(e.preventDefault(),e.stopPropagation())}isPresented=!1;isHoveringTooltipMobile=!1;handlePresent=()=>{this.isPresented=!0,document.body.classList.add("has-tooltip-open"),this.ngZone.runOutsideAngular(()=>{window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mousewheel",this.handleMouseWheel),window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchend",this.handleTouchEnd)})};handleTouchStart=e=>{console.log("touchstart"),this.isHoveringTooltipMobile=this.isHoveringTooltip(e.target),this.handleMouseMove(e)};handleTouchMove=e=>{this.isHoveringTooltipMobile||this.isPresented&&this.closeTooltip()};handleTouchEnd=e=>{this.isHoveringTooltipMobile=!1};handleMouseWheel=e=>{console.log("mousewheel"),this.isPresented&&this.closeTooltip()};handleMouseLeave(){clearTimeout(this.delayTooltipTimeOut)}closePromise=null;async closeTooltip(){this.isPopoverOpen=!1,this.closePromise=this.popover?.dismiss(),await this.closePromise,document.body.classList.remove("has-tooltip-open")}handleMouseMove=async e=>{console.log("mousemove"),!this.isHoveringTooltip(e.target)&&this.closeTooltip()};isHoveringTooltip(e){if(this.container.nativeElement.contains(e))return!0;let o=this.popover?.el;return!!(o?.contains(e)||o===e)}handleDismiss(){this.isPopoverOpen=!1,this.isPresented=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mousewheel",this.handleMouseWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd)}async ngOnDestroy(){a.isServer||(this.isPopoverOpen=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mousewheel",this.handleMouseWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),await this.popover?.dismiss())}static \u0275fac=function(o){return new(o||i)(p(k),p(E),p(S))};static \u0275cmp=l({type:i,selectors:[["","appTooltip",""]],viewQuery:function(o,t){if(o&1&&h(_,5),o&2){let r;u(r=m())&&(t.popover=r.first)}},hostVars:4,hostBindings:function(o,t){o&1&&C("touchstart",function(f){return t.handleOpenPopover(f)})("mouseover",function(f){return t.handleOpenPopover(f)})("mouseleave",function(){return t.handleMouseLeave()}),o&2&&T("hoverBg",t.hoverBg)("cursor-pointer",t.enalble)},inputs:{canMouseOver:"canMouseOver",appTooltip:"appTooltip",popoverStyle:"popoverStyle",delayShow:"delayShow",side:"side",disabled:"disabled",disableTouchDevice:"disableTouchDevice",isWhite:"isWhite",hoverBg:"hoverBg",preventEvent:"preventEvent"},features:[d,P],attrs:K,ngContentSelectors:X,decls:2,vars:1,consts:[["popover",""],["class","popover-tooltip","alignment","center","mode","ios",3,"ngClass","ngStyle","isOpen","side","showBackdrop","backdropDismiss","arrow","white","didPresent","didDismiss",4,"ngIf"],["alignment","center","mode","ios",1,"popover-tooltip",3,"didPresent","didDismiss","ngClass","ngStyle","isOpen","side","showBackdrop","backdropDismiss","arrow"],[1,"app-tooltip-body","pointer-events-auto"],[3,"ngTemplateOutlet"]],template:function(o,t){o&1&&(R(),H(0),x(1,te,3,11,"ion-popover",1)),o&2&&(b(),c("ngIf",!t.disabled))},dependencies:[j,V,N,W,Q,Z,A,Y,_],styles:["[_nghost-%COMP%]{position:relative;z-index:1}.app-tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1}ion-popover[_ngcontent-%COMP%]{pointer-events:none;--width: auto;--max-width: 85vw}@media (min-width: 768px){ion-popover[_ngcontent-%COMP%]{--max-width: 50vw}}ion-popover[_ngcontent-%COMP%]{--offset-y: -5px;--background: rgb(var(--panel-1))}ion-popover[_ngcontent-%COMP%]::part(backdrop){pointer-events:none}ion-popover[_ngcontent-%COMP%]::part(arrow){width:23px;height:18px;transform:translateY(1px);z-index:11;pointer-events:auto}ion-popover[_ngcontent-%COMP%]::part(arrow):after{background:var(--background);left:3px;top:9px;width:15px;height:15px;border:1px solid var(--background);border-radius:6px 0;transform:rotate(67.5deg) skew(45deg) scaleY(.70711)}ion-popover[_ngcontent-%COMP%]::part(content){overflow:inherit;margin-top:-13px;padding-top:13px;border:0;pointer-events:auto;background-color:transparent;box-shadow:none}ion-popover.mouse-none[_ngcontent-%COMP%]::part(content){pointer-events:none}ion-popover.mouse-none[_ngcontent-%COMP%]::part(arrow){pointer-events:none}ion-popover.mouse-none[_ngcontent-%COMP%]   .app-tooltip-body[_ngcontent-%COMP%]{pointer-events:none!important}ion-popover.white[_ngcontent-%COMP%]::part(arrow):after{background-color:#f1f5f9;border:1px solid #dddddd}ion-popover.white[_ngcontent-%COMP%]   .app-tooltip-body[_ngcontent-%COMP%]{background-color:#f1f5f9;--tw-border-opacity: 1;border-color:rgb(221 221 221 / var(--tw-border-opacity, 1));--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}ion-popover.popover-bottom[_ngcontent-%COMP%], ion-popover.popover-side-top[_ngcontent-%COMP%]{--offset-y: 3px}ion-popover.popover-bottom[_ngcontent-%COMP%]::part(arrow), ion-popover.popover-side-top[_ngcontent-%COMP%]::part(arrow){transform:translateY(-1px)}ion-popover.popover-bottom[_ngcontent-%COMP%]::part(arrow):after, ion-popover.popover-side-top[_ngcontent-%COMP%]::part(arrow):after{top:-9px}ion-popover.popover-bottom[_ngcontent-%COMP%]::part(content), ion-popover.popover-side-top[_ngcontent-%COMP%]::part(content){margin-top:14px;padding-top:0;padding-bottom:14px}  body.has-tooltip-open app-base-chart{pointer-events:none}.app-tooltip-body[_ngcontent-%COMP%]{max-width:100%;position:relative;border-radius:.75rem;border-width:1px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(var(--panel-1) / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(var(--panel-1) / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(var(--strong) / var(--tw-text-opacity, 1));box-shadow:0 4px 16px #0000001f}.app-tooltip-body[_ngcontent-%COMP%]    >*{max-width:100%}.hoverBg[_nghost-%COMP%]{border-radius:.5rem}.hoverBg[_nghost-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}"]})};export{q as a,$ as b,U as c};
