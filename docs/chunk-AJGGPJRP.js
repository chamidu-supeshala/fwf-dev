import{b as k,c as Zr,d as er,e as $r,g as Yr,i as he,j as zr,k as qr,l as N,m as yt,n as v,p as qe}from"./chunk-3MOYO27G.js";import{ea as at}from"./chunk-GSTDJRCA.js";import{eb as At}from"./chunk-YVA7YSBN.js";import{a as u,b as h,d as Hr,e as Ie,g as Gr,j as Kr}from"./chunk-QGXACWGO.js";var An=Gr((gc,yn)=>{"use strict";function _o(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}yn.exports=Eo;function Eo(e,r,t){var n=t&&t.stringify||_o,s=1;if(typeof e=="object"&&e!==null){var a=r.length+s;if(a===1)return e;var o=new Array(a);o[0]=n(e);for(var c=1;c<a;c++)o[c]=n(r[c]);return o.join(" ")}if(typeof e!="string")return e;var l=r.length;if(l===0)return e;for(var d="",p=1-s,f=-1,G=e&&e.length||0,I=0;I<G;){if(e.charCodeAt(I)===37&&I+1<G){switch(f=f>-1?f:0,e.charCodeAt(I+1)){case 100:case 102:if(p>=l||r[p]==null)break;f<I&&(d+=e.slice(f,I)),d+=Number(r[p]),f=I+2,I++;break;case 105:if(p>=l||r[p]==null)break;f<I&&(d+=e.slice(f,I)),d+=Math.floor(Number(r[p])),f=I+2,I++;break;case 79:case 111:case 106:if(p>=l||r[p]===void 0)break;f<I&&(d+=e.slice(f,I));var oe=typeof r[p];if(oe==="string"){d+="'"+r[p]+"'",f=I+2,I++;break}if(oe==="function"){d+=r[p].name||"<anonymous>",f=I+2,I++;break}d+=n(r[p]),f=I+2,I++;break;case 115:if(p>=l)break;f<I&&(d+=e.slice(f,I)),d+=String(r[p]),f=I+2,I++;break;case 37:f<I&&(d+=e.slice(f,I)),d+="%",f=I+2,I++,p--;break}++p}++I}return f===-1?e:(f<G&&(d+=e.slice(f)),d)}});var Tr=Gr((Cc,Bt)=>{"use strict";var wn=An();Bt.exports=Oe;var pt=xo().console||{},yo={mapHttpRequest:Ft,mapHttpResponse:Ft,wrapRequestSerializer:yr,wrapResponseSerializer:yr,wrapErrorSerializer:yr,req:Ft,res:Ft,err:vn,errWithCause:vn};function De(e,r){return e==="silent"?1/0:r.levels.values[e]}var Sr=Symbol("pino.logFuncs"),Ar=Symbol("pino.hierarchy"),Ao={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Sn(e,r){let t={logger:r,parent:e[Ar]};r[Ar]=t}function wo(e,r,t){let n={};r.forEach(s=>{n[s]=t[s]?t[s]:pt[s]||pt[Ao[s]||"log"]||et}),e[Sr]=n}function So(e,r){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(r):!1}function Oe(e){e=e||{},e.browser=e.browser||{};let r=e.browser.transmit;if(r&&typeof r.send!="function")throw Error("pino: transmit option must have a send function");let t=e.browser.write||pt;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},s=So(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let o=Object.keys(e.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(o);typeof t=="function"&&c.forEach(function(X){t[X]=t}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let l=e.level||"info",d=Object.create(t);d.log||(d.log=et),wo(d,c,t),Sn({},d),Object.defineProperty(d,"levelVal",{get:f}),Object.defineProperty(d,"level",{get:G,set:I});let p={transmit:r,serialize:s,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:c,timestamp:Oo(e),messageKey:e.messageKey||"msg",onChild:e.onChild||et};d.levels=vo(e),d.level=l,d.isLevelEnabled=function(X){return this.levels.values[X]?this.levels.values[X]>=this.levels.values[this.level]:!1},d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=et,d.serializers=n,d._serialize=s,d._stdErrSerialize=a,d.child=function(...X){return oe.call(this,p,...X)},r&&(d._logEvent=wr());function f(){return De(this.level,this)}function G(){return this._level}function I(X){if(X!=="silent"&&!this.levels.values[X])throw Error("unknown level "+X);this._level=X,Ze(this,p,d,"error"),Ze(this,p,d,"fatal"),Ze(this,p,d,"warn"),Ze(this,p,d,"info"),Ze(this,p,d,"debug"),Ze(this,p,d,"trace"),o.forEach(H=>{Ze(this,p,d,H)})}function oe(X,H,Q){if(!H)throw new Error("missing bindings for child Pino");Q=Q||{},s&&H.serializers&&(Q.serializers=H.serializers);let ie=Q.serializers;if(s&&ie){var fe=Object.assign({},n,ie),Ve=e.browser.serialize===!0?Object.keys(fe):s;delete H.serializers,vr([H],Ve,fe,this._stdErrSerialize)}function _t(Et){this._childLevel=(Et._childLevel|0)+1,this.bindings=H,fe&&(this.serializers=fe,this._serialize=Ve),r&&(this._logEvent=wr([].concat(Et._logEvent.bindings,H)))}_t.prototype=this;let st=new _t(this);return Sn(this,st),st.child=function(...Et){return oe.call(this,X,...Et)},st.level=Q.level||this.level,X.onChild(st),st}return d}function vo(e){let r=e.customLevels||{},t=Object.assign({},Oe.levels.values,r),n=Object.assign({},Oe.levels.labels,To(r));return{values:t,labels:n}}function To(e){let r={};return Object.keys(e).forEach(function(t){r[e[t]]=t}),r}Oe.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Oe.stdSerializers=yo;Oe.stdTimeFunctions=Object.assign({},{nullTime:Tn,epochTime:Nn,unixTime:Po,isoTime:Uo});function No(e){let r=[];e.bindings&&r.push(e.bindings);let t=e[Ar];for(;t.parent;)t=t.parent,t.logger.bindings&&r.push(t.logger.bindings);return r.reverse()}function Ze(e,r,t,n){if(Object.defineProperty(e,n,{value:De(e.level,t)>De(n,t)?et:t[Sr][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===et){if(!r.transmit)return;let a=r.transmit.level||e.level,o=De(a,t);if(De(n,t)<o)return}e[n]=Io(e,r,t,n);let s=No(e);s.length!==0&&(e[n]=Ro(s,e[n]))}function Ro(e,r){return function(){return r.apply(this,[...e,...arguments])}}function Io(e,r,t,n){return(function(s){return function(){let o=r.timestamp(),c=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===pt?pt:this;for(var d=0;d<c.length;d++)c[d]=arguments[d];var p=!1;if(r.serialize&&(vr(c,this._serialize,this.serializers,this._stdErrSerialize),p=!0),r.asObject||r.formatters?s.call(l,...bo(this,n,c,o,r)):s.apply(l,c),r.transmit){let f=r.transmit.level||e._level,G=De(f,t),I=De(n,t);if(I<G)return;ko(this,{ts:o,methodLevel:n,methodValue:I,transmitLevel:f,transmitValue:t.levels.values[r.transmit.level||e._level],send:r.transmit.send,val:De(e._level,t)},c,p)}}})(e[Sr][n])}function bo(e,r,t,n,s){let{level:a,log:o=f=>f}=s.formatters||{},c=t.slice(),l=c[0],d={},p=(e._childLevel|0)+1;if(p<1&&(p=1),n&&(d.time=n),a){let f=a(r,e.levels.values[r]);Object.assign(d,f)}else d.level=e.levels.values[r];if(s.asObjectBindingsOnly){if(l!==null&&typeof l=="object")for(;p--&&typeof c[0]=="object";)Object.assign(d,c.shift());return[o(d),...c]}else{if(l!==null&&typeof l=="object"){for(;p--&&typeof c[0]=="object";)Object.assign(d,c.shift());l=c.length?wn(c.shift(),c):void 0}else typeof l=="string"&&(l=wn(c.shift(),c));return l!==void 0&&(d[s.messageKey]=l),[o(d)]}}function vr(e,r,t,n){for(let s in e)if(n&&e[s]instanceof Error)e[s]=Oe.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s])&&r)for(let a in e[s])r.indexOf(a)>-1&&a in t&&(e[s][a]=t[a](e[s][a]))}function ko(e,r,t,n=!1){let s=r.send,a=r.ts,o=r.methodLevel,c=r.methodValue,l=r.val,d=e._logEvent.bindings;n||vr(t,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=t.filter(function(p){return d.indexOf(p)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=c,s(o,e._logEvent,l),e._logEvent=wr(d)}function wr(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function vn(e){let r={type:e.constructor.name,msg:e.message,stack:e.stack};for(let t in e)r[t]===void 0&&(r[t]=e[t]);return r}function Oo(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Tn:Nn}function Ft(){return{}}function yr(e){return e}function et(){}function Tn(){return!1}function Nn(){return Date.now()}function Po(){return Math.round(Date.now()/1e3)}function Uo(){return new Date(Date.now()).toISOString()}function xo(){function e(r){return typeof r<"u"&&r}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Bt.exports.default=Oe;Bt.exports.pino=Oe});var tr=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Bi=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Wi="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",se={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:tr,SECURE_SITE_DASHBOARD:`${tr}/dashboard`,SECURE_SITE_FAVICON:`${tr}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD\u20AE0"]},BALANCE_SUPPORTED_CHAINS:[k.CHAIN.EVM,k.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[k.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[k.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};var _={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5},isCacheExpired(e,r){return Date.now()-e>r},getActiveNetworkProps(){let e=_.getActiveNamespace(),r=_.getActiveCaipNetworkId(),t=r?r.split(":")[1]:void 0,n=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:e,caipNetworkId:r,chainId:n}},setWalletConnectDeepLink({name:e,href:r}){try{v.setItem(N.DEEPLINK_CHOICE,JSON.stringify({href:r,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=v.getItem(N.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{v.removeItem(N.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{v.setItem(N.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{v.setItem(N.ACTIVE_CAIP_NETWORK_ID,e),_.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return v.getItem(N.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{v.removeItem(N.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let r=yt(e);v.removeItem(r)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let r=_.getRecentWallets();r.find(n=>n.id===e.id)||(r.unshift(e),r.length>2&&r.pop(),v.setItem(N.RECENT_WALLETS,JSON.stringify(r)),v.setItem(N.RECENT_WALLET,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=v.getItem(N.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{let e=v.getItem(N.RECENT_WALLET);return e?JSON.parse(e):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{v.removeItem(N.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(e,r){try{let t=yt(e);v.setItem(t,r)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return v.getItem(N.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let r=yt(e);return v.getItem(r)}catch{console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{v.setItem(N.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return v.getItem(N.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{v.removeItem(N.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return v.getItem(N.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return v.getItem(N.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(e){try{v.setItem(N.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return v.getItem(N.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=v.getItem(N.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{let r=Array.from(new Set(e));v.setItem(N.CONNECTED_NAMESPACES,r.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let r=_.getConnectedNamespaces();r.includes(e)||(r.push(e),_.setConnectedNamespaces(r))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let r=_.getConnectedNamespaces(),t=r.indexOf(e);t>-1&&(r.splice(t,1),_.setConnectedNamespaces(r))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return v.getItem(N.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{v.setItem(N.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{v.removeItem(N.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let r=v.getItem(N.PORTFOLIO_CACHE);e=r?JSON.parse(r):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let r=_.getBalanceCache();v.setItem(N.PORTFOLIO_CACHE,JSON.stringify(h(u({},r),{[e]:void 0})))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=_.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;_.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let r=_.getBalanceCache();r[e.caipAddress]=e,v.setItem(N.PORTFOLIO_CACHE,JSON.stringify(r))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let r=v.getItem(N.NATIVE_BALANCE_CACHE);e=r?JSON.parse(r):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let r=_.getBalanceCache();v.setItem(N.NATIVE_BALANCE_CACHE,JSON.stringify(h(u({},r),{[e]:void 0})))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=_.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),_.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let r=_.getNativeBalanceCache();r[e.caipAddress]=e,v.setItem(N.NATIVE_BALANCE_CACHE,JSON.stringify(r))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let r=v.getItem(N.ENS_CACHE);e=r?JSON.parse(r):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=_.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;_.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let r=_.getEnsCache();r[e.address]=e,v.setItem(N.ENS_CACHE,JSON.stringify(r))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let r=_.getEnsCache();v.setItem(N.ENS_CACHE,JSON.stringify(h(u({},r),{[e]:void 0})))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let r=v.getItem(N.IDENTITY_CACHE);e=r?JSON.parse(r):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=_.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;_.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let r=_.getIdentityCache();r[e.address]={identity:e.identity,timestamp:e.timestamp},v.setItem(N.IDENTITY_CACHE,JSON.stringify(r))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let r=_.getIdentityCache();v.setItem(N.IDENTITY_CACHE,JSON.stringify(h(u({},r),{[e]:void 0})))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{v.removeItem(N.PORTFOLIO_CACHE),v.removeItem(N.NATIVE_BALANCE_CACHE),v.removeItem(N.ENS_CACHE),v.removeItem(N.IDENTITY_CACHE),v.removeItem(N.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{v.setItem(N.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=v.getItem(N.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,r){try{let t=_.getConnections(),n=t[r]??[],s=new Map;for(let o of n)s.set(o.connectorId,u({},o));for(let o of e){let c=s.get(o.connectorId),l=o.connectorId===k.CONNECTOR_ID.AUTH;if(c&&!l){let d=new Set(c.accounts.map(f=>f.address.toLowerCase())),p=o.accounts.filter(f=>!d.has(f.address.toLowerCase()));c.accounts.push(...p)}else s.set(o.connectorId,u({},o))}let a=h(u({},t),{[r]:Array.from(s.values())});v.setItem(N.CONNECTIONS,JSON.stringify(a))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{let e=v.getItem(N.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:r,namespace:t}){try{let n=_.getConnections(),s=n[t]??[],a=new Map(s.map(c=>[c.connectorId,c])),o=a.get(e);o&&(o.accounts.filter(l=>l.address.toLowerCase()!==r.toLowerCase()).length===0?a.delete(e):a.set(e,h(u({},o),{accounts:o.accounts.filter(l=>l.address.toLowerCase()!==r.toLowerCase())}))),v.setItem(N.CONNECTIONS,JSON.stringify(h(u({},n),{[t]:Array.from(a.values())})))}catch{console.error(`Unable to remove address "${r}" from connector "${e}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{let e=v.getItem(N.DISCONNECTED_CONNECTOR_IDS);return e?JSON.parse(e):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,r){try{let t=_.getDisconnectedConnectorIds(),n=t[r]??[];n.push(e),v.setItem(N.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(h(u({},t),{[r]:Array.from(new Set(n))})))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${r}"`)}},removeDisconnectedConnectorId(e,r){try{let t=_.getDisconnectedConnectorIds(),n=t[r]??[];n=n.filter(s=>s.toLowerCase()!==e.toLowerCase()),v.setItem(N.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(h(u({},t),{[r]:Array.from(new Set(n))})))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${r}"`)}},isConnectorDisconnected(e,r){try{return(_.getDisconnectedConnectorIds()[r]??[]).some(s=>s.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${r}"`)}return!1},getTransactionsCache(){try{let e=v.getItem(N.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:e,chainId:r=""}){try{let n=_.getTransactionsCache()[e]?.[r];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;_.removeTransactionsCache({address:e,chainId:r})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:e,chainId:r="",timestamp:t,transactions:n}){try{let s=_.getTransactionsCache();s[e]=h(u({},s[e]),{[r]:{timestamp:t,transactions:n}}),v.setItem(N.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:e,chainId:r,timestamp:t,transactions:n})}},removeTransactionsCache({address:e,chainId:r}){try{let n=_.getTransactionsCache(),t=n?.[e]||{},{[r]:a}=t,o=Ie(t,[Hr(r)]);v.setItem(N.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(h(u({},n),{[e]:o})))}catch{console.info("Unable to remove transactions cache",{address:e,chainId:r})}},getTokenPriceCache(){try{let e=v.getItem(N.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(e){try{let t=_.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;_.removeTokenPriceCache(e)}catch{console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache(e){try{let r=_.getTokenPriceCache();r[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},v.setItem(N.TOKEN_PRICE_CACHE,JSON.stringify(r))}catch{console.info("Unable to update token price cache",e)}},removeTokenPriceCache(e){try{let r=_.getTokenPriceCache();v.setItem(N.TOKEN_PRICE_CACHE,JSON.stringify(h(u({},r),{[e.join(",")]:void 0})))}catch{console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion(){try{let e=this.getLatestAppKitVersionCache(),r=e?.version;return r&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion)?r:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{let e=v.getItem(N.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(e){try{let r=_.getLatestAppKitVersionCache();r.timestamp=e.timestamp,r.version=e.version,v.setItem(N.LATEST_APPKIT_VERSION,JSON.stringify(r))}catch{console.info("Unable to update latest AppKit version on local storage",e)}}};var O={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(e,r=""){return e?.caipNetworkId.toLocaleLowerCase().includes(r.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return O.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(e){return e?e-Date.now()<=se.TEN_SEC_MS:!0},isAllowedRetry(e,r=se.ONE_SEC_MS){return Date.now()-e>=r},copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(O.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0],r="https://app.safe.global";if(e){let t=new URL(e),n=new URL(r);return t.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+se.FOUR_MINUTES_MS},getNetworkId(e){return e?.split(":")[1]},getPlainAddress(e){return e?.split(":")[2]},async wait(e){return new Promise(r=>{setTimeout(r,e)})},debounce(e,r=500){let t;return(...n)=>{function s(){e(...n)}t&&clearTimeout(t),t=setTimeout(s,r)}},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl(e,r,t=null){if(O.isHttpUrl(e))return this.formatUniversalUrl(e,r);let n=e,s=t;n&&(n.includes("://")||(n=e.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`)),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(r=encodeURIComponent(r));let a=encodeURIComponent(r);return{redirect:`${n}wc?uri=${a}`,redirectUniversalLink:s?`${s}wc?uri=${a}`:void 0,href:n}},formatUniversalUrl(e,r){if(!O.isHttpUrl(e))return this.formatNativeUrl(e,r);let t=e;t.endsWith("/")||(t=`${t}/`);let n=encodeURIComponent(r);return{redirect:`${t}wc?uri=${n}`,href:t}},getOpenTargetForPlatform(e){return e==="popupWindow"?e:this.isTelegram()?_.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,r,t){window?.open(e,this.getOpenTargetForPlatform(r),t||"noreferrer noopener")},returnOpenHref(e,r,t){return window?.open(e,this.getOpenTargetForPlatform(r),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;let e=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,r=window?.navigator?.standalone;return!!(e||r)},async preloadImage(e){let r=new Promise((t,n)=>{let s=new Image;s.onload=t,s.onerror=n,s.crossOrigin="anonymous",s.src=e});return Promise.race([r,O.wait(2e3)])},parseBalance(e,r){let t="0.000";if(typeof e=="string"){let l=Number(e);if(!isNaN(l)){let d=(Math.floor(l*1e3)/1e3).toFixed(3);d&&(t=d)}}let[n,s]=t.split("."),a=n||"0",o=s||"000";return{formattedText:`${a}.${o}${r?` ${r}`:""}`,value:a,decimals:o,symbol:r}},getApiUrl(){return k.W3M_API_URL},getBlockchainApiUrl(){return k.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return k.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})},parseError(e){return typeof e=="string"?e:typeof e?.issues?.[0]?.message=="string"?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks(e,r=[]){let t={};return r&&e&&(e.forEach((n,s)=>{t[n]=s}),r.sort((n,s)=>{let a=t[n.id],o=t[s.id];return a!==void 0&&o!==void 0?a-o:a!==void 0?-1:o!==void 0?1:0})),r},calculateBalance(e){let r=0;for(let t of e)r+=t.value??0;return r},formatTokenBalance(e){let r=e.toFixed(2),[t,n]=r.split(".");return{dollars:t,pennies:n}},isAddress(e,r="eip155"){switch(r){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,r){let t=new Set;return e.filter(n=>{let s=n[r];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(e,r,t){let s=e.length===0?se.ADAPTER_TYPES.UNIVERSAL:e.map(a=>a.adapterType).join(",");return`${r}-${s}-${t}`},createAccount(e,r,t,n,s){return{namespace:e,address:r,type:t,publicKey:n,path:s}},isCaipAddress(e){if(typeof e!="string")return!1;let r=e.split(":"),t=r[0];return r.filter(Boolean).length===3&&t in k.CHAIN_NAME_MAP},getAccount(e){return e?typeof e=="string"?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0}},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let r=`--${encodeURIComponent(window?.location.href)}`,t="state=";if(new URL(e).host==="auth.magic.link"){let s="provider_authorization_url=",a=e.substring(e.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(a),t,r);return e.replace(a,encodeURIComponent(o))}return this.injectIntoUrl(e,t,r)},injectIntoUrl(e,r,t){let n=e.indexOf(r);if(n===-1)throw new Error(`${r} parameter not found in the URL: ${e}`);let s=e.indexOf("&",n),a=r.length,o=s!==-1?s:e.length,c=e.substring(0,n+a),l=e.substring(n+a,o),d=e.substring(s),p=l+t;return c+p+d}};var Xn="https://secure.walletconnect.org/sdk",Jr=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Xn,Xr=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Qr=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",E={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},re={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};var rr={address:/^0x(?:[A-Fa-f0-9]{40})$/u,transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u};var ce={set(e,r){Ce.isClient&&localStorage.setItem(`${E.STORAGE_KEY}${e}`,r)},get(e){return Ce.isClient?localStorage.getItem(`${E.STORAGE_KEY}${e}`):null},delete(e,r){Ce.isClient&&(r?localStorage.removeItem(e):localStorage.removeItem(`${E.STORAGE_KEY}${e}`))}};var wt=30*1e3,Ce={checkIfAllowedToTriggerEmail(){let e=ce.get(E.LAST_EMAIL_LOGIN_TIME);if(e){let r=Date.now()-Number(e);if(r<wt){let t=Math.ceil((wt-r)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){let e=ce.get(E.LAST_EMAIL_LOGIN_TIME);if(e){let r=Date.now()-Number(e);if(r<wt)return Math.ceil((wt-r)/1e3)}return 0},checkIfRequestExists(e){return re.NOT_SAFE_RPC_METHODS.includes(e.method)||re.SAFE_RPC_METHODS.includes(e.method)},getResponseType(e){return typeof e=="string"&&(e?.match(rr.transactionHash)||e?.match(rr.signedMessage))?E.RPC_RESPONSE_TYPE_TX:E.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(e){return re.SAFE_RPC_METHODS.includes(e.method)},isClient:typeof window<"u"};var $;(function(e){e.assertEqual=s=>s;function r(s){}e.assertIs=r;function t(s){throw new Error}e.assertNever=t,e.arrayToEnum=s=>{let a={};for(let o of s)a[o]=o;return a},e.getValidEnumValues=s=>{let a=e.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(let c of a)o[c]=s[c];return e.objectValues(o)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},e.find=(s,a)=>{for(let o of s)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})($||($={}));var rn=(function(e){return e.mergeShapes=(r,t)=>u(u({},r),t),e})(rn||{}),y=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Me=e=>{switch(typeof e){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(e)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(e)?y.array:e===null?y.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?y.promise:typeof Map<"u"&&e instanceof Map?y.map:typeof Set<"u"&&e instanceof Set?y.set:typeof Date<"u"&&e instanceof Date?y.date:y.object;default:return y.unknown}},g=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Qn=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ke=(()=>{class e extends Error{constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let n=t||function(o){return o.message},s={_errors:[]},a=o=>{for(let c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(a);else if(c.code==="invalid_return_type")a(c.returnTypeError);else if(c.code==="invalid_arguments")a(c.argumentsError);else if(c.path.length===0)s._errors.push(n(c));else{let l=s,d=0;for(;d<c.path.length;){let p=c.path[d];d===c.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(n(c))):l[p]=l[p]||{_errors:[]},l=l[p],d++}}};return a(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){let n={},s=[];for(let a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}return e.create=r=>new e(r),e})(),it=(e,r)=>{let t;switch(e.code){case g.invalid_type:e.received===y.undefined?t="Required":t=`Expected ${e.expected}, received ${e.received}`;break;case g.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(e.expected,$.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(e.keys,", ")}`;break;case g.invalid_union:t="Invalid input";break;case g.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(e.options)}`;break;case g.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(e.options)}, received '${e.received}'`;break;case g.invalid_arguments:t="Invalid function arguments";break;case g.invalid_return_type:t="Invalid function return type";break;case g.invalid_date:t="Invalid date";break;case g.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(t=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?t=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?t=`Invalid input: must end with "${e.validation.endsWith}"`:$.assertNever(e.validation):e.validation!=="regex"?t=`Invalid ${e.validation}`:t="Invalid";break;case g.too_small:e.type==="array"?t=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?t=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?t=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?t=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:t="Invalid input";break;case g.too_big:e.type==="array"?t=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?t=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?t=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?t=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?t=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:t="Invalid input";break;case g.custom:t="Invalid input";break;case g.invalid_intersection_types:t="Intersection results could not be merged";break;case g.not_multiple_of:t=`Number must be a multiple of ${e.multipleOf}`;break;case g.not_finite:t="Number must be finite";break;default:t=r.defaultError,$.assertNever(e)}return{message:t}},nn=it;function es(e){nn=e}function vt(){return nn}var Tt=e=>{let{data:r,path:t,errorMaps:n,issueData:s}=e,a=[...t,...s.path||[]],o=h(u({},s),{path:a}),c="",l=n.filter(d=>!!d).slice().reverse();for(let d of l)c=d(o,{data:r,defaultError:c}).message;return h(u({},s),{path:a,message:s.message||c})},ts=[];function S(e,r){let t=Tt({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,vt(),it].filter(n=>!!n)});e.common.issues.push(t)}var me=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,t){let n=[];for(let s of t){if(s.status==="aborted")return F;s.status==="dirty"&&r.dirty(),n.push(s.value)}return{status:r.value,value:n}}static async mergeObjectAsync(r,t){let n=[];for(let s of t)n.push({key:await s.key,value:await s.value});return e.mergeObjectSync(r,n)}static mergeObjectSync(r,t){let n={};for(let s of t){let{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return F;a.status==="dirty"&&r.dirty(),o.status==="dirty"&&r.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:r.value,value:n}}},F=Object.freeze({status:"aborted"}),sn=e=>({status:"dirty",value:e}),ge=e=>({status:"valid",value:e}),sr=e=>e.status==="aborted",ar=e=>e.status==="dirty",ct=e=>e.status==="valid",Nt=e=>typeof Promise<"u"&&e instanceof Promise,P=(function(e){return e.errToObj=r=>typeof r=="string"?{message:r}:r||{},e.toString=r=>typeof r=="string"?r:r?.message,e})(P||{}),Ne=class{constructor(r,t,n,s){this._cachedPath=[],this.parent=r,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},en=(e,r)=>{if(ct(r))return{success:!0,data:r.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ke(e.common.issues);return this._error=t,this._error}}};function W(e){if(!e)return{};let{errorMap:r,invalid_type_error:t,required_error:n,description:s}=e;if(r&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:s}:{errorMap:(o,c)=>o.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:n??c.defaultError}:{message:t??c.defaultError},description:s}}var j=class{constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(r){return Me(r.data)}_getOrReturnCtx(r,t){return t||{common:r.parent.common,data:r.data,parsedType:Me(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new me,ctx:{common:r.parent.common,data:r.data,parsedType:Me(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){let t=this._parse(r);if(Nt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(r){let t=this._parse(r);return Promise.resolve(t)}parse(r,t){let n=this.safeParse(r,t);if(n.success)return n.data;throw n.error}safeParse(r,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Me(r)},a=this._parseSync({data:r,path:s.path,parent:s});return en(s,a)}async parseAsync(r,t){let n=await this.safeParseAsync(r,t);if(n.success)return n.data;throw n.error}async safeParseAsync(r,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:Me(r)},s=this._parse({data:r,path:n.path,parent:n}),a=await(Nt(s)?s:Promise.resolve(s));return en(n,a)}refine(r,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{let o=r(s),c=()=>a.addIssue(u({code:g.custom},n(s)));return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(r,t){return this._refinement((n,s)=>r(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(r){return new Ke({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}optional(){return Ge.create(this,this._def)}nullable(){return dt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return lt.create(this,this._def)}promise(){return xt.create(this,this._def)}or(r){return mr.create([this,r],this._def)}and(r){return fr.create(this,r,this._def)}transform(r){return new Ke(h(u({},W(this._def)),{schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:r}}))}default(r){let t=typeof r=="function"?r:()=>r;return new _r(h(u({},W(this._def)),{innerType:this,defaultValue:t,typeName:L.ZodDefault}))}brand(){return new Ot(u({typeName:L.ZodBranded,type:this},W(this._def)))}catch(r){let t=typeof r=="function"?r:()=>r;return new un(h(u({},W(this._def)),{innerType:this,catchValue:t,typeName:L.ZodCatch}))}describe(r){let t=this.constructor;return new t(h(u({},this._def),{description:r}))}pipe(r){return ut.create(this,r)}readonly(){return mn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},rs=/^c[^\s-]{8,}$/i,ns=/^[a-z][a-z0-9]*$/,ss=/^[0-9A-HJKMNP-TV-Z]{26}$/,as=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,os=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,is="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",nr,cs=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ls=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ds=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function us(e,r){return!!((r==="v4"||!r)&&cs.test(e)||(r==="v6"||!r)&&ls.test(e))}var Pt=(()=>{class e extends j{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==y.string){let o=this._getOrReturnCtx(t);return S(o,{code:g.invalid_type,expected:y.string,received:o.parsedType}),F}let s=new me,a;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(a=this._getOrReturnCtx(t,a),S(a,{code:g.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")t.data.length>o.value&&(a=this._getOrReturnCtx(t,a),S(a,{code:g.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let c=t.data.length>o.value,l=t.data.length<o.value;(c||l)&&(a=this._getOrReturnCtx(t,a),c?S(a,{code:g.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&S(a,{code:g.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")os.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"email",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")nr||(nr=new RegExp(is,"u")),nr.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"emoji",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")as.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"uuid",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")rs.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"cuid",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")ns.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"cuid2",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")ss.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"ulid",code:g.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),S(a,{validation:"url",code:g.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"regex",code:g.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(t,a),S(a,{code:g.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(a=this._getOrReturnCtx(t,a),S(a,{code:g.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(a=this._getOrReturnCtx(t,a),S(a,{code:g.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?ds(o).test(t.data)||(a=this._getOrReturnCtx(t,a),S(a,{code:g.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="ip"?us(t.data,o.version)||(a=this._getOrReturnCtx(t,a),S(a,{validation:"ip",code:g.invalid_string,message:o.message}),s.dirty()):$.assertNever(o);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(a=>t.test(a),u({validation:n,code:g.invalid_string},P.errToObj(s)))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(u({kind:"email"},P.errToObj(t)))}url(t){return this._addCheck(u({kind:"url"},P.errToObj(t)))}emoji(t){return this._addCheck(u({kind:"emoji"},P.errToObj(t)))}uuid(t){return this._addCheck(u({kind:"uuid"},P.errToObj(t)))}cuid(t){return this._addCheck(u({kind:"cuid"},P.errToObj(t)))}cuid2(t){return this._addCheck(u({kind:"cuid2"},P.errToObj(t)))}ulid(t){return this._addCheck(u({kind:"ulid"},P.errToObj(t)))}ip(t){return this._addCheck(u({kind:"ip"},P.errToObj(t)))}datetime(t){var n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck(u({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(n=t?.offset)!==null&&n!==void 0?n:!1},P.errToObj(t?.message)))}regex(t,n){return this._addCheck(u({kind:"regex",regex:t},P.errToObj(n)))}includes(t,n){return this._addCheck(u({kind:"includes",value:t,position:n?.position},P.errToObj(n?.message)))}startsWith(t,n){return this._addCheck(u({kind:"startsWith",value:t},P.errToObj(n)))}endsWith(t,n){return this._addCheck(u({kind:"endsWith",value:t},P.errToObj(n)))}min(t,n){return this._addCheck(u({kind:"min",value:t},P.errToObj(n)))}max(t,n){return this._addCheck(u({kind:"max",value:t},P.errToObj(n)))}length(t,n){return this._addCheck(u({kind:"length",value:t},P.errToObj(n)))}nonempty(t){return this.min(1,P.errToObj(t))}trim(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}return e.create=r=>{var t;return new e(u({checks:[],typeName:L.ZodString,coerce:(t=r?.coerce)!==null&&t!==void 0?t:!1},W(r)))},e})();function ps(e,r){let t=(e.toString().split(".")[1]||"").length,n=(r.toString().split(".")[1]||"").length,s=t>n?t:n,a=parseInt(e.toFixed(s).replace(".","")),o=parseInt(r.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}var ir=(()=>{class e extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==y.number){let o=this._getOrReturnCtx(t);return S(o,{code:g.invalid_type,expected:y.number,received:o.parsedType}),F}let s,a=new me;for(let o of this._def.checks)o.kind==="int"?$.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),S(s,{code:g.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?ps(t.data,o.value)!==0&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),S(s,{code:g.not_finite,message:o.message}),a.dirty()):$.assertNever(o);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,P.toString(n))}gt(t,n){return this.setLimit("min",t,!1,P.toString(n))}lte(t,n){return this.setLimit("max",t,!0,P.toString(n))}lt(t,n){return this.setLimit("max",t,!1,P.toString(n))}setLimit(t,n,s,a){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:P.toString(a)}]}))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:P.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:P.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:P.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:P.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:P.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:P.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:P.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:P.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:P.toString(t)})}get minValue(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&$.isInteger(t.value))}get isFinite(){let t=null,n=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}return e.create=r=>new e(u({checks:[],typeName:L.ZodNumber,coerce:r?.coerce||!1},W(r))),e})(),cr=(()=>{class e extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==y.bigint){let o=this._getOrReturnCtx(t);return S(o,{code:g.invalid_type,expected:y.bigint,received:o.parsedType}),F}let s,a=new me;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),S(s,{code:g.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):$.assertNever(o);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,P.toString(n))}gt(t,n){return this.setLimit("min",t,!1,P.toString(n))}lte(t,n){return this.setLimit("max",t,!0,P.toString(n))}lt(t,n){return this.setLimit("max",t,!1,P.toString(n))}setLimit(t,n,s,a){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:P.toString(a)}]}))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:P.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:P.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:P.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:P.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:P.toString(n)})}get minValue(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}return e.create=r=>{var t;return new e(u({checks:[],typeName:L.ZodBigInt,coerce:(t=r?.coerce)!==null&&t!==void 0?t:!1},W(r)))},e})(),lr=(()=>{class e extends j{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==y.boolean){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.boolean,received:s.parsedType}),F}return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodBoolean,coerce:r?.coerce||!1},W(r))),e})(),dr=(()=>{class e extends j{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==y.date){let o=this._getOrReturnCtx(t);return S(o,{code:g.invalid_type,expected:y.date,received:o.parsedType}),F}if(isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return S(o,{code:g.invalid_date}),F}let s=new me,a;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(a=this._getOrReturnCtx(t,a),S(a,{code:g.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(a=this._getOrReturnCtx(t,a),S(a,{code:g.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):$.assertNever(o);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:P.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:P.toString(n)})}get minDate(){let t=null;for(let n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}return e.create=r=>new e(u({checks:[],coerce:r?.coerce||!1,typeName:L.ZodDate},W(r))),e})(),an=(()=>{class e extends j{_parse(t){if(this._getType(t)!==y.symbol){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.symbol,received:s.parsedType}),F}return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodSymbol},W(r))),e})(),ur=(()=>{class e extends j{_parse(t){if(this._getType(t)!==y.undefined){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.undefined,received:s.parsedType}),F}return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodUndefined},W(r))),e})(),pr=(()=>{class e extends j{_parse(t){if(this._getType(t)!==y.null){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.null,received:s.parsedType}),F}return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodNull},W(r))),e})(),Rt=(()=>{class e extends j{constructor(){super(...arguments),this._any=!0}_parse(t){return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodAny},W(r))),e})(),ot=(()=>{class e extends j{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodUnknown},W(r))),e})(),He=(()=>{class e extends j{_parse(t){let n=this._getOrReturnCtx(t);return S(n,{code:g.invalid_type,expected:y.never,received:n.parsedType}),F}}return e.create=r=>new e(u({typeName:L.ZodNever},W(r))),e})(),on=(()=>{class e extends j{_parse(t){if(this._getType(t)!==y.undefined){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.void,received:s.parsedType}),F}return ge(t.data)}}return e.create=r=>new e(u({typeName:L.ZodVoid},W(r))),e})(),lt=(()=>{class e extends j{_parse(t){let{ctx:n,status:s}=this._processInputParams(t),a=this._def;if(n.parsedType!==y.array)return S(n,{code:g.invalid_type,expected:y.array,received:n.parsedType}),F;if(a.exactLength!==null){let c=n.data.length>a.exactLength.value,l=n.data.length<a.exactLength.value;(c||l)&&(S(n,{code:c?g.too_big:g.too_small,minimum:l?a.exactLength.value:void 0,maximum:c?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(S(n,{code:g.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(S(n,{code:g.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((c,l)=>a.type._parseAsync(new Ne(n,c,n.path,l)))).then(c=>me.mergeArray(s,c));let o=[...n.data].map((c,l)=>a.type._parseSync(new Ne(n,c,n.path,l)));return me.mergeArray(s,o)}get element(){return this._def.type}min(t,n){return new e(h(u({},this._def),{minLength:{value:t,message:P.toString(n)}}))}max(t,n){return new e(h(u({},this._def),{maxLength:{value:t,message:P.toString(n)}}))}length(t,n){return new e(h(u({},this._def),{exactLength:{value:t,message:P.toString(n)}}))}nonempty(t){return this.min(1,t)}}return e.create=(r,t)=>new e(u({type:r,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray},W(t))),e})();function Je(e){if(e instanceof Xe){let r={};for(let t in e.shape){let n=e.shape[t];r[t]=Ge.create(Je(n))}return new Xe(h(u({},e._def),{shape:()=>r}))}else return e instanceof lt?new lt(h(u({},e._def),{type:Je(e.element)})):e instanceof Ge?Ge.create(Je(e.unwrap())):e instanceof dt?dt.create(Je(e.unwrap())):e instanceof Qe?Qe.create(e.items.map(r=>Je(r))):e}var Xe=(()=>{class e extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),n=$.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==y.object){let p=this._getOrReturnCtx(t);return S(p,{code:g.invalid_type,expected:y.object,received:p.parsedType}),F}let{status:s,ctx:a}=this._processInputParams(t),{shape:o,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof He&&this._def.unknownKeys==="strip"))for(let p in a.data)c.includes(p)||l.push(p);let d=[];for(let p of c){let f=o[p],G=a.data[p];d.push({key:{status:"valid",value:p},value:f._parse(new Ne(a,G,a.path,p)),alwaysSet:p in a.data})}if(this._def.catchall instanceof He){let p=this._def.unknownKeys;if(p==="passthrough")for(let f of l)d.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(p==="strict")l.length>0&&(S(a,{code:g.unrecognized_keys,keys:l}),s.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let f of l){let G=a.data[f];d.push({key:{status:"valid",value:f},value:p._parse(new Ne(a,G,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let p=[];for(let f of d){let G=await f.key;p.push({key:G,value:await f.value,alwaysSet:f.alwaysSet})}return p}).then(p=>me.mergeObjectSync(s,p)):me.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(t){return P.errToObj,new e(u(h(u({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(n,s)=>{var a,o,c,l;let d=(c=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,s).message)!==null&&c!==void 0?c:s.defaultError;return n.code==="unrecognized_keys"?{message:(l=P.errToObj(t).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}))}strip(){return new e(h(u({},this._def),{unknownKeys:"strip"}))}passthrough(){return new e(h(u({},this._def),{unknownKeys:"passthrough"}))}extend(t){return new e(h(u({},this._def),{shape:()=>u(u({},this._def.shape()),t)}))}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>u(u({},this._def.shape()),t._def.shape()),typeName:L.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new e(h(u({},this._def),{catchall:t}))}pick(t){let n={};return $.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new e(h(u({},this._def),{shape:()=>n}))}omit(t){let n={};return $.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new e(h(u({},this._def),{shape:()=>n}))}deepPartial(){return Je(this)}partial(t){let n={};return $.objectKeys(this.shape).forEach(s=>{let a=this.shape[s];t&&!t[s]?n[s]=a:n[s]=a.optional()}),new e(h(u({},this._def),{shape:()=>n}))}required(t){let n={};return $.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof Ge;)o=o._def.innerType;n[s]=o}}),new e(h(u({},this._def),{shape:()=>n}))}keyof(){return dn($.objectKeys(this.shape))}}return e.create=(r,t)=>new e(u({shape:()=>r,unknownKeys:"strip",catchall:He.create(),typeName:L.ZodObject},W(t))),e.strictCreate=(r,t)=>new e(u({shape:()=>r,unknownKeys:"strict",catchall:He.create(),typeName:L.ZodObject},W(t))),e.lazycreate=(r,t)=>new e(u({shape:r,unknownKeys:"strip",catchall:He.create(),typeName:L.ZodObject},W(t))),e})(),mr=(()=>{class e extends j{_parse(t){let{ctx:n}=this._processInputParams(t),s=this._def.options;function a(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;let c=o.map(l=>new ke(l.ctx.common.issues));return S(n,{code:g.invalid_union,unionErrors:c}),F}if(n.common.async)return Promise.all(s.map(async o=>{let c=h(u({},n),{common:h(u({},n.common),{issues:[]}),parent:null});return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(a);{let o,c=[];for(let d of s){let p=h(u({},n),{common:h(u({},n.common),{issues:[]}),parent:null}),f=d._parseSync({data:n.data,path:n.path,parent:p});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let l=c.map(d=>new ke(d));return S(n,{code:g.invalid_union,unionErrors:l}),F}}get options(){return this._def.options}}return e.create=(r,t)=>new e(u({options:r,typeName:L.ZodUnion},W(t))),e})(),St=e=>e instanceof hr?St(e.schema):e instanceof Ke?St(e.innerType()):e instanceof gr?[e.value]:e instanceof Ut?e.options:e instanceof Cr?Object.keys(e.enum):e instanceof _r?St(e._def.innerType):e instanceof ur?[void 0]:e instanceof pr?[null]:null,It=class e extends j{_parse(r){let{ctx:t}=this._processInputParams(r);if(t.parsedType!==y.object)return S(t,{code:g.invalid_type,expected:y.object,received:t.parsedType}),F;let n=this.discriminator,s=t.data[n],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(S(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,t,n){let s=new Map;for(let a of t){let o=St(a.shape[r]);if(!o)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(let c of o){if(s.has(c))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(c)}`);s.set(c,a)}}return new e(u({typeName:L.ZodDiscriminatedUnion,discriminator:r,options:t,optionsMap:s},W(n)))}};function or(e,r){let t=Me(e),n=Me(r);if(e===r)return{valid:!0,data:e};if(t===y.object&&n===y.object){let s=$.objectKeys(r),a=$.objectKeys(e).filter(c=>s.indexOf(c)!==-1),o=u(u({},e),r);for(let c of a){let l=or(e[c],r[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(t===y.array&&n===y.array){if(e.length!==r.length)return{valid:!1};let s=[];for(let a=0;a<e.length;a++){let o=e[a],c=r[a],l=or(o,c);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===y.date&&n===y.date&&+e==+r?{valid:!0,data:e}:{valid:!1}}var fr=(()=>{class e extends j{_parse(t){let{status:n,ctx:s}=this._processInputParams(t),a=(o,c)=>{if(sr(o)||sr(c))return F;let l=or(o.value,c.value);return l.valid?((ar(o)||ar(c))&&n.dirty(),{status:n.value,value:l.data}):(S(s,{code:g.invalid_intersection_types}),F)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,c])=>a(o,c)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}return e.create=(r,t,n)=>new e(u({left:r,right:t,typeName:L.ZodIntersection},W(n))),e})(),Qe=(()=>{class e extends j{_parse(t){let{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==y.array)return S(s,{code:g.invalid_type,expected:y.array,received:s.parsedType}),F;if(s.data.length<this._def.items.length)return S(s,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&s.data.length>this._def.items.length&&(S(s,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...s.data].map((c,l)=>{let d=this._def.items[l]||this._def.rest;return d?d._parse(new Ne(s,c,s.path,l)):null}).filter(c=>!!c);return s.common.async?Promise.all(o).then(c=>me.mergeArray(n,c)):me.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new e(h(u({},this._def),{rest:t}))}}return e.create=(r,t)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new e(u({items:r,typeName:L.ZodTuple,rest:null},W(t)))},e})(),bt=class e extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){let{status:t,ctx:n}=this._processInputParams(r);if(n.parsedType!==y.object)return S(n,{code:g.invalid_type,expected:y.object,received:n.parsedType}),F;let s=[],a=this._def.keyType,o=this._def.valueType;for(let c in n.data)s.push({key:a._parse(new Ne(n,c,n.path,c)),value:o._parse(new Ne(n,n.data[c],n.path,c))});return n.common.async?me.mergeObjectAsync(t,s):me.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(r,t,n){return t instanceof j?new e(u({keyType:r,valueType:t,typeName:L.ZodRecord},W(n))):new e(u({keyType:Pt.create(),valueType:r,typeName:L.ZodRecord},W(t)))}},cn=(()=>{class e extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==y.map)return S(s,{code:g.invalid_type,expected:y.map,received:s.parsedType}),F;let a=this._def.keyType,o=this._def.valueType,c=[...s.data.entries()].map(([l,d],p)=>({key:a._parse(new Ne(s,l,s.path,[p,"key"])),value:o._parse(new Ne(s,d,s.path,[p,"value"]))}));if(s.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let d of c){let p=await d.key,f=await d.value;if(p.status==="aborted"||f.status==="aborted")return F;(p.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(p.value,f.value)}return{status:n.value,value:l}})}else{let l=new Map;for(let d of c){let p=d.key,f=d.value;if(p.status==="aborted"||f.status==="aborted")return F;(p.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(p.value,f.value)}return{status:n.value,value:l}}}}return e.create=(r,t,n)=>new e(u({valueType:t,keyType:r,typeName:L.ZodMap},W(n))),e})(),ln=(()=>{class e extends j{_parse(t){let{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==y.set)return S(s,{code:g.invalid_type,expected:y.set,received:s.parsedType}),F;let a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(S(s,{code:g.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(S(s,{code:g.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());let o=this._def.valueType;function c(d){let p=new Set;for(let f of d){if(f.status==="aborted")return F;f.status==="dirty"&&n.dirty(),p.add(f.value)}return{status:n.value,value:p}}let l=[...s.data.values()].map((d,p)=>o._parse(new Ne(s,d,s.path,p)));return s.common.async?Promise.all(l).then(d=>c(d)):c(l)}min(t,n){return new e(h(u({},this._def),{minSize:{value:t,message:P.toString(n)}}))}max(t,n){return new e(h(u({},this._def),{maxSize:{value:t,message:P.toString(n)}}))}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}return e.create=(r,t)=>new e(u({valueType:r,minSize:null,maxSize:null,typeName:L.ZodSet},W(t))),e})(),kt=class e extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(r){let{ctx:t}=this._processInputParams(r);if(t.parsedType!==y.function)return S(t,{code:g.invalid_type,expected:y.function,received:t.parsedType}),F;function n(c,l){return Tt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vt(),it].filter(d=>!!d),issueData:{code:g.invalid_arguments,argumentsError:l}})}function s(c,l){return Tt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vt(),it].filter(d=>!!d),issueData:{code:g.invalid_return_type,returnTypeError:l}})}let a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof xt){let c=this;return ge(async function(...l){let d=new ke([]),p=await c._def.args.parseAsync(l,a).catch(I=>{throw d.addIssue(n(l,I)),d}),f=await Reflect.apply(o,this,p);return await c._def.returns._def.type.parseAsync(f,a).catch(I=>{throw d.addIssue(s(f,I)),d})})}else{let c=this;return ge(function(...l){let d=c._def.args.safeParse(l,a);if(!d.success)throw new ke([n(l,d.error)]);let p=Reflect.apply(o,this,d.data),f=c._def.returns.safeParse(p,a);if(!f.success)throw new ke([s(p,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...r){return new e(h(u({},this._def),{args:Qe.create(r).rest(ot.create())}))}returns(r){return new e(h(u({},this._def),{returns:r}))}implement(r){return this.parse(r)}strictImplement(r){return this.parse(r)}static create(r,t,n){return new e(u({args:r||Qe.create([]).rest(ot.create()),returns:t||ot.create(),typeName:L.ZodFunction},W(n)))}},hr=(()=>{class e extends j{get schema(){return this._def.getter()}_parse(t){let{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}return e.create=(r,t)=>new e(u({getter:r,typeName:L.ZodLazy},W(t))),e})(),gr=(()=>{class e extends j{_parse(t){if(t.data!==this._def.value){let n=this._getOrReturnCtx(t);return S(n,{received:n.data,code:g.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:t.data}}get value(){return this._def.value}}return e.create=(r,t)=>new e(u({value:r,typeName:L.ZodLiteral},W(t))),e})();function dn(e,r){return new Ut(u({values:e,typeName:L.ZodEnum},W(r)))}var Ut=(()=>{class e extends j{_parse(t){if(typeof t.data!="string"){let n=this._getOrReturnCtx(t),s=this._def.values;return S(n,{expected:$.joinValues(s),received:n.parsedType,code:g.invalid_type}),F}if(this._def.values.indexOf(t.data)===-1){let n=this._getOrReturnCtx(t),s=this._def.values;return S(n,{received:n.data,code:g.invalid_enum_value,options:s}),F}return ge(t.data)}get options(){return this._def.values}get enum(){let t={};for(let n of this._def.values)t[n]=n;return t}get Values(){let t={};for(let n of this._def.values)t[n]=n;return t}get Enum(){let t={};for(let n of this._def.values)t[n]=n;return t}extract(t){return e.create(t)}exclude(t){return e.create(this.options.filter(n=>!t.includes(n)))}}return e.create=dn,e})(),Cr=(()=>{class e extends j{_parse(t){let n=$.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==y.string&&s.parsedType!==y.number){let a=$.objectValues(n);return S(s,{expected:$.joinValues(a),received:s.parsedType,code:g.invalid_type}),F}if(n.indexOf(t.data)===-1){let a=$.objectValues(n);return S(s,{received:s.data,code:g.invalid_enum_value,options:a}),F}return ge(t.data)}get enum(){return this._def.values}}return e.create=(r,t)=>new e(u({values:r,typeName:L.ZodNativeEnum},W(t))),e})(),xt=(()=>{class e extends j{unwrap(){return this._def.type}_parse(t){let{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.promise&&n.common.async===!1)return S(n,{code:g.invalid_type,expected:y.promise,received:n.parsedType}),F;let s=n.parsedType===y.promise?n.data:Promise.resolve(n.data);return ge(s.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}return e.create=(r,t)=>new e(u({type:r,typeName:L.ZodPromise},W(t))),e})(),Ke=(()=>{class e extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:n,ctx:s}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:c=>{S(s,c),c.fatal?n.abort():n.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){let c=a.transform(s.data,o);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(c).then(l=>this._def.schema._parseAsync({data:l,path:s.path,parent:s})):this._def.schema._parseSync({data:c,path:s.path,parent:s})}if(a.type==="refinement"){let c=l=>{let d=a.refinement(l,o);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){let l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?F:(l.status==="dirty"&&n.dirty(),c(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?F:(l.status==="dirty"&&n.dirty(),c(l.value).then(()=>({status:n.value,value:l.value}))))}if(a.type==="transform")if(s.common.async===!1){let c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ct(c))return c;let l=a.transform(c.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>ct(c)?Promise.resolve(a.transform(c.value,o)).then(l=>({status:n.value,value:l})):c);$.assertNever(a)}}return e.create=(r,t,n)=>new e(u({schema:r,typeName:L.ZodEffects,effect:t},W(n))),e.createWithPreprocess=(r,t,n)=>new e(u({schema:t,effect:{type:"preprocess",transform:r},typeName:L.ZodEffects},W(n))),e})(),Ge=(()=>{class e extends j{_parse(t){return this._getType(t)===y.undefined?ge(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return e.create=(r,t)=>new e(u({innerType:r,typeName:L.ZodOptional},W(t))),e})(),dt=(()=>{class e extends j{_parse(t){return this._getType(t)===y.null?ge(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return e.create=(r,t)=>new e(u({innerType:r,typeName:L.ZodNullable},W(t))),e})(),_r=(()=>{class e extends j{_parse(t){let{ctx:n}=this._processInputParams(t),s=n.data;return n.parsedType===y.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}return e.create=(r,t)=>new e(u({innerType:r,typeName:L.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default},W(t))),e})(),un=(()=>{class e extends j{_parse(t){let{ctx:n}=this._processInputParams(t),s=h(u({},n),{common:h(u({},n.common),{issues:[]})}),a=this._def.innerType._parse({data:s.data,path:s.path,parent:u({},s)});return Nt(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ke(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ke(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}return e.create=(r,t)=>new e(u({innerType:r,typeName:L.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch},W(t))),e})(),pn=(()=>{class e extends j{_parse(t){if(this._getType(t)!==y.nan){let s=this._getOrReturnCtx(t);return S(s,{code:g.invalid_type,expected:y.nan,received:s.parsedType}),F}return{status:"valid",value:t.data}}}return e.create=r=>new e(u({typeName:L.ZodNaN},W(r))),e})(),ms=Symbol("zod_brand"),Ot=class extends j{_parse(r){let{ctx:t}=this._processInputParams(r),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},ut=class e extends j{_parse(r){let{status:t,ctx:n}=this._processInputParams(r);if(n.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?F:a.status==="dirty"?(t.dirty(),sn(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?F:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(r,t){return new e({in:r,out:t,typeName:L.ZodPipeline})}},mn=(()=>{class e extends j{_parse(t){let n=this._def.innerType._parse(t);return ct(n)&&(n.value=Object.freeze(n.value)),n}}return e.create=(r,t)=>new e(u({innerType:r,typeName:L.ZodReadonly},W(t))),e})(),fn=(e,r={},t)=>e?Rt.create().superRefine((n,s)=>{var a,o;if(!e(n)){let c=typeof r=="function"?r(n):typeof r=="string"?{message:r}:r,l=(o=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&o!==void 0?o:!0,d=typeof c=="string"?{message:c}:c;s.addIssue(h(u({code:"custom"},d),{fatal:l}))}}):Rt.create(),fs={object:Xe.lazycreate},L=(function(e){return e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly",e})(L||{}),hs=(e,r={message:`Input not instance of ${e.name}`})=>fn(t=>t instanceof e,r),hn=Pt.create,gn=ir.create,gs=pn.create,Cs=cr.create,Cn=lr.create,_s=dr.create,Es=an.create,ys=ur.create,As=pr.create,ws=Rt.create,Ss=ot.create,vs=He.create,Ts=on.create,Ns=lt.create,Rs=Xe.create,Is=Xe.strictCreate,bs=mr.create,ks=It.create,Os=fr.create,Ps=Qe.create,Us=bt.create,xs=cn.create,Ls=ln.create,Ms=kt.create,Ds=hr.create,Fs=gr.create,Bs=Ut.create,Ws=Cr.create,js=xt.create,tn=Ke.create,Vs=Ge.create,Hs=dt.create,Gs=Ke.createWithPreprocess,Ks=ut.create,Zs=()=>hn().optional(),$s=()=>gn().optional(),Ys=()=>Cn().optional(),zs={string:e=>Pt.create(h(u({},e),{coerce:!0})),number:e=>ir.create(h(u({},e),{coerce:!0})),boolean:e=>lr.create(h(u({},e),{coerce:!0})),bigint:e=>cr.create(h(u({},e),{coerce:!0})),date:e=>dr.create(h(u({},e),{coerce:!0}))},qs=F,i=Object.freeze({__proto__:null,defaultErrorMap:it,setErrorMap:es,getErrorMap:vt,makeIssue:Tt,EMPTY_PATH:ts,addIssueToContext:S,ParseStatus:me,INVALID:F,DIRTY:sn,OK:ge,isAborted:sr,isDirty:ar,isValid:ct,isAsync:Nt,get util(){return $},get objectUtil(){return rn},ZodParsedType:y,getParsedType:Me,ZodType:j,ZodString:Pt,ZodNumber:ir,ZodBigInt:cr,ZodBoolean:lr,ZodDate:dr,ZodSymbol:an,ZodUndefined:ur,ZodNull:pr,ZodAny:Rt,ZodUnknown:ot,ZodNever:He,ZodVoid:on,ZodArray:lt,ZodObject:Xe,ZodUnion:mr,ZodDiscriminatedUnion:It,ZodIntersection:fr,ZodTuple:Qe,ZodRecord:bt,ZodMap:cn,ZodSet:ln,ZodFunction:kt,ZodLazy:hr,ZodLiteral:gr,ZodEnum:Ut,ZodNativeEnum:Cr,ZodPromise:xt,ZodEffects:Ke,ZodTransformer:Ke,ZodOptional:Ge,ZodNullable:dt,ZodDefault:_r,ZodCatch:un,ZodNaN:pn,BRAND:ms,ZodBranded:Ot,ZodPipeline:ut,ZodReadonly:mn,custom:fn,Schema:j,ZodSchema:j,late:fs,get ZodFirstPartyTypeKind(){return L},coerce:zs,any:ws,array:Ns,bigint:Cs,boolean:Cn,date:_s,discriminatedUnion:ks,effect:tn,enum:Bs,function:Ms,instanceof:hs,intersection:Os,lazy:Ds,literal:Fs,map:xs,nan:gs,nativeEnum:Ws,never:vs,null:As,nullable:Hs,number:gn,object:Rs,oboolean:Ys,onumber:$s,optional:Vs,ostring:Zs,pipeline:Ks,preprocess:Gs,promise:js,record:Us,set:Ls,strictObject:Is,string:hn,symbol:Es,transformer:tn,tuple:Ps,undefined:ys,union:bs,unknown:Ss,void:Ts,NEVER:qs,ZodIssueCode:g,quotelessJson:Qn,ZodError:ke});var le=i.object({message:i.string()});function A(e){return i.literal(E[e])}var Lt=i.object({serializedMessage:i.string().optional(),accountAddress:i.string(),chainId:i.string(),notBefore:i.string().optional(),domain:i.string(),uri:i.string(),version:i.string(),nonce:i.string(),statement:i.string().optional(),resources:i.array(i.string()).optional(),requestId:i.string().optional(),issuedAt:i.string().optional(),expirationTime:i.string().optional()}),cc=i.object({accessList:i.array(i.string()),blockHash:i.string().nullable(),blockNumber:i.string().nullable(),chainId:i.string().or(i.number()),from:i.string(),gas:i.string(),hash:i.string(),input:i.string().nullable(),maxFeePerGas:i.string(),maxPriorityFeePerGas:i.string(),nonce:i.string(),r:i.string(),s:i.string(),to:i.string(),transactionIndex:i.string().nullable(),type:i.string(),v:i.string(),value:i.string()}),Js=i.object({chainId:i.string().or(i.number()),rpcUrl:i.optional(i.string())}),Xs=i.object({email:i.string().email()}),Qs=i.object({otp:i.string()}),ea=i.object({uri:i.string(),preferredAccountType:i.optional(i.string()),chainId:i.optional(i.string().or(i.number())),siwxMessage:i.optional(Lt),rpcUrl:i.optional(i.string())}),ta=i.object({chainId:i.optional(i.string().or(i.number())),preferredAccountType:i.optional(i.string()),socialUri:i.optional(i.string()),siwxMessage:i.optional(Lt),rpcUrl:i.optional(i.string())}),ra=i.object({provider:i.enum(["google","github","apple","facebook","x","discord"])}),na=i.object({email:i.string().email()}),sa=i.object({otp:i.string()}),aa=i.object({otp:i.string()}),oa=i.object({themeMode:i.optional(i.enum(["light","dark"])),themeVariables:i.optional(i.record(i.string(),i.string().or(i.number()))),w3mThemeVariables:i.optional(i.record(i.string(),i.string()))}),ia=i.object({metadata:i.object({name:i.string(),description:i.string(),url:i.string(),icons:i.array(i.string())}).optional(),sdkVersion:i.string().optional(),sdkType:i.string().optional(),projectId:i.string()}),ca=i.object({type:i.string()}),la=i.object({action:i.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),da=i.object({url:i.string()}),ua=i.object({userName:i.string()}),pa=i.object({email:i.string().optional().nullable(),address:i.string(),chainId:i.string().or(i.number()),accounts:i.array(i.object({address:i.string(),type:i.enum([re.ACCOUNT_TYPES.EOA,re.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:i.string().optional().nullable(),preferredAccountType:i.optional(i.string()),signature:i.string().optional(),message:i.string().optional(),siwxMessage:i.optional(Lt)}),ma=i.object({action:i.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),fa=i.object({email:i.string().email().optional().nullable(),address:i.string(),chainId:i.string().or(i.number()),smartAccountDeployed:i.optional(i.boolean()),accounts:i.array(i.object({address:i.string(),type:i.enum([re.ACCOUNT_TYPES.EOA,re.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:i.optional(i.string()),signature:i.string().optional(),message:i.string().optional(),siwxMessage:i.optional(Lt)}),ha=i.object({uri:i.string()}),ga=i.object({isConnected:i.boolean()}),Ca=i.object({chainId:i.string().or(i.number())}),_a=i.object({chainId:i.string().or(i.number())}),Ea=i.object({newEmail:i.string().email()}),ya=i.object({smartAccountEnabledNetworks:i.array(i.number())}),lc=i.object({address:i.string(),isDeployed:i.boolean()}),Aa=i.object({version:i.string().optional()}),wa=i.object({type:i.string(),address:i.string()}),Sa=i.any(),va=i.object({method:i.literal("eth_accounts")}),Ta=i.object({method:i.literal("eth_blockNumber")}),Na=i.object({method:i.literal("eth_call"),params:i.array(i.any())}),Ra=i.object({method:i.literal("eth_chainId")}),Ia=i.object({method:i.literal("eth_estimateGas"),params:i.array(i.any())}),ba=i.object({method:i.literal("eth_feeHistory"),params:i.array(i.any())}),ka=i.object({method:i.literal("eth_gasPrice")}),Oa=i.object({method:i.literal("eth_getAccount"),params:i.array(i.any())}),Pa=i.object({method:i.literal("eth_getBalance"),params:i.array(i.any())}),Ua=i.object({method:i.literal("eth_getBlockByHash"),params:i.array(i.any())}),xa=i.object({method:i.literal("eth_getBlockByNumber"),params:i.array(i.any())}),La=i.object({method:i.literal("eth_getBlockReceipts"),params:i.array(i.any())}),Ma=i.object({method:i.literal("eth_getBlockTransactionCountByHash"),params:i.array(i.any())}),Da=i.object({method:i.literal("eth_getBlockTransactionCountByNumber"),params:i.array(i.any())}),Fa=i.object({method:i.literal("eth_getCode"),params:i.array(i.any())}),Ba=i.object({method:i.literal("eth_getFilterChanges"),params:i.array(i.any())}),Wa=i.object({method:i.literal("eth_getFilterLogs"),params:i.array(i.any())}),ja=i.object({method:i.literal("eth_getLogs"),params:i.array(i.any())}),Va=i.object({method:i.literal("eth_getProof"),params:i.array(i.any())}),Ha=i.object({method:i.literal("eth_getStorageAt"),params:i.array(i.any())}),Ga=i.object({method:i.literal("eth_getTransactionByBlockHashAndIndex"),params:i.array(i.any())}),Ka=i.object({method:i.literal("eth_getTransactionByBlockNumberAndIndex"),params:i.array(i.any())}),Za=i.object({method:i.literal("eth_getTransactionByHash"),params:i.array(i.any())}),$a=i.object({method:i.literal("eth_getTransactionCount"),params:i.array(i.any())}),Ya=i.object({method:i.literal("eth_getTransactionReceipt"),params:i.array(i.any())}),za=i.object({method:i.literal("eth_getUncleCountByBlockHash"),params:i.array(i.any())}),qa=i.object({method:i.literal("eth_getUncleCountByBlockNumber"),params:i.array(i.any())}),Ja=i.object({method:i.literal("eth_maxPriorityFeePerGas")}),Xa=i.object({method:i.literal("eth_newBlockFilter")}),Qa=i.object({method:i.literal("eth_newFilter"),params:i.array(i.any())}),eo=i.object({method:i.literal("eth_newPendingTransactionFilter")}),to=i.object({method:i.literal("eth_sendRawTransaction"),params:i.array(i.any())}),ro=i.object({method:i.literal("eth_syncing"),params:i.array(i.any())}),no=i.object({method:i.literal("eth_uninstallFilter"),params:i.array(i.any())}),_n=i.object({method:i.literal("personal_sign"),params:i.array(i.any())}),so=i.object({method:i.literal("eth_signTypedData_v4"),params:i.array(i.any())}),ao=i.object({method:i.literal("eth_sendTransaction"),params:i.array(i.any())}),oo=i.object({method:i.literal("solana_signMessage"),params:i.object({message:i.string(),pubkey:i.string()})}),io=i.object({method:i.literal("solana_signTransaction"),params:i.object({transaction:i.string()})}),co=i.object({method:i.literal("solana_signAllTransactions"),params:i.object({transactions:i.array(i.string())})}),lo=i.object({method:i.literal("solana_signAndSendTransaction"),params:i.object({transaction:i.string(),options:i.object({skipPreflight:i.boolean().optional(),preflightCommitment:i.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:i.number().optional(),minContextSlot:i.number().optional()}).optional()})}),uo=i.object({method:i.literal("wallet_sendCalls"),params:i.array(i.object({chainId:i.string().or(i.number()).optional(),from:i.string().optional(),version:i.string().optional(),capabilities:i.any().optional(),calls:i.array(i.object({to:i.string().startsWith("0x"),data:i.string().startsWith("0x").optional(),value:i.string().optional()}))}))}),po=i.object({method:i.literal("wallet_getCallsStatus"),params:i.array(i.string())}),mo=i.object({method:i.literal("wallet_getCapabilities"),params:i.array(i.string().or(i.number()).optional()).optional()}),fo=i.object({method:i.literal("wallet_grantPermissions"),params:i.array(i.any())}),ho=i.object({method:i.literal("wallet_revokePermissions"),params:i.any()}),go=i.object({method:i.literal("wallet_getAssets"),params:i.any()}),En=i.object({token:i.string()}),w=i.object({id:i.string().optional()}),Mt={appEvent:w.extend({type:A("APP_SWITCH_NETWORK"),payload:Js}).or(w.extend({type:A("APP_CONNECT_EMAIL"),payload:Xs})).or(w.extend({type:A("APP_CONNECT_DEVICE")})).or(w.extend({type:A("APP_CONNECT_OTP"),payload:Qs})).or(w.extend({type:A("APP_CONNECT_SOCIAL"),payload:ea})).or(w.extend({type:A("APP_GET_FARCASTER_URI")})).or(w.extend({type:A("APP_CONNECT_FARCASTER")})).or(w.extend({type:A("APP_GET_USER"),payload:i.optional(ta)})).or(w.extend({type:A("APP_GET_SOCIAL_REDIRECT_URI"),payload:ra})).or(w.extend({type:A("APP_SIGN_OUT")})).or(w.extend({type:A("APP_IS_CONNECTED"),payload:i.optional(En)})).or(w.extend({type:A("APP_GET_CHAIN_ID")})).or(w.extend({type:A("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(w.extend({type:A("APP_INIT_SMART_ACCOUNT")})).or(w.extend({type:A("APP_SET_PREFERRED_ACCOUNT"),payload:ca})).or(w.extend({type:A("APP_RPC_REQUEST"),payload:_n.or(go).or(va).or(Ta).or(Na).or(Ra).or(Ia).or(ba).or(ka).or(Oa).or(Pa).or(Ua).or(xa).or(La).or(Ma).or(Da).or(Fa).or(Ba).or(Wa).or(ja).or(Va).or(Ha).or(Ga).or(Ka).or(Za).or($a).or(Ya).or(za).or(qa).or(Ja).or(Xa).or(Qa).or(eo).or(to).or(ro).or(no).or(_n).or(so).or(ao).or(oo).or(io).or(co).or(lo).or(po).or(uo).or(mo).or(fo).or(ho).and(i.object({chainId:i.string().or(i.number()).optional(),chainNamespace:i.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:i.string().optional()}))})).or(w.extend({type:A("APP_UPDATE_EMAIL"),payload:na})).or(w.extend({type:A("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:sa})).or(w.extend({type:A("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:aa})).or(w.extend({type:A("APP_SYNC_THEME"),payload:oa})).or(w.extend({type:A("APP_SYNC_DAPP_DATA"),payload:ia})).or(w.extend({type:A("APP_RELOAD")})).or(w.extend({type:A("APP_RPC_ABORT")})),frameEvent:w.extend({type:A("FRAME_SWITCH_NETWORK_ERROR"),payload:le}).or(w.extend({type:A("FRAME_SWITCH_NETWORK_SUCCESS"),payload:_a})).or(w.extend({type:A("FRAME_CONNECT_EMAIL_SUCCESS"),payload:la})).or(w.extend({type:A("FRAME_CONNECT_EMAIL_ERROR"),payload:le})).or(w.extend({type:A("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:da})).or(w.extend({type:A("FRAME_GET_FARCASTER_URI_ERROR"),payload:le})).or(w.extend({type:A("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:ua})).or(w.extend({type:A("FRAME_CONNECT_FARCASTER_ERROR"),payload:le})).or(w.extend({type:A("FRAME_CONNECT_OTP_ERROR"),payload:le})).or(w.extend({type:A("FRAME_CONNECT_OTP_SUCCESS")})).or(w.extend({type:A("FRAME_CONNECT_DEVICE_ERROR"),payload:le})).or(w.extend({type:A("FRAME_CONNECT_DEVICE_SUCCESS")})).or(w.extend({type:A("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:pa})).or(w.extend({type:A("FRAME_CONNECT_SOCIAL_ERROR"),payload:le})).or(w.extend({type:A("FRAME_GET_USER_ERROR"),payload:le})).or(w.extend({type:A("FRAME_GET_USER_SUCCESS"),payload:fa})).or(w.extend({type:A("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:le})).or(w.extend({type:A("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:ha})).or(w.extend({type:A("FRAME_SIGN_OUT_ERROR"),payload:le})).or(w.extend({type:A("FRAME_SIGN_OUT_SUCCESS")})).or(w.extend({type:A("FRAME_IS_CONNECTED_ERROR"),payload:le})).or(w.extend({type:A("FRAME_IS_CONNECTED_SUCCESS"),payload:ga})).or(w.extend({type:A("FRAME_GET_CHAIN_ID_ERROR"),payload:le})).or(w.extend({type:A("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Ca})).or(w.extend({type:A("FRAME_RPC_REQUEST_ERROR"),payload:le})).or(w.extend({type:A("FRAME_RPC_REQUEST_SUCCESS"),payload:Sa})).or(w.extend({type:A("FRAME_SESSION_UPDATE"),payload:En})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_ERROR"),payload:le})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_SUCCESS"),payload:ma})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:le})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:le})).or(w.extend({type:A("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Ea})).or(w.extend({type:A("FRAME_SYNC_THEME_ERROR"),payload:le})).or(w.extend({type:A("FRAME_SYNC_THEME_SUCCESS")})).or(w.extend({type:A("FRAME_SYNC_DAPP_DATA_ERROR"),payload:le})).or(w.extend({type:A("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(w.extend({type:A("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:ya})).or(w.extend({type:A("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:le})).or(w.extend({type:A("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:le})).or(w.extend({type:A("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:wa})).or(w.extend({type:A("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:le})).or(w.extend({type:A("FRAME_READY"),payload:Aa})).or(w.extend({type:A("FRAME_RELOAD_ERROR"),payload:le})).or(w.extend({type:A("FRAME_RELOAD_SUCCESS")}))};function Er(e,r={}){return typeof r?.type=="string"&&r?.type?.includes(e)}function Co({projectId:e,chainId:r,enableLogger:t,rpcUrl:n=k.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){let a=new URL(Jr);return a.searchParams.set("projectId",e),a.searchParams.set("chainId",String(r)),a.searchParams.set("version",Qr),a.searchParams.set("enableLogger",String(t)),a.searchParams.set("rpcUrl",n),s&&a.searchParams.set("enableCloudAuthAccount","true"),a.toString()}var Dt=class{constructor({projectId:r,isAppClient:t=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:a=!1,rpcUrl:o=k.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{let c=document.getElementById("w3m-iframe");this.iframe&&!c&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(c,l,d)=>{function p({data:f}){if(!Er(E.FRAME_EVENT_KEY,f))return;let G=Mt.frameEvent.safeParse(f);if(!G.success){console.warn("W3mFrame: invalid frame event",G.error.message);return}G.data?.id===c&&(l(G.data),window.removeEventListener("message",p))}Ce.isClient&&(window.addEventListener("message",p),d.addEventListener("abort",()=>{window.removeEventListener("message",p)}))},onFrameEvent:c=>{Ce.isClient&&window.addEventListener("message",({data:l})=>{if(!Er(E.FRAME_EVENT_KEY,l))return;let d=Mt.frameEvent.safeParse(l);d.success?c(d.data):console.warn("W3mFrame: invalid frame event",d.error.message)})},onAppEvent:c=>{Ce.isClient&&window.addEventListener("message",({data:l})=>{if(!Er(E.APP_EVENT_KEY,l))return;let d=Mt.appEvent.safeParse(l);d.success||console.warn("W3mFrame: invalid app event",d.error.message),c(l)})},postAppEvent:c=>{if(Ce.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(c,"*")}},postFrameEvent:c=>{if(Ce.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(c,"*")}}},this.projectId=r,this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),this.rpcUrl=o,t&&(this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),Ce.isClient)){let c=document.createElement("iframe");c.id="w3m-iframe",c.src=Co({projectId:r,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:a}),c.name="w3m-secure-iframe",c.style.position="fixed",c.style.zIndex="999999",c.style.display="none",c.style.border="none",c.style.animationDelay="0s, 50ms",c.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",c.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=c,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){let r=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...r)}};var Pe=Kr(Tr()),Do=Kr(Tr());var Lo=e=>JSON.stringify(e,(r,t)=>typeof t=="bigint"?t.toString()+"n":t),Mo=e=>{let r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=e.replace(r,'$1"$2n"$3');return JSON.parse(t,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function _c(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Mo(e)}catch{return e}}function Nr(e){return typeof e=="string"?e:Lo(e)||""}var Fo={level:"info"},Kt="custom_context",kr=1e3*1024,Bo=Object.defineProperty,Wo=(e,r,t)=>r in e?Bo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Fe=(e,r,t)=>Wo(e,typeof r!="symbol"?r+"":r,t),Rr=class{constructor(r){Fe(this,"nodeValue"),Fe(this,"sizeInBytes"),Fe(this,"next"),this.nodeValue=r,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},jt=class{constructor(r){Fe(this,"lengthInNodes"),Fe(this,"sizeInBytes"),Fe(this,"head"),Fe(this,"tail"),Fe(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=r,this.sizeInBytes=0}append(r){let t=new Rr(r);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${r} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let r=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=r.size}toArray(){let r=[],t=this.head;for(;t!==null;)r.push(t.value),t=t.next;return r}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let r=this.head;return{next:()=>{if(!r)return{done:!0,value:null};let t=r.value;return r=r.next,{done:!1,value:t}}}}},jo=Object.defineProperty,Vo=(e,r,t)=>r in e?jo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Wt=(e,r,t)=>Vo(e,typeof r!="symbol"?r+"":r,t),Vt=class{constructor(r,t=kr){Wt(this,"logs"),Wt(this,"level"),Wt(this,"levelValue"),Wt(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=r??"error",this.levelValue=Pe.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new jt(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(r,t){t===Pe.levels.values.error?console.error(r):t===Pe.levels.values.warn?console.warn(r):t===Pe.levels.values.debug?console.debug(r):t===Pe.levels.values.trace?console.trace(r):console.log(r)}appendToLogs(r){this.logs.append(Nr({timestamp:new Date().toISOString(),log:r}));let t=typeof r=="string"?JSON.parse(r).level:r.level;t>=this.levelValue&&this.forwardToConsole(r,t)}getLogs(){return this.logs}clearLogs(){this.logs=new jt(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(r){let t=this.getLogArray();return t.push(Nr({extraMetadata:r})),new Blob(t,{type:"application/json"})}},Ho=Object.defineProperty,Go=(e,r,t)=>r in e?Ho(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ko=(e,r,t)=>Go(e,typeof r!="symbol"?r+"":r,t),Ir=class{constructor(r,t=kr){Ko(this,"baseChunkLogger"),this.baseChunkLogger=new Vt(r,t)}write(r){this.baseChunkLogger.appendToLogs(r)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(r){return this.baseChunkLogger.logsToBlob(r)}downloadLogsBlobInBrowser(r){let t=URL.createObjectURL(this.logsToBlob(r)),n=document.createElement("a");n.href=t,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}},Zo=Object.defineProperty,$o=(e,r,t)=>r in e?Zo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Yo=(e,r,t)=>$o(e,typeof r!="symbol"?r+"":r,t),br=class{constructor(r,t=kr){Yo(this,"baseChunkLogger"),this.baseChunkLogger=new Vt(r,t)}write(r){this.baseChunkLogger.appendToLogs(r)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(r){return this.baseChunkLogger.logsToBlob(r)}},zo=Object.defineProperty,qo=Object.defineProperties,Jo=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,Qo=Object.prototype.propertyIsEnumerable,In=(e,r,t)=>r in e?zo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ht=(e,r)=>{for(var t in r||(r={}))Xo.call(r,t)&&In(e,t,r[t]);if(Rn)for(var t of Rn(r))Qo.call(r,t)&&In(e,t,r[t]);return e},Gt=(e,r)=>qo(e,Jo(r));function bn(e){return Gt(Ht({},e),{level:e?.level||Fo.level})}function ei(e,r,t=Kt){return e[t]=r,e}function ti(e,r=Kt){return e[r]||""}function ri(e,r,t=Kt){let n=ti(e,t);return n.trim()?`${n}/${r}`:r}function kn(e,r,t=Kt){let n=ri(e,r,t),s=e.child({context:n});return ei(s,n,t)}function ni(e){var r,t;let n=new Ir((r=e.opts)==null?void 0:r.level,e.maxSizeInBytes);return{logger:(0,Pe.default)(Gt(Ht({},e.opts),{level:"trace",browser:Gt(Ht({},(t=e.opts)==null?void 0:t.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function si(e){var r;let t=new br((r=e.opts)==null?void 0:r.level,e.maxSizeInBytes);return{logger:(0,Pe.default)(Gt(Ht({},e.opts),{level:"trace"}),t),chunkLoggerController:t}}function On(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ni(e):si(e)}var Zt=class{constructor(r){let t=bn({level:Xr}),{logger:n,chunkLoggerController:s}=On({opts:t});this.logger=kn(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:r})})}};var Or=class{constructor({projectId:r,chainId:t,enableLogger:n=!0,onTimeout:s,abortController:a,getActiveCaipNetwork:o,getCaipNetworks:c,enableCloudAuthAccount:l,metadata:d,sdkVersion:p,sdkType:f}){this.openRpcRequests=new Map,this.isInitialized=!1,n&&(this.w3mLogger=new Zt(r)),this.abortController=a,this.getActiveCaipNetwork=o,this.getCaipNetworks=c;let G=this.getRpcUrl(t);this.projectId=r,this.sdkVersion=p,this.sdkType=f,this.metadata=d,this.w3mFrame=new Dt({projectId:r,isAppClient:!0,chainId:t,enableLogger:n,rpcUrl:G,enableCloudAuthAccount:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(r=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_READY&&setTimeout(()=>{r()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!ce.get(E.EMAIL_LOGIN_USED_KEY)}getEmail(){return ce.get(E.EMAIL)}getUsername(){return ce.get(E.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:E.APP_RELOAD})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(r){try{Ce.checkIfAllowedToTriggerEmail(),await this.init();let t=await this.appEvent({type:E.APP_CONNECT_EMAIL,payload:r});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting email"),t}}async connectDevice(){try{return this.appEvent({type:E.APP_CONNECT_DEVICE})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting device"),r}}async connectOtp(r){try{return this.appEvent({type:E.APP_CONNECT_OTP,payload:r})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting otp"),t}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};let r=await this.appEvent({type:E.APP_IS_CONNECTED});return r?.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:r},"Error checking connection"),r}}async getChainId(){try{let r=await this.appEvent({type:E.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(r){try{return await this.init(),this.appEvent({type:E.APP_GET_SOCIAL_REDIRECT_URI,payload:r})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error getting social redirect uri"),t}}async updateEmail(r){try{let t=await this.appEvent({type:E.APP_UPDATE_EMAIL,payload:r});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email"),t}}async updateEmailPrimaryOtp(r){try{return this.appEvent({type:E.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:r})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email primary otp"),t}}async updateEmailSecondaryOtp(r){try{let t=await this.appEvent({type:E.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:r});return this.setLoginSuccess(t.newEmail),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email secondary otp"),t}}async syncTheme(r){try{return this.appEvent({type:E.APP_SYNC_THEME,payload:r})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing theme"),t}}async syncDappData(r){try{return this.appEvent({type:E.APP_SYNC_DAPP_DATA,payload:r})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing dapp data"),t}}async getSmartAccountEnabledNetworks(){try{let r=await this.appEvent({type:E.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(r){try{return this.appEvent({type:E.APP_SET_PREFERRED_ACCOUNT,payload:{type:r}})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error setting preferred account"),t}}async connect(r){if(r?.socialUri)try{await this.init();let t=this.getRpcUrl(r.chainId),n=await this.appEvent({type:E.APP_CONNECT_SOCIAL,payload:{uri:r.socialUri,preferredAccountType:r.preferredAccountType,chainId:r.chainId,siwxMessage:r.siwxMessage,rpcUrl:t}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting social"),t}else try{let t=r?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:t,preferredAccountType:r?.preferredAccountType,siwxMessage:r?.siwxMessage,rpcUrl:this.getRpcUrl(t)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async getUser(r){try{await this.init();let t=r?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:E.APP_GET_USER,payload:h(u({},r),{chainId:t,rpcUrl:this.getRpcUrl(t)})});return this.user=n,n}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async connectSocial({uri:r,chainId:t,preferredAccountType:n}){try{await this.init();let s=this.getRpcUrl(t),a=await this.appEvent({type:E.APP_CONNECT_SOCIAL,payload:{uri:r,chainId:t,rpcUrl:s,preferredAccountType:n}});return a.userName&&this.setSocialLoginSuccess(a.userName),a}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:E.APP_GET_FARCASTER_URI})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){try{let r=await this.appEvent({type:E.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork({chainId:r}){try{let t=this.getRpcUrl(r),n=await this.appEvent({type:E.APP_SWITCH_NETWORK,payload:{chainId:r,rpcUrl:t}});return this.setLastUsedChainId(n.chainId),n}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error switching network"),t}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async t=>{let n=setTimeout(()=>{t()},3e3);await this.appEvent({type:E.APP_SIGN_OUT}),clearTimeout(n),t()})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error disconnecting"),r}}async request(r){let t=r;try{if(re.GET_CHAIN_ID===r.method)return this.getLastUsedChainId();let n=r.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;t.chainNamespace=n,t.chainId=s,t.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(r);let a=await this.appEvent({type:E.APP_RPC_REQUEST,payload:t});return this.rpcSuccessHandler?.(a,t),a}catch(n){throw this.rpcErrorHandler?.(n,t),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(r){this.rpcRequestHandler=r}onRpcSuccess(r){this.rpcSuccessHandler=r}onRpcError(r){this.rpcErrorHandler=r}onIsConnected(r){this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&r()})}onNotConnected(r){this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_IS_CONNECTED_ERROR&&r(),t.type===E.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&r()})}onConnect(r){this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_GET_USER_SUCCESS&&r(t.payload)})}onSocialConnected(r){this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_CONNECT_SOCIAL_SUCCESS&&r(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(r){this.w3mFrame.events.onFrameEvent(t=>{t.type===E.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?r(t.payload):t.type===E.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&r({type:re.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:r,method:t})=>{re.SAFE_RPC_METHODS.includes(t)||r.abort(),await this.appEvent({type:E.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(r){this.w3mLogger?.logger.error({error:r},"Error aborting RPC request")}}async appEvent(r){let t,n;function s(l){return l.replace("@w3m-app/","")}let a=[E.APP_SYNC_DAPP_DATA,E.APP_SYNC_THEME,E.APP_SET_PREFERRED_ACCOUNT],o=s(r.type);return!this.w3mFrame.iframeIsReady&&!a.includes(r.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[E.APP_CONNECT_EMAIL,E.APP_CONNECT_DEVICE,E.APP_CONNECT_OTP,E.APP_CONNECT_SOCIAL,E.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(t=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((l,d)=>{let p=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:r,id:p},"Sending app event"),this.w3mFrame.events.postAppEvent(h(u({},r),{id:p}));let f=new AbortController;if(o==="RPC_REQUEST"){let I=r;this.openRpcRequests.set(p,h(u({},I.payload),{abortController:f}))}f.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?d(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&d(new Error("Something went wrong"))});let G=(I,oe)=>{I.id===p&&(oe?.logger.info?.({framEvent:I,id:p},"Received frame response"),this.openRpcRequests.delete(I.id),I.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),n&&clearTimeout(n),"payload"in I&&l(I.payload),l(void 0)):I.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),n&&clearTimeout(n),"payload"in I&&d(new Error(I.payload?.message||"An error occurred")),d(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(p,I=>G(I,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){ce.set(E.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(r){ce.set(E.SOCIAL_USERNAME,r)}setLoginSuccess(r){r&&ce.set(E.EMAIL,r),ce.set(E.EMAIL_LOGIN_USED_KEY,"true"),ce.delete(E.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ce.delete(E.EMAIL_LOGIN_USED_KEY),ce.delete(E.EMAIL),ce.delete(E.LAST_USED_CHAIN_KEY),ce.delete(E.SOCIAL_USERNAME)}setLastUsedChainId(r){r&&ce.set(E.LAST_USED_CHAIN_KEY,String(r))}getLastUsedChainId(){let r=ce.get(E.LAST_USED_CHAIN_KEY)??void 0,t=Number(r);return isNaN(t)?r:t}persistSmartAccountEnabledNetworks(r){ce.set(E.SMART_ACCOUNT_ENABLED_NETWORKS,r.join(","))}getRpcUrl(r){let t=r===void 0?void 0:"eip155";typeof r=="string"&&(r.includes(":")?t=he.parseCaipNetworkId(r)?.chainNamespace:Number.isInteger(Number(r))?t="eip155":t="solana");let n=this.getCaipNetworks(t);return(r?n.find(a=>String(a.id)===String(r)||a.caipNetworkId===r):n[0])?.rpcUrls.default.http?.[0]}};async function mt(...e){let r=await fetch(...e);if(!r.ok)throw new Error(`HTTP status code: ${r.status}`,{cause:r});return r}var Re=class{constructor({baseUrl:r,clientId:t}){this.baseUrl=r,this.clientId=t}async get(a){var o=a,{headers:r,signal:t,cache:n}=o,s=Ie(o,["headers","signal","cache"]);let c=this.createUrl(s);return(await mt(c,{method:"GET",headers:r,signal:t,cache:n})).json()}async getBlob(s){var a=s,{headers:r,signal:t}=a,n=Ie(a,["headers","signal"]);let o=this.createUrl(n);return(await mt(o,{method:"GET",headers:r,signal:t})).blob()}async post(a){var o=a,{body:r,headers:t,signal:n}=o,s=Ie(o,["body","headers","signal"]);let c=this.createUrl(s);return(await mt(c,{method:"POST",headers:t,body:r?JSON.stringify(r):void 0,signal:n})).json()}async put(a){var o=a,{body:r,headers:t,signal:n}=o,s=Ie(o,["body","headers","signal"]);let c=this.createUrl(s);return(await mt(c,{method:"PUT",headers:t,body:r?JSON.stringify(r):void 0,signal:n})).json()}async delete(a){var o=a,{body:r,headers:t,signal:n}=o,s=Ie(o,["body","headers","signal"]);let c=this.createUrl(s);return(await mt(c,{method:"DELETE",headers:t,body:r?JSON.stringify(r):void 0,signal:n})).json()}createUrl({path:r,params:t}){let n=new URL(r,this.baseUrl);return t&&Object.entries(t).forEach(([s,a])=>{a&&n.searchParams.append(s,a)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}sendBeacon(n){var s=n,{body:r}=s,t=Ie(s,["body"]);let a=this.createUrl(t);return navigator.sendBeacon(a.toString(),r?JSON.stringify(r):void 0)}};var Wc=Symbol(),ai=Symbol();var Pn=Object.getPrototypeOf,Pr=new WeakMap,oi=e=>e&&(Pr.has(e)?Pr.get(e):Pn(e)===Object.prototype||Pn(e)===Array.prototype);var Un=e=>oi(e)&&e[ai]||null,Ur=(e,r=!0)=>{Pr.set(e,r)};var Lr=e=>typeof e=="object"&&e!==null,ii=e=>Lr(e)&&!ht.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),Ln=(e,r)=>{let t=xr.get(e);if(t?.[0]===r)return t[1];let n=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Ur(n,!0),xr.set(e,[r,n]),Reflect.ownKeys(e).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;let a=Reflect.get(e,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(e,s),c={value:a,enumerable:o,configurable:!0};if(ht.has(a))Ur(a,!1);else if(Be.has(a)){let[l,d]=Be.get(a);c.value=Ln(l,d())}Object.defineProperty(n,s,c)}),Object.preventExtensions(n)},ci=(e,r,t,n)=>({deleteProperty(s,a){let o=Reflect.get(s,a);t(a);let c=Reflect.deleteProperty(s,a);return c&&n(["delete",[a],o]),c},set(s,a,o,c){let l=!e()&&Reflect.has(s,a),d=Reflect.get(s,a,c);if(l&&(xn(d,o)||ft.has(o)&&xn(d,ft.get(o))))return!0;t(a),Lr(o)&&(o=Un(o)||o);let p=!Be.has(o)&&di(o)?V(o):o;return r(a,p),Reflect.set(s,a,p,c),n(["set",[a],o,d]),!0}}),Be=new WeakMap,ht=new WeakSet,xr=new WeakMap,$t=[1],ft=new WeakMap,xn=Object.is,li=(e,r)=>new Proxy(e,r),di=ii,ui=Ln,pi=ci;function V(e={}){if(!Lr(e))throw new Error("object required");let r=ft.get(e);if(r)return r;let t=$t[0],n=new Set,s=(H,Q=++$t[0])=>{t!==Q&&(a=t=Q,n.forEach(ie=>ie(H,Q)))},a=t,o=(H=$t[0])=>(a!==H&&(a=H,l.forEach(([Q])=>{let ie=Q[1](H);ie>t&&(t=ie)})),t),c=H=>(Q,ie)=>{let fe=[...Q];fe[1]=[H,...fe[1]],s(fe,ie)},l=new Map,d=(H,Q)=>{let ie=!ht.has(Q)&&Be.get(Q);if(ie){if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&l.has(H))throw new Error("prop listener already exists");if(n.size){let fe=ie[2](c(H));l.set(H,[ie,fe])}else l.set(H,[ie])}},p=H=>{var Q;let ie=l.get(H);ie&&(l.delete(H),(Q=ie[1])==null||Q.call(ie))},f=H=>(n.add(H),n.size===1&&l.forEach(([ie,fe],Ve)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&fe)throw new Error("remove already exists");let _t=ie[2](c(Ve));l.set(Ve,[ie,_t])}),()=>{n.delete(H),n.size===0&&l.forEach(([ie,fe],Ve)=>{fe&&(fe(),l.set(Ve,[ie]))})}),G=!0,I=pi(()=>G,d,p,s),oe=li(e,I);ft.set(e,oe);let X=[e,o,f];return Be.set(oe,X),Reflect.ownKeys(e).forEach(H=>{let Q=Object.getOwnPropertyDescriptor(e,H);"value"in Q&&Q.writable&&(oe[H]=e[H])}),G=!1,oe}function ee(e,r,t){let n=Be.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s,a=[],o=n[2],c=!1,d=o(p=>{if(a.push(p),t){r(a.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,c&&r(a.splice(0))}))});return c=!0,()=>{c=!1,d()}}function be(e){let r=Be.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!r&&console.warn("Please use proxy object");let[t,n]=r;return ui(t,n())}function Ue(e){return ht.add(e),e}function Mr(){return{proxyStateMap:Be,refSet:ht,snapCache:xr,versionHolder:$t,proxyCache:ft}}function te(e,r,t,n){let s=e[r];return ee(e,()=>{let a=e[r];Object.is(s,a)||t(s=a)},n)}var Kc=Symbol();var{proxyStateMap:mi,snapCache:fi}=Mr(),Yt=e=>mi.has(e);function Mn(e){let r=[],t=0,n=new Map,s=new WeakMap,a=()=>{let d=fi.get(c),p=d?.[1];if(p&&!s.has(p)){let f=new Map(n);s.set(p,f)}},o=d=>s.get(d)||n;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(let[d,p]of e)n.set(d,t),r[t++]=p}let c={data:r,index:t,epoch:0,get size(){return Yt(this)||a(),o(this).size},get(d){let f=o(this).get(d);if(f===void 0){this.epoch;return}return this.data[f]},has(d){let p=o(this);return this.epoch,p.has(d)},set(d,p){if(!Yt(this))throw new Error("Cannot perform mutations on a snapshot");let f=n.get(d);return f===void 0?(n.set(d,this.index),this.data[this.index++]=p):this.data[f]=p,this.epoch++,this},delete(d){if(!Yt(this))throw new Error("Cannot perform mutations on a snapshot");let p=n.get(d);return p===void 0?!1:(delete this.data[p],n.delete(d),this.epoch++,!0)},clear(){if(!Yt(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(d){this.epoch,o(this).forEach((f,G)=>{d(this.data[f],G,this)})},*entries(){this.epoch;let d=o(this);for(let[p,f]of d)yield[p,this.data[f]]},*keys(){this.epoch;let d=o(this);for(let p of d.keys())yield p},*values(){this.epoch;let d=o(this);for(let p of d.values())yield this.data[p]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},l=V(c);return Object.defineProperties(l,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(l),l}var{proxyStateMap:Zc,snapCache:$c}=Mr();var T=V({features:se.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:se.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),U={state:T,subscribeKey(e,r){return te(T,e,r)},setOptions(e){Object.assign(T,e)},setRemoteFeatures(e){if(!e)return;let r=u(u({},T.remoteFeatures),e);T.remoteFeatures=r,T.remoteFeatures?.socials&&(T.remoteFeatures.socials=Dn.filterSocialsByPlatform(T.remoteFeatures.socials)),T.features?.pay&&(T.remoteFeatures.email=!1,T.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;T.features||(T.features=se.DEFAULT_FEATURES);let r=u(u({},T.features),e);T.features=r,T.features?.pay&&T.remoteFeatures&&(T.remoteFeatures.email=!1,T.remoteFeatures.socials=!1)},setProjectId(e){T.projectId=e},setCustomRpcUrls(e){T.customRpcUrls=e},setAllWallets(e){T.allWallets=e},setIncludeWalletIds(e){T.includeWalletIds=e},setExcludeWalletIds(e){T.excludeWalletIds=e},setFeaturedWalletIds(e){T.featuredWalletIds=e},setTokens(e){T.tokens=e},setTermsConditionsUrl(e){T.termsConditionsUrl=e},setPrivacyPolicyUrl(e){T.privacyPolicyUrl=e},setCustomWallets(e){T.customWallets=e},setIsSiweEnabled(e){T.isSiweEnabled=e},setIsUniversalProvider(e){T.isUniversalProvider=e},setSdkVersion(e){T.sdkVersion=e},setMetadata(e){T.metadata=e},setDisableAppend(e){T.disableAppend=e},setEIP6963Enabled(e){T.enableEIP6963=e},setDebug(e){T.debug=e},setEnableWalletGuide(e){T.enableWalletGuide=e},setEnableAuthLogger(e){T.enableAuthLogger=e},setEnableWallets(e){T.enableWallets=e},setPreferUniversalLinks(e){T.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(let[r,t]of Object.entries(se.SIWX_DEFAULTS))e[r]??=t;T.siwx=e},setConnectMethodsOrder(e){T.features=h(u({},T.features),{connectMethodsOrder:e})},setWalletFeaturesOrder(e){T.features=h(u({},T.features),{walletFeaturesOrder:e})},setSocialsOrder(e){T.remoteFeatures=h(u({},T.remoteFeatures),{socials:e})},setCollapseWallets(e){T.features=h(u({},T.features),{collapseWallets:e})},setEnableEmbedded(e){T.enableEmbedded=e},setAllowUnsupportedChain(e){T.allowUnsupportedChain=e},setManualWCControl(e){T.manualWCControl=e},setEnableNetworkSwitch(e){T.enableNetworkSwitch=e},setEnableMobileFullScreen(e){T.enableMobileFullScreen=O.isMobile()&&e},setEnableReconnect(e){T.enableReconnect=e},setCoinbasePreference(e){T.coinbasePreference=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([r,t])=>{t&&(T.defaultAccountTypes[r]=t)})},setUniversalProviderConfigOverride(e){T.universalProviderConfigOverride=e},getUniversalProviderConfigOverride(){return T.universalProviderConfigOverride},getSnapshot(){return be(T)}};var Dn={getFeatureValue(e,r){let t=r?.[e];return t===void 0?se.DEFAULT_FEATURES[e]:t},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(O.isTelegram()){if(O.isIos())return e.filter(r=>r!=="google");if(O.isMac())return e.filter(r=>r!=="x");if(O.isAndroid())return e.filter(r=>!["facebook","x"].includes(r))}return e},isSocialsEnabled(){return Array.isArray(U.state.features?.socials)&&U.state.features?.socials.length>0||Array.isArray(U.state.remoteFeatures?.socials)&&U.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(U.state.features?.email||U.state.remoteFeatures?.email)}};var $e=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),ue=V(u({},$e)),hi={state:ue,subscribeKey(e,r){return te(ue,e,r)},showLoading(e,r={}){this._showMessage(u({message:e,variant:"loading"},r))},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,r){this._showMessage({message:e,svg:r})},showError(e){let r=O.parseError(e);this._showMessage({message:r,variant:"error"})},hide(){ue.message=$e.message,ue.variant=$e.variant,ue.svg=$e.svg,ue.open=$e.open,ue.autoClose=$e.autoClose},_showMessage({message:e,svg:r,variant:t="success",autoClose:n=$e.autoClose}){ue.open?(ue.open=!1,setTimeout(()=>{ue.message=e,ue.variant=t,ue.svg=r,ue.open=!0,ue.autoClose=n},150)):(ue.message=e,ue.variant=t,ue.svg=r,ue.open=!0,ue.autoClose=n)}},We=hi;var Se={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},Fn={handleMobileDeeplinkRedirect(e,r){let t=window.location.href,n=encodeURIComponent(t);if(e===Se.PHANTOM.id&&!("phantom"in window)){let s=t.startsWith("https")?"https":"http",a=t.split("/")[2],o=encodeURIComponent(`${s}://${a}`);window.location.href=`${Se.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(e===Se.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Se.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),r===k.CHAIN.SOLANA&&e===Se.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Se.COINBASE.url}/dapp?cb_url=${n}`),r===k.CHAIN.BITCOIN&&e===Se.BINANCE.id&&!("binancew3w"in window)){let s=m.state.activeCaipNetwork,a=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),c=new URL(Se.BINANCE.deeplink);c.searchParams.set("appId",Se.BINANCE.appId),c.searchParams.set("startPagePath",a),c.searchParams.set("startPageQuery",o);let l=new URL(Se.BINANCE.url);l.searchParams.set("_dp",window.btoa(c.toString())),window.location.href=l.toString()}}};var gi=Object.freeze({enabled:!0,events:[]}),Ci=new Re({baseUrl:O.getAnalyticsUrl(),clientId:null}),_i=5,Ei=60*1e3,je=V(u({},gi)),Bn={state:je,subscribeKey(e,r){return te(je,e,r)},async sendError(e,r){if(!je.enabled)return;let t=Date.now();if(je.events.filter(a=>{let o=new Date(a.properties.timestamp||"").getTime();return t-o<Ei}).length>=_i)return;let s={type:"error",event:r,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};je.events.push(s);try{if(typeof window>"u")return;let{projectId:a,sdkType:o,sdkVersion:c}=U.state;await Ci.post({path:"/e",params:{projectId:a,st:o,sv:c||"html-wagmi-4.2.2"},body:{eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:r,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}},enable(){je.enabled=!0},disable(){je.enabled=!1},clearEvents(){je.events=[]}};var Ye=class e extends Error{constructor(r,t,n){super(r),this.originalName="AppKitError",this.name="AppKitError",this.category=t,this.originalError=n,n&&n instanceof Error&&(this.originalName=n.name),Object.setPrototypeOf(this,e.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){let a=n.stack,o=a.indexOf(`
`);if(o>-1){let c=a.substring(o+1);this.stack=`${this.name}: ${this.message}
${c}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,e):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function Wn(e,r){let t="";try{e instanceof Error?t=e.message:typeof e=="string"?t=e:typeof e=="object"&&e!==null?Object.keys(e).length===0?t="Unknown error":t=e?.message||JSON.stringify(e):t=String(e)}catch(s){t="Unknown error",console.error("Error parsing error message",s)}let n=e instanceof Ye?e:new Ye(t,r,e);throw Bn.sendError(n,n.category),n}function pe(e,r="INTERNAL_SDK_ERROR"){let t={};return Object.keys(e).forEach(n=>{let s=e[n];if(typeof s=="function"){let a=s;s.constructor.name==="AsyncFunction"?a=async(...o)=>{try{return await s(...o)}catch(c){return Wn(c,r)}}:a=(...o)=>{try{return s(...o)}catch(c){return Wn(c,r)}},t[n]=a}else t[n]=s}),t}var ve=V({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),yi={state:ve,subscribeNetworkImages(e){return ee(ve.networkImages,()=>e(ve.networkImages))},subscribeKey(e,r){return te(ve,e,r)},subscribe(e){return ee(ve,()=>e(ve))},setWalletImage(e,r){ve.walletImages[e]=r},setNetworkImage(e,r){ve.networkImages[e]=r},setChainImage(e,r){ve.chainImages[e]=r},setConnectorImage(e,r){ve.connectorImages=h(u({},ve.connectorImages),{[e]:r})},setTokenImage(e,r){ve.tokenImages[e]=r},setCurrencyImage(e,r){ve.currencyImages[e]=r}},_e=pe(yi);var Ai={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},Dr=V({networkImagePromises:{}}),jn={async fetchWalletImage(e){if(e)return await x._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;let r=this.getNetworkImageById(e);return r||(Dr.networkImagePromises[e]||(Dr.networkImagePromises[e]=x._fetchNetworkImage(e)),await Dr.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return _e.state.walletImages[e]},getWalletImage(e){if(e?.image_url)return e?.image_url;if(e?.image_id)return _e.state.walletImages[e.image_id]},getNetworkImage(e){if(e?.assets?.imageUrl)return e?.assets?.imageUrl;if(e?.assets?.imageId)return _e.state.networkImages[e.assets.imageId]},getNetworkImageById(e){if(e)return _e.state.networkImages[e]},getConnectorImage(e){if(e?.imageUrl)return e.imageUrl;if(e?.info?.icon)return e.info.icon;if(e?.imageId)return _e.state.connectorImages[e.imageId]},getChainImage(e){return _e.state.networkImages[Ai[e]]},getTokenImage(e){if(e)return _e.state.tokenImages[e]}};var wi=O.getAnalyticsUrl(),Si=new Re({baseUrl:wi,clientId:null}),vi=["MODAL_CREATED"],Ti=45,Vn=1e3*10,de=V({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Y={state:de,subscribe(e){return ee(de,()=>e(de))},getSdkProperties(){let{projectId:e,sdkType:r,sdkVersion:t}=U.state;return{projectId:e,st:r,sv:t||"html-wagmi-4.2.2"}},shouldFlushEvents(){let e=JSON.stringify(de.pendingEvents).length/1024>Ti,r=de.lastFlush+Vn<Date.now();return e||r},_setPendingEvent(e){try{let r=m.getAccountData()?.address;if("address"in e.data&&e.data.address&&(r=e.data.address),vi.includes(e.data.event)||typeof window>"u")return;let t=m.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:h(u({},e.data),{address:r,properties:h(u({},"properties"in e.data?e.data.properties:{}),{caipNetworkId:t})})}),de.reportedErrors.FORBIDDEN=!1,Y.shouldFlushEvents()&&Y._submitPendingEvents()}catch(r){console.warn("_setPendingEvent",r)}},sendEvent(e){de.timestamp=Date.now(),de.data=e;let r=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(U.state.features?.analytics||r.includes(e.event))&&Y._setPendingEvent(de),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(e){de.walletImpressions.push(e)},_transformPendingEventsForBatch(e){try{return e.filter(r=>r.props.event!=="WALLET_IMPRESSION_V2")}catch{return e}},_submitPendingEvents(){if(de.lastFlush=Date.now(),!(de.pendingEvents.length===0&&de.walletImpressions.length===0))try{let e=Y._transformPendingEventsForBatch(de.pendingEvents);de.walletImpressions.length&&e.push({eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...de.walletImpressions]}}),Si.sendBeacon({path:"/batch",params:Y.getSdkProperties(),body:e}),de.reportedErrors.FORBIDDEN=!1,de.pendingEvents=[],de.walletImpressions=[]}catch{de.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){de.subscribedToVisibilityChange||typeof document>"u"||(de.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&Y._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{Y._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{Y._submitPendingEvents()}),setInterval(()=>{Y._submitPendingEvents()},Vn))}};var Ni=O.getApiUrl(),Ee=new Re({baseUrl:Ni,clientId:null}),Ri=40,Hn=4,Ii=20,M=V({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[]}),x={state:M,subscribeKey(e,r){return te(M,e,r)},_getSdkProperties(){let{projectId:e,sdkType:r,sdkVersion:t}=U.state;return{projectId:e,st:r||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(e){return U.state.isUniversalProvider?e.filter(r=>!!(r.mobile_link||r.desktop_link||r.webapp_link)):e},async _fetchWalletImage(e){let r=`${Ee.baseUrl}/getWalletImage/${e}`,t=await Ee.getBlob({path:r,params:x._getSdkProperties()});_e.setWalletImage(e,URL.createObjectURL(t))},async _fetchNetworkImage(e){let r=`${Ee.baseUrl}/public/getAssetImage/${e}`,t=await Ee.getBlob({path:r,params:x._getSdkProperties()});_e.setNetworkImage(e,URL.createObjectURL(t))},async _fetchConnectorImage(e){let r=`${Ee.baseUrl}/public/getAssetImage/${e}`,t=await Ee.getBlob({path:r,params:x._getSdkProperties()});_e.setConnectorImage(e,URL.createObjectURL(t))},async _fetchCurrencyImage(e){let r=`${Ee.baseUrl}/public/getCurrencyImage/${e}`,t=await Ee.getBlob({path:r,params:x._getSdkProperties()});_e.setCurrencyImage(e,URL.createObjectURL(t))},async _fetchTokenImage(e){let r=`${Ee.baseUrl}/public/getTokenImage/${e}`,t=await Ee.getBlob({path:r,params:x._getSdkProperties()});_e.setTokenImage(e,URL.createObjectURL(t))},_filterWalletsByPlatform(e){let r=e.length,t=O.isMobile()?e?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Se).map(o=>o.id).includes(s.id)):e,n=r-t.length;return{filteredWallets:t,mobileFilteredOutWalletsLength:n}},async fetchProjectConfig(){return(await Ee.get({path:"/appkit/v1/config",params:x._getSdkProperties()})).features},async fetchAllowedOrigins(){try{let{allowedOrigins:e}=await Ee.get({path:"/projects/v1/origins",params:x._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){let r=e.cause.status;if(r===k.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:e});if(r>=k.HTTP_STATUS_CODES.SERVER_ERROR&&r<600)throw new Error("SERVER_ERROR",{cause:e});return[]}return[]}},async fetchNetworkImages(){let r=m.getAllRequestedCaipNetworks()?.map(({assets:t})=>t?.imageId).filter(Boolean).filter(t=>!jn.getNetworkImageById(t));r&&await Promise.allSettled(r.map(t=>x._fetchNetworkImage(t)))},async fetchConnectorImages(){let{connectors:e}=R.state,r=e.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(r.map(t=>x._fetchConnectorImage(t)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(r=>x._fetchCurrencyImage(r)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(r=>x._fetchTokenImage(r)))},async fetchWallets(e){let r=e.exclude??[];x._getSdkProperties().sv.startsWith("html-core-")&&r.push(...Object.values(Se).map(o=>o.id));let n=await Ee.get({path:"/getWallets",params:h(u(u({},x._getSdkProperties()),e),{page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:r.join(",")})}),{filteredWallets:s,mobileFilteredOutWalletsLength:a}=x._filterWalletsByPlatform(n?.data);return{data:s||[],count:n?.count,mobileFilteredOutWalletsLength:a}},async prefetchWalletRanks(){let e=R.state.connectors;if(!e?.length)return;let r={page:1,entries:20,badge:"certified"};if(r.names=e.map(s=>s.name).join(","),m.state.activeChain===k.CHAIN.EVM){let s=[...e.flatMap(a=>a.connectors?.map(o=>o.info?.rdns)||[]),...e.map(a=>a.info?.rdns)].filter(a=>typeof a=="string"&&a.length>0);s.length&&(r.rdns=s.join(","))}let{data:t}=await x.fetchWallets(r);M.explorerWallets=t;let n=m.getRequestedCaipNetworkIds().join(",");M.explorerFilteredWallets=t.filter(s=>s.chains?.some(a=>n.includes(a)))},async fetchFeaturedWallets(){let{featuredWalletIds:e}=U.state;if(e?.length){let r=h(u({},x._getSdkProperties()),{page:1,entries:e?.length??Hn,include:e}),{data:t}=await x.fetchWallets(r),n=[...t].sort((a,o)=>e.indexOf(a.id)-e.indexOf(o.id)),s=n.map(a=>a.image_id).filter(Boolean);await Promise.allSettled(s.map(a=>x._fetchWalletImage(a))),M.featured=n,M.allFeatured=n}},async fetchRecommendedWallets(){try{M.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:t}=U.state,n=[...r??[],...t??[]].filter(Boolean),s=m.getRequestedCaipNetworkIds().join(","),a={page:1,entries:Hn,include:e,exclude:n,chains:s},{data:o,count:c}=await x.fetchWallets(a),l=_.getRecentWallets(),d=o.map(f=>f.image_id).filter(Boolean),p=l.map(f=>f.image_id).filter(Boolean);await Promise.allSettled([...d,...p].map(f=>x._fetchWalletImage(f))),M.recommended=o,M.allRecommended=o,M.count=c??0}catch{}finally{M.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){let{includeWalletIds:r,excludeWalletIds:t,featuredWalletIds:n}=U.state,s=m.getRequestedCaipNetworkIds().join(","),a=[...M.recommended.map(({id:f})=>f),...t??[],...n??[]].filter(Boolean),o={page:e,entries:Ri,include:r,exclude:a,chains:s},{data:c,count:l,mobileFilteredOutWalletsLength:d}=await x.fetchWallets(o);M.mobileFilteredOutWalletsLength=d+(M.mobileFilteredOutWalletsLength??0);let p=c.slice(0,Ii).map(f=>f.image_id).filter(Boolean);await Promise.allSettled(p.map(f=>x._fetchWalletImage(f))),M.wallets=O.uniqueBy([...M.wallets,...x._filterOutExtensions(c)],"id").filter(f=>f.chains?.some(G=>s.includes(G))),M.count=l>M.count?l:M.count,M.page=e},async initializeExcludedWallets({ids:e}){let r={page:1,entries:e.length,include:e},{data:t}=await x.fetchWallets(r);t&&t.forEach(n=>{M.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:e,badge:r}){let{includeWalletIds:t,excludeWalletIds:n}=U.state,s=m.getRequestedCaipNetworkIds().join(",");M.search=[];let a={page:1,entries:100,search:e?.trim(),badge_type:r,include:t,exclude:n,chains:s},{data:o}=await x.fetchWallets(a);Y.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:r??"",search:e??""}});let c=o.map(l=>l.image_id).filter(Boolean);await Promise.allSettled([...c.map(l=>x._fetchWalletImage(l)),O.wait(300)]),M.search=x._filterOutExtensions(o)},initPromise(e,r){let t=M.promises[e];return t||(M.promises[e]=r())},prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:r=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:n=!0,fetchWalletRanks:s=!0}={}){let a=[e&&x.initPromise("connectorImages",x.fetchConnectorImages),r&&x.initPromise("featuredWallets",x.fetchFeaturedWallets),t&&x.initPromise("recommendedWallets",x.fetchRecommendedWallets),n&&x.initPromise("networkImages",x.fetchNetworkImages),s&&x.initPromise("walletRanks",x.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(a)},prefetchAnalyticsConfig(){U.state.features?.analytics&&x.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await Ee.get({path:"/getAnalyticsConfig",params:x._getSdkProperties()});U.setFeatures({analytics:e})}catch{U.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let r=m.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(t=>t.chains?.some(n=>r.includes(n))),M.recommended=M.allRecommended.filter(t=>t.chains?.some(n=>r.includes(n))),M.filteredWallets=M.wallets.filter(t=>t.chains?.some(n=>r.includes(n)))},clearFilterByNamespaces(){M.filteredWallets=[]},setFilterByNamespace(e){if(!e){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let r=m.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(t=>t.chains?.some(n=>r.includes(n))),M.recommended=M.allRecommended.filter(t=>t.chains?.some(n=>r.includes(n))),M.filteredWallets=M.wallets.filter(t=>t.chains?.some(n=>r.includes(n)))}};var Gn={onSwitchNetwork({network:e,ignoreSwitchConfirmation:r=!1}){let t=m.state.activeCaipNetwork,n=m.state.activeChain,s=B.state.data;if(e.id===t?.id)return;let o=!!m.getAccountData(n)?.address,c=!!m.getAccountData(e.chainNamespace)?.address,l=e.chainNamespace!==n,p=R.getConnectorId(n)===k.CONNECTOR_ID.AUTH,f=k.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(G=>G===e.chainNamespace);r||p&&f?B.push("SwitchNetwork",h(u({},s),{network:e})):o&&l&&!c?B.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):B.push("SwitchNetwork",h(u({},s),{network:e}))}};var tt=V({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),xe={state:tt,subscribe(e){return ee(tt,()=>e(tt))},subscribeOpen(e){return te(tt,"open",e)},set(e){Object.assign(tt,u(u({},tt),e))}};var ye=V({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),bi={state:ye,subscribe(e){return ee(ye,()=>e(ye))},subscribeKey(e,r){return te(ye,e,r)},async open(e){let r=e?.namespace,t=m.state.activeChain,n=r&&r!==t,s=m.getAccountData(e?.namespace)?.caipAddress,a=m.state.noAdapters;if(b.state.wcBasic?x.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await x.prefetch(),R.setFilterByNamespace(e?.namespace),ne.setLoading(!0,r),r&&n){let o=m.getNetworkData(r)?.caipNetwork||m.getRequestedCaipNetworks(r)[0];o&&(a?(await m.switchActiveNetwork(o),B.push("ConnectingWalletConnectBasic")):Gn.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else U.state.manualWCControl||a&&!s?O.isMobile()?B.reset("AllWallets"):B.reset("ConnectingWalletConnectBasic"):e?.view?B.reset(e.view,e.data):s?B.reset("Account"):B.reset("Connect");ye.open=!0,xe.set({open:!0}),Y.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){let e=U.state.enableEmbedded,r=!!m.state.activeCaipAddress;ye.open&&Y.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:r}}),ye.open=!1,B.reset("Connect"),ne.clearLoading(),e?r?B.replace("Account"):B.push("Connect"):xe.set({open:!1}),b.resetUri()},setLoading(e,r){r&&ye.loadingNamespaceMap.set(r,e),ye.loading=e,xe.set({loading:e})},clearLoading(){ye.loadingNamespaceMap.clear(),ye.loading=!1,xe.set({loading:!1})},shake(){ye.shake||(ye.shake=!0,setTimeout(()=>{ye.shake=!1},500))}},ne=pe(bi);var J=V({view:"Connect",history:["Connect"],transactionStack:[]}),ki={state:J,subscribeKey(e,r){return te(J,e,r)},pushTransactionStack(e){J.transactionStack.push(e)},popTransactionStack(e){let r=J.transactionStack.pop();if(!r)return;let{onSuccess:t,onError:n,onCancel:s}=r;switch(e){case"success":t?.();break;case"error":n?.(),B.goBack();break;case"cancel":s?.(),B.goBack();break;default:}},push(e,r){e!==J.view&&(J.view=e,J.history.push(e),J.data=r)},reset(e,r){J.view=e,J.history=[e],J.data=r},replace(e,r){J.history.at(-1)===e||(J.view=e,J.history[J.history.length-1]=e,J.data=r)},goBack(){let e=m.state.activeCaipAddress,r=B.state.view==="ConnectingFarcaster",t=!e&&r;if(J.history.length>1){J.history.pop();let[n]=J.history.slice(-1);n&&(e&&n==="Connect"?J.view="Account":J.view=n)}else ne.close();J.data?.wallet&&(J.data.wallet=void 0),J.data?.redirectView&&(J.data.redirectView=void 0),setTimeout(()=>{if(t){m.setAccountProp("farcasterUrl",void 0,m.state.activeChain);let n=R.getAuthConnector();n?.provider?.reload();let s=be(U.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(e){if(J.history.length>1){J.history=J.history.slice(0,e+1);let[r]=J.history.slice(-1);r&&(J.view=r)}},goBackOrCloseModal(){B.state.history.length>1?B.goBack():ne.close()}},B=pe(ki);var Le=V({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Fr={state:Le,subscribe(e){return ee(Le,()=>e(Le))},setThemeMode(e){Le.themeMode=e;try{let r=R.getAuthConnector();if(r){let t=Fr.getSnapshot().themeVariables;r.provider.syncTheme({themeMode:e,themeVariables:t,w3mThemeVariables:qe(t,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){Le.themeVariables=u(u({},Le.themeVariables),e);try{let r=R.getAuthConnector();if(r){let t=Fr.getSnapshot().themeVariables;r.provider.syncTheme({themeVariables:t,w3mThemeVariables:qe(Le.themeVariables,Le.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return be(Le)}},gt=pe(Fr);var Kn=Object.fromEntries(er.map(e=>[e,void 0])),Oi=Object.fromEntries(er.map(e=>[e,!0])),z=V({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:Kn,filterByNamespaceMap:Oi}),Pi={state:z,subscribe(e){return ee(z,()=>{e(z)})},subscribeKey(e,r){return te(z,e,r)},initialize(e){e.forEach(r=>{let t=_.getConnectedConnectorId(r);t&&R.setConnectorId(t,r)})},setActiveConnector(e){e&&(z.activeConnector=Ue(e))},setConnectors(e){e.filter(s=>!z.allConnectors.some(a=>a.id===s.id&&R.getConnectorName(a.name)===R.getConnectorName(s.name)&&a.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&z.allConnectors.push(Ue(s))});let t=R.getEnabledNamespaces(),n=R.getEnabledConnectors(t);z.connectors=R.mergeMultiChainConnectors(n)},filterByNamespaces(e){Object.keys(z.filterByNamespaceMap).forEach(r=>{z.filterByNamespaceMap[r]=!1}),e.forEach(r=>{z.filterByNamespaceMap[r]=!0}),R.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,r){z.filterByNamespaceMap[e]=r,R.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=R.getEnabledNamespaces(),r=R.getEnabledConnectors(e),t=R.areAllNamespacesEnabled();z.connectors=R.mergeMultiChainConnectors(r),t?x.clearFilterByNamespaces():x.filterByNamespaces(e)},getEnabledNamespaces(){return Object.entries(z.filterByNamespaceMap).filter(([e,r])=>r).map(([e])=>e)},getEnabledConnectors(e){return z.allConnectors.filter(r=>e.includes(r.chain))},areAllNamespacesEnabled(){return Object.values(z.filterByNamespaceMap).every(e=>e)},mergeMultiChainConnectors(e){let r=R.generateConnectorMapByName(e),t=[];return r.forEach(n=>{let s=n[0],a=s?.id===k.CONNECTOR_ID.AUTH;n.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:a?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&t.push(s)}),t},generateConnectorMapByName(e){let r=new Map;return e.forEach(t=>{let{name:n}=t,s=R.getConnectorName(n);if(!s)return;let a=r.get(s)||[];a.find(c=>c.chain===t.chain)||a.push(t),r.set(s,a)}),r},getConnectorName(e){return e&&({"Trust Wallet":"Trust"}[e]||e)},getUniqueConnectorsByName(e){let r=[];return e.forEach(t=>{r.find(n=>n.chain===t.chain)||r.push(t)}),r},addConnector(e){if(e.id===k.CONNECTOR_ID.AUTH){let r=e,t=be(U.state),n=gt.getSnapshot().themeMode,s=gt.getSnapshot().themeVariables;r?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),r?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:qe(s,n)}),R.setConnectors([e])}else R.setConnectors([e])},getAuthConnector(e){let r=e||m.state.activeChain,t=z.connectors.find(n=>n.id===k.CONNECTOR_ID.AUTH);if(t)return t?.connectors?.length?t.connectors.find(s=>s.chain===r):t},getAnnouncedConnectorRdns(){return z.connectors.filter(e=>e.type==="ANNOUNCED").map(e=>e.info?.rdns)},getConnectorById(e){return z.allConnectors.find(r=>r.id===e)},getConnector({id:e,rdns:r,namespace:t}){let n=t||m.state.activeChain;return z.allConnectors.filter(a=>a.chain===n).find(a=>a.explorerId===e||a.info?.rdns===r)},syncIfAuthConnector(e){if(e.id!=="AUTH")return;let r=e,t=be(U.state),n=gt.getSnapshot().themeMode,s=gt.getSnapshot().themeVariables;r?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),r.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:qe(s,n)})},getConnectorsByNamespace(e){let r=z.allConnectors.filter(t=>t.chain===e);return R.mergeMultiChainConnectors(r)},canSwitchToSmartAccount(e){return m.checkIfSmartAccountEnabled()&&Te(e)===re.ACCOUNT_TYPES.EOA},selectWalletConnector(e){let r=B.state.data?.redirectView,t=R.getConnector({id:e.id,rdns:e.rdns});Fn.handleMobileDeeplinkRedirect(t?.explorerId||e.id,m.state.activeChain),t?B.push("ConnectingExternal",{connector:t,wallet:e,redirectView:r}):B.push("ConnectingWalletConnect",{wallet:e,redirectView:r})},getConnectors(e){return e?R.getConnectorsByNamespace(e):R.mergeMultiChainConnectors(z.allConnectors)},setFilterByNamespace(e){z.filterByNamespace=e,z.connectors=R.getConnectors(e),x.setFilterByNamespace(e)},setConnectorId(e,r){e&&(z.activeConnectorIds=h(u({},z.activeConnectorIds),{[r]:e}),_.setConnectedConnectorId(r,e))},removeConnectorId(e){z.activeConnectorIds=h(u({},z.activeConnectorIds),{[e]:void 0}),_.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return z.activeConnectorIds[e]},isConnected(e){return e?!!z.activeConnectorIds[e]:Object.values(z.activeConnectorIds).some(r=>!!r)},resetConnectorIds(){z.activeConnectorIds=u({},Kn)}},R=pe(Pi);var Ui=1e3,rt={checkNamespaceConnectorId(e,r){return R.getConnectorId(e)===r},isSocialProvider(e){return se.DEFAULT_REMOTE_FEATURES.socials.includes(e)},connectWalletConnect({walletConnect:e,connector:r,closeModalOnConnect:t=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:a}){return new Promise((o,c)=>{if(e&&R.setActiveConnector(r),s?.(O.isMobile()&&e),n){let d=ne.subscribeKey("open",p=>{p||(B.state.view!==n&&B.replace(n),d(),c(new Error("Modal closed")))})}let l=m.subscribeKey("activeCaipAddress",d=>{d&&(a?.(),t&&ne.close(),l(),o(he.parseCaipAddress(d)))})})},connectExternal(e){return new Promise((r,t)=>{let n=m.subscribeKey("activeCaipAddress",s=>{s&&(ne.close(),n(),r(he.parseCaipAddress(s)))});b.connectExternal(e,e.chain).catch(()=>{n(),t(new Error("Connection rejected"))})})},connectSocial({social:e,namespace:r,closeModalOnConnect:t=!0,onOpenFarcaster:n,onConnect:s}){let a,o=!1,c=null,l=r||m.state.activeChain,d=m.subscribeKey("activeCaipAddress",p=>{p&&(t&&ne.close(),d())});return new Promise((p,f)=>{async function G(oe){if(oe.data?.resultUri)if(oe.origin===k.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",G,!1);try{let X=R.getAuthConnector(l);if(X&&!o){a&&a.close(),o=!0;let H=oe.data.resultUri;Y.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:e}}),_.setConnectedSocialProvider(e),await b.connectExternal({id:X.id,type:X.type,socialUri:H},X.chain);let Q=m.state.activeCaipAddress;if(!Q){f(new Error("Failed to connect"));return}p(he.parseCaipAddress(Q)),Y.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:e}})}}catch(X){Y.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:O.parseError(X)}}),f(new Error("Failed to connect"))}}else Y.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:"Untrusted Origin"}})}async function I(){if(Y.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:e}}),e==="farcaster"){n?.();let oe=ne.subscribeKey("open",H=>{!H&&e==="farcaster"&&(f(new Error("Popup closed")),s?.(),oe())}),X=R.getAuthConnector();if(X&&!m.getAccountData(l)?.farcasterUrl)try{let{url:Q}=await X.provider.getFarcasterUri();m.setAccountProp("farcasterUrl",Q,l)}catch{f(new Error("Failed to connect to farcaster"))}}else{let oe=R.getAuthConnector();c=O.returnOpenHref(`${k.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(oe){let{uri:X}=await oe.provider.getSocialRedirectUri({provider:e});if(c&&X){c.location.href=X,a=c;let H=setInterval(()=>{a?.closed&&!o&&(f(new Error("Popup closed")),clearInterval(H))},1e3);window.addEventListener("message",G,!1)}else c?.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),c?.close()}}}I()})},connectEmail({closeModalOnConnect:e=!0,redirectViewOnModalClose:r="Connect",onOpen:t,onConnect:n}){return new Promise((s,a)=>{if(t?.(),r){let c=ne.subscribeKey("open",l=>{l||(B.state.view!==r&&B.replace(r),c(),a(new Error("Modal closed")))})}let o=m.subscribeKey("activeCaipAddress",c=>{c&&(n?.(),e&&ne.close(),o(),s(he.parseCaipAddress(c)))})})},async updateEmail(){let e=_.getConnectedConnectorId(m.state.activeChain),r=R.getAuthConnector();if(!r)throw new Error("No auth connector found");if(e!==k.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");let t=r.provider.getEmail()??"";return await ne.open({view:"UpdateEmailWallet",data:{email:t,redirectView:void 0}}),new Promise((n,s)=>{let a=setInterval(()=>{let c=r.provider.getEmail()??"";c!==t&&(ne.close(),clearInterval(a),o(),n({email:c}))},Ui),o=ne.subscribeKey("open",c=>{c||(B.state.view!=="Connect"&&B.push("Connect"),clearInterval(a),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(e){return m.checkIfSmartAccountEnabled()&&Te(e)===re.ACCOUNT_TYPES.EOA}};function zt(){let e=m.state.activeCaipNetwork?.chainNamespace||"eip155",r=m.state.activeCaipNetwork?.id||1,t=se.NATIVE_TOKEN_ADDRESS[e];return`${e}:${r}:${t}`}function Te(e){return m.getAccountData(e)?.preferredAccountType}function _u(e){return e?m.state.chains.get(e)?.networkState?.caipNetwork:m.state.activeCaipNetwork}var Br={getConnectionStatus(e,r){let t=R.state.activeConnectorIds[r],n=b.getConnections(r);return!!t&&e.connectorId===t?"connected":n.some(o=>o.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:e,connectorId:r,addresses:t}){return e.map(n=>{if((r?n.connectorId.toLowerCase()===r.toLowerCase():!1)&&t){let a=n.accounts.filter(o=>!t.some(l=>l.toLowerCase()===o.address.toLowerCase()));return h(u({},n),{accounts:a})}return n})},excludeExistingConnections(e,r){let t=new Set(e);return r.filter(n=>!t.has(n.connectorId))},getConnectionsByConnectorId(e,r){return e.filter(t=>t.connectorId.toLowerCase()===r.toLowerCase())},getConnectionsData(e){let r=!!U.state.remoteFeatures?.multiWallet,t=R.state.activeConnectorIds[e],n=b.getConnections(e),a=(b.state.recentConnections.get(e)??[]).filter(c=>R.getConnectorById(c.connectorId)),o=Br.excludeExistingConnections([...n.map(c=>c.connectorId),...t?[t]:[]],a);return r?{connections:n,recentConnections:o}:{connections:n.filter(c=>c.connectorId.toLowerCase()===t?.toLowerCase()),recentConnections:[]}}};var ae=V({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),xi={state:ae,subscribe(e){return ee(ae,()=>e(ae))},setLastNetworkInView(e){ae.lastNetworkInView=e},async fetchTransactions(e){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");ae.loading=!0;try{let r=await D.fetchTransactions({account:e,cursor:ae.next,chainId:m.state.activeCaipNetwork?.caipNetworkId}),t=Ct.filterSpamTransactions(r.data),n=Ct.filterByConnectedChain(t),s=[...ae.transactions,...n];ae.loading=!1,ae.transactions=s,ae.transactionsByYear=Ct.groupTransactionsByYearAndMonth(ae.transactionsByYear,n),ae.empty=s.length===0,ae.next=r.next?r.next:void 0}catch{let t=m.state.activeChain;Y.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:U.state.projectId,cursor:ae.next,isSmartAccount:Te(t)===re.ACCOUNT_TYPES.SMART_ACCOUNT}}),We.showError("Failed to fetch transactions"),ae.loading=!1,ae.empty=!0,ae.next=void 0}},groupTransactionsByYearAndMonth(e={},r=[]){let t=e;return r.forEach(n=>{let s=new Date(n.metadata.minedAt).getFullYear(),a=new Date(n.metadata.minedAt).getMonth(),o=t[s]??{},l=(o[a]??[]).filter(d=>d.id!==n.id);t[s]=h(u({},o),{[a]:[...l,n].sort((d,p)=>new Date(p.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())})}),t},filterSpamTransactions(e){return e.filter(r=>!r.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(e){let r=m.state.activeCaipNetwork?.caipNetworkId;return e.filter(n=>n.metadata.chain===r)},clearCursor(){ae.next=void 0},resetTransactions(){ae.transactions=[],ae.transactionsByYear={},ae.lastNetworkInView=void 0,ae.loading=!1,ae.empty=!1,ae.next=void 0}},Ct=pe(xi,"API_ERROR");var q=V({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"}),ze,Li={state:q,subscribe(e){return ee(q,()=>e(q))},subscribeKey(e,r){return te(q,e,r)},_getClient(){return q._client},setClient(e){q._client=Ue(e)},initialize(e){let r=e.filter(t=>!!t.namespace).map(t=>t.namespace);b.syncStorageConnections(r)},syncStorageConnections(e){let r=_.getConnections(),t=e??Array.from(m.state.chains.keys());for(let n of t){let s=r[n]??[],a=new Map(q.recentConnections);a.set(n,s),q.recentConnections=a}},getConnections(e){return e?q.connections.get(e)??[]:[]},hasAnyConnection(e){let r=b.state.connections;return Array.from(r.values()).flatMap(t=>t).some(({connectorId:t})=>t===e)},async connectWalletConnect({cache:e="auto"}={}){let r=O.isTelegram()||O.isSafari()&&O.isIos();if(e==="always"||e==="auto"&&r){if(ze){await ze,ze=void 0;return}if(!O.isPairingExpired(q?.wcPairingExpiry)){let t=q.wcUri;q.wcUri=t;return}ze=b._getClient()?.connectWalletConnect?.().catch(()=>{}),b.state.status="connecting",await ze,ze=void 0,q.wcPairingExpiry=void 0,b.state.status="connected"}else await b._getClient()?.connectWalletConnect?.()},async connectExternal(e,r,t=!0){let n=await b._getClient()?.connectExternal?.(e);return t&&m.setActiveNamespace(r),n},async reconnectExternal(e){await b._getClient()?.reconnectExternal?.(e);let r=e.chain||m.state.activeChain;r&&R.setConnectorId(e.id,r)},async setPreferredAccountType(e,r){if(!r)return;ne.setLoading(!0,m.state.activeChain);let t=R.getAuthConnector();t&&(m.setAccountProp("preferredAccountType",e,r),await t.provider.setPreferredAccount(e),_.setPreferredAccountTypes(Object.entries(m.state.chains).reduce((n,[s,a])=>{let o=s,c=Te(o);return c!==void 0&&(n[o]=c),n},{})),await b.reconnectExternal(t),ne.setLoading(!1,m.state.activeChain),Y.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:m.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(e){return b._getClient()?.signMessage(e)},parseUnits(e,r){return b._getClient()?.parseUnits(e,r)},formatUnits(e,r){return b._getClient()?.formatUnits(e,r)},updateBalance(e){return b._getClient()?.updateBalance(e)},async sendTransaction(e){return b._getClient()?.sendTransaction(e)},async getCapabilities(e){return b._getClient()?.getCapabilities(e)},async grantPermissions(e){return b._getClient()?.grantPermissions(e)},async walletGetAssets(e){return b._getClient()?.walletGetAssets(e)??{}},async estimateGas(e){return b._getClient()?.estimateGas(e)},async writeContract(e){return b._getClient()?.writeContract(e)},async getEnsAddress(e){return b._getClient()?.getEnsAddress(e)},async getEnsAvatar(e){return b._getClient()?.getEnsAvatar(e)},checkInstalled(e){return b._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){q.wcUri=void 0,q.wcPairingExpiry=void 0,q.wcLinking=void 0,q.recentWallet=void 0,q.status="disconnected",Ct.resetTransactions(),_.deleteWalletConnectDeepLink(),_.deleteRecentWallet()},resetUri(){q.wcUri=void 0,q.wcPairingExpiry=void 0,ze=void 0},finalizeWcConnection(e){let{wcLinking:r,recentWallet:t}=b.state;r&&_.setWalletConnectDeepLink(r),t&&_.setAppKitRecent(t),e&&Y.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:r?"mobile":"qrcode",name:B.state.data?.wallet?.name||"Unknown",view:B.state.view,walletRank:t?.order}})},setWcBasic(e){q.wcBasic=e},setUri(e){q.wcUri=e,q.wcPairingExpiry=O.getPairingExpiry()},setWcLinking(e){q.wcLinking=e},setWcError(e){q.wcError=e,q.buffering=!1},setRecentWallet(e){q.recentWallet=e},setBuffering(e){q.buffering=e},setStatus(e){q.status=e},setIsSwitchingConnection(e){q.isSwitchingConnection=e},async disconnect({id:e,namespace:r,initialDisconnect:t}={}){try{await b._getClient()?.disconnect({id:e,chainNamespace:r,initialDisconnect:t})}catch(n){throw new Ye("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},async disconnectConnector({id:e,namespace:r}){try{await b._getClient()?.disconnectConnector({id:e,namespace:r})}catch(t){throw new Ye("Failed to disconnect connector","INTERNAL_SDK_ERROR",t)}},setConnections(e,r){let t=new Map(q.connections);t.set(r,e),q.connections=t},async handleAuthAccountSwitch({address:e,namespace:r}){let n=m.getAccountData(r)?.user?.accounts?.find(a=>a.type==="smartAccount"),s=n&&n.address.toLowerCase()===e.toLowerCase()&&rt.canSwitchToSmartAccount(r)?"smartAccount":"eoa";await b.setPreferredAccountType(s,r)},async handleActiveConnection({connection:e,namespace:r,address:t}){let n=R.getConnectorById(e.connectorId),s=e.connectorId===k.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${e.connectorId}`);if(s)t&&await b.handleAuthAccountSwitch({address:t,namespace:r});else return(await b.connectExternal({id:n.id,type:n.type,provider:n.provider,address:t,chain:r},r))?.address;return t},async handleDisconnectedConnection({connection:e,namespace:r,address:t,closeModalOnConnect:n}){let s=R.getConnectorById(e.connectorId),a=e.auth?.name?.toLowerCase(),o=e.connectorId===k.CONNECTOR_ID.AUTH,c=e.connectorId===k.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${e.connectorId}`);let l;if(o)if(a&&rt.isSocialProvider(a)){let{address:d}=await rt.connectSocial({social:a,closeModalOnConnect:n,onOpenFarcaster(){ne.open({view:"ConnectingFarcaster"})},onConnect(){B.replace("ProfileWallets")}});l=d}else{let{address:d}=await rt.connectEmail({closeModalOnConnect:n,onOpen(){ne.open({view:"EmailLogin"})},onConnect(){B.replace("ProfileWallets")}});l=d}else if(c){let{address:d}=await rt.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(p){let f=p?"AllWallets":"ConnectingWalletConnect";ne.state.open?B.push(f):ne.open({view:f})},onConnect(){B.replace("ProfileWallets")}});l=d}else{let d=await b.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:r},r);d&&(l=d.address)}return o&&t&&await b.handleAuthAccountSwitch({address:t,namespace:r}),l},async switchConnection({connection:e,address:r,namespace:t,closeModalOnConnect:n,onChange:s}){let a,o=m.getAccountData(t)?.caipAddress;if(o){let{address:l}=he.parseCaipAddress(o);a=l}let c=Br.getConnectionStatus(e,t);switch(c){case"connected":case"active":{let l=await b.handleActiveConnection({connection:e,namespace:t,address:r});if(a&&l){let d=l.toLowerCase()!==a.toLowerCase();s?.({address:l,namespace:t,hasSwitchedAccount:d,hasSwitchedWallet:c==="active"})}break}case"disconnected":{let l=await b.handleDisconnectedConnection({connection:e,namespace:t,address:r,closeModalOnConnect:n});l&&s?.({address:l,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${c}`)}}},b=pe(Li);var qt={createBalance(e,r){let t={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:r,address:e.address==="native"?void 0:this.convertAddressToCAIP10Address(e.address,r),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:e,decimals:r}){return At(BigInt(e),r)},convertAddressToCAIP10Address(e,r){return`${r}:${e}`},createCAIP2ChainId(e,r){return`${r}:${parseInt(e,16)}`},getChainIdHexFromCAIP2ChainId(e){let r=e.split(":");if(r.length<2||!r[1])return"0x0";let t=r[1],n=parseInt(t,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(e){return typeof e!="object"||e===null?!1:Object.values(e).every(r=>Array.isArray(r)&&r.every(t=>this.isValidAsset(t)))},isValidAsset(e){return typeof e=="object"&&e!==null&&typeof e.address=="string"&&typeof e.balance=="string"&&(e.type==="ERC20"||e.type==="NATIVE")&&typeof e.metadata=="object"&&e.metadata!==null&&typeof e.metadata.name=="string"&&typeof e.metadata.symbol=="string"&&typeof e.metadata.decimals=="number"&&typeof e.metadata.price=="number"&&typeof e.metadata.iconUrl=="string"}};var Wr;async function Zn(){if(!Wr){let{createPublicClient:e,http:r,defineChain:t}=await import("./chunk-EIQFMFCZ.js");Wr={createPublicClient:e,http:r,defineChain:t}}return Wr}var Jt={getBlockchainApiRpcUrl(e,r){let t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",e),t.searchParams.set("projectId",r),t.toString()},async getViemChain(e){let{defineChain:r}=await Zn(),{chainId:t}=he.parseCaipNetworkId(e.caipNetworkId);return r(h(u({},e),{id:Number(t)}))},async createViemPublicClient(e){let{createPublicClient:r,http:t}=await Zn(),n=U.state.projectId,s=await Jt.getViemChain(e);if(!s)throw new Error(`Chain ${e.caipNetworkId} not found in viem/chains`);return r({chain:s,transport:t(Jt.getBlockchainApiRpcUrl(e.caipNetworkId,n))})}};var nt={async getMyTokensWithBalance(e){let r=m.getAccountData()?.address,t=m.state.activeCaipNetwork,n=R.getConnectorId("eip155")===k.CONNECTOR_ID.AUTH;if(!r||!t)return[];let s=`${t.caipNetworkId}:${r}`,a=_.getBalanceCacheForCaipAddress(s);if(a)return a.balances;if(t.chainNamespace===k.CHAIN.EVM&&n){let c=await this.getEIP155Balances(r,t);if(c)return this.filterLowQualityTokens(c)}let o=await D.getBalance(r,t.caipNetworkId,e);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(e,r){try{let t=qt.getChainIdHexFromCAIP2ChainId(r.caipNetworkId);if(!(await b.getCapabilities(e))?.[t]?.assetDiscovery?.supported)return null;let s=await b.walletGetAssets({account:e,chainFilter:[t]});if(!qt.isWalletGetAssetsResponse(s))return null;let o=(s[t]||[]).map(c=>qt.createBalance(c,r.caipNetworkId));return _.updateBalanceCache({caipAddress:`${r.caipNetworkId}:${e}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(e){return e.filter(r=>r.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:e,assetAddress:r,caipNetwork:t}){let n=await Jt.createViemPublicClient(t),{address:s}=he.parseCaipAddress(e),[{result:a},{result:o},{result:c},{result:l}]=await n.multicall({contracts:[{address:r,functionName:"name",args:[],abi:at},{address:r,functionName:"symbol",args:[],abi:at},{address:r,functionName:"balanceOf",args:[s],abi:at},{address:r,functionName:"decimals",args:[],abi:at}]});return{name:a,symbol:o,decimals:l,balance:c&&l?At(c,l):"0"}}};var jr={adapters:{}},$n={state:jr,initialize(e){jr.adapters=u({},e)},get(e){return jr.adapters[e]}};var Xt={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Ae=V({providers:u({},Xt),providerIds:u({},Xt)}),Yn={state:Ae,subscribeKey(e,r){return te(Ae,e,r)},subscribe(e){return ee(Ae,()=>{e(Ae)})},subscribeProviders(e){return ee(Ae.providers,()=>e(Ae.providers))},setProvider(e,r){e&&r&&(Ae.providers[e]=Ue(r))},getProvider(e){if(e)return Ae.providers[e]},setProviderId(e,r){r&&(Ae.providerIds[e]=r)},getProviderId(e){if(e)return Ae.providerIds[e]},reset(){Ae.providers=u({},Xt),Ae.providerIds=u({},Xt)},resetChain(e){Ae.providers[e]=void 0,Ae.providerIds[e]=void 0}};var zn={async getTokenList(e){return(await D.fetchSwapTokens({chainId:e}))?.tokens?.map(n=>h(u({},n),{eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){let e=m.state.activeCaipNetwork;if(!e)return null;try{switch(e.chainNamespace){case"solana":let r=(await b?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:r,fast:r,instant:r};case"eip155":default:return await D.fetchGasPrice({chainId:e.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:e,userAddress:r,sourceTokenAmount:t,sourceTokenDecimals:n}){let s=await D.fetchSwapAllowance({tokenAddress:e,userAddress:r});if(s?.allowance&&t&&n){let a=b.parseUnits(t,n)||0;return BigInt(s.allowance)>=a}return!1},async getMyTokensWithBalance(e){let r=await nt.getMyTokensWithBalance(e);return m.setAccountProp("tokenBalance",r,m.state.activeChain),this.mapBalancesToSwapTokens(r)},mapBalancesToSwapTokens(e){return e?.map(r=>h(u({},r),{address:r?.address?r.address:zt(),decimals:parseInt(r.quantity.decimals,10),logoUri:r.iconUrl,eip2612:!1}))||[]},async handleSwapError(e){try{let r=e?.cause;return r?.json&&(await r.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}};var Z=V({tokenBalances:[],loading:!1}),Mi={state:Z,subscribe(e){return ee(Z,()=>e(Z))},subscribeKey(e,r){return te(Z,e,r)},setToken(e){e&&(Z.token=Ue(e))},setTokenAmount(e){Z.sendTokenAmount=e},setReceiverAddress(e){Z.receiverAddress=e},setReceiverProfileImageUrl(e){Z.receiverProfileImageUrl=e},setReceiverProfileName(e){Z.receiverProfileName=e},setNetworkBalanceInUsd(e){Z.networkBalanceInUSD=e},setLoading(e){Z.loading=e},getSdkEventProperties(e){return{message:O.parseError(e),isSmartAccount:Te(m.state.activeChain)===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:Z.token?.symbol||"",amount:Z.sendTokenAmount??0,network:m.state.activeCaipNetwork?.caipNetworkId||""}},async sendToken(){try{switch(K.setLoading(!0),m.state.activeCaipNetwork?.chainNamespace){case"eip155":await K.sendEvmToken();return;case"solana":await K.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(e){throw zr.isUserRejectedRequestError(e)?new qr(e):e}finally{K.setLoading(!1)}},async sendEvmToken(){let e=m.state.activeChain;if(!e)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");let r=Te(e);if(!K.state.sendTokenAmount||!K.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!K.state.token)throw new Error("A token is required");if(K.state.token?.address){Y.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:r===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token.address,amount:K.state.sendTokenAmount,network:m.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:t}=await K.sendERC20Token({receiverAddress:K.state.receiverAddress,tokenAddress:K.state.token.address,sendTokenAmount:K.state.sendTokenAmount,decimals:K.state.token.quantity.decimals});t&&(Z.hash=t)}else{Y.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:r===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token.symbol||"",amount:K.state.sendTokenAmount,network:m.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:t}=await K.sendNativeToken({receiverAddress:K.state.receiverAddress,sendTokenAmount:K.state.sendTokenAmount,decimals:K.state.token.quantity.decimals});t&&(Z.hash=t)}},async fetchTokenBalance(e){Z.loading=!0;let r=m.state.activeChain,t=m.state.activeCaipNetwork?.caipNetworkId,n=m.state.activeCaipNetwork?.chainNamespace,s=m.getAccountData(r)?.caipAddress??m.state.activeCaipAddress,a=s?O.getPlainAddress(s):void 0;if(Z.lastRetry&&!O.isAllowedRetry(Z.lastRetry,30*se.ONE_SEC_MS))return Z.loading=!1,[];try{if(a&&t&&n){let o=await nt.getMyTokensWithBalance();return Z.tokenBalances=o,Z.lastRetry=void 0,o}}catch(o){Z.lastRetry=Date.now(),e?.(o),We.showError("Token Balance Unavailable")}finally{Z.loading=!1}return[]},fetchNetworkBalance(){if(Z.tokenBalances.length===0)return;let e=zn.mapBalancesToSwapTokens(Z.tokenBalances);if(!e)return;let r=e.find(t=>t.address===zt());r&&(Z.networkBalanceInUSD=r?$r.multiply(r.quantity.numeric,r.price).toString():"0")},async sendNativeToken(e){B.pushTransactionStack({});let r=e.receiverAddress,t=m.getAccountData()?.address,n=b.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),a=await b.sendTransaction({chainNamespace:k.CHAIN.EVM,to:r,address:t,data:"0x",value:n??BigInt(0)});return Y.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Te("eip155")===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token?.symbol||"",amount:e.sendTokenAmount,network:m.state.activeCaipNetwork?.caipNetworkId||"",hash:a||""}}),b._getClient()?.updateBalance("eip155"),K.resetSend(),{hash:a}},async sendERC20Token(e){B.pushTransactionStack({onSuccess(){B.replace("Account")}});let r=b.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),t=m.getAccountData()?.address;if(t&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let n=O.getPlainAddress(e.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");let s=await b.writeContract({fromAddress:t,tokenAddress:n,args:[e.receiverAddress,r??BigInt(0)],method:"transfer",abi:Yr.getERC20Abi(n),chainNamespace:k.CHAIN.EVM});return Y.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Te("eip155")===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token?.symbol||"",amount:e.sendTokenAmount,network:m.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),K.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){if(!K.state.sendTokenAmount||!K.state.receiverAddress)throw new Error("An amount and receiver address are required");B.pushTransactionStack({onSuccess(){B.replace("Account")}});let e;K.state.token&&K.state.token.address!==se.SOLANA_NATIVE_TOKEN_ADDRESS&&(O.isCaipAddress(K.state.token.address)?e=O.getPlainAddress(K.state.token.address):e=K.state.token.address);let r=await b.sendTransaction({chainNamespace:"solana",tokenMint:e,to:K.state.receiverAddress,value:K.state.sendTokenAmount});r&&(Z.hash=r),b._getClient()?.updateBalance("solana"),K.resetSend()},resetSend(){Z.token=void 0,Z.sendTokenAmount=void 0,Z.receiverAddress=void 0,Z.receiverProfileImageUrl=void 0,Z.receiverProfileName=void 0,Z.loading=!1,Z.tokenBalances=[]}},K=pe(Mi);var Vr={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Qt={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},C=V({chains:Mn(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),qn={state:C,subscribe(e){return ee(C,()=>{e(C)})},subscribeKey(e,r){return te(C,e,r)},subscribeAccountStateProp(e,r,t){let n=t||C.activeChain;return n?te(C.chains.get(n)?.accountState||{},e,r):()=>{}},subscribeChainProp(e,r,t){let n;return ee(C.chains,()=>{let s=t||C.activeChain;if(s){let a=C.chains.get(s)?.[e];n!==a&&(n=a,r(a))}})},initialize(e,r,t){let{chainId:n,namespace:s}=_.getActiveNetworkProps(),a=r?.find(p=>p.id.toString()===n?.toString()),c=e.find(p=>p?.namespace===s)||e?.[0],l=e.map(p=>p.namespace).filter(p=>p!==void 0),d=U.state.enableEmbedded?new Set([...l]):new Set([...r?.map(p=>p.chainNamespace)??[]]);(e?.length===0||!c)&&(C.noAdapters=!0),C.noAdapters||(C.activeChain=c?.namespace,C.activeCaipNetwork=a,m.setChainNetworkData(c?.namespace,{caipNetwork:a}),C.activeChain&&xe.set({activeChain:c?.namespace})),d.forEach(p=>{let f=r?.filter(oe=>oe.chainNamespace===p),G=_.getPreferredAccountTypes()||{},I=u(u({},U.state.defaultAccountTypes),G);m.state.chains.set(p,u({namespace:p,networkState:V(h(u({},Qt),{caipNetwork:f?.[0]})),accountState:V(h(u({},Vr),{preferredAccountType:I[p]})),caipNetworks:f??[]},t)),m.setRequestedCaipNetworks(f??[],p)})},removeAdapter(e){if(C.activeChain===e){let r=Array.from(C.chains.entries()).find(([t])=>t!==e);if(r){let t=r[1]?.caipNetworks?.[0];t&&m.setActiveCaipNetwork(t)}}C.chains.delete(e)},addAdapter(e,{connectionControllerClient:r},t){if(!e.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");C.chains.set(e.namespace,{namespace:e.namespace,networkState:h(u({},Qt),{caipNetwork:t[0]}),accountState:u({},Vr),caipNetworks:t,connectionControllerClient:r}),m.setRequestedCaipNetworks(t?.filter(n=>n.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let r=C.chains.get(e.chainNamespace);if(r){let t=[...r.caipNetworks||[]];r.caipNetworks?.find(n=>n.id===e.id)||t.push(e),C.chains.set(e.chainNamespace,h(u({},r),{caipNetworks:t})),m.setRequestedCaipNetworks(t,e.chainNamespace),R.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,r){let t=C.chains.get(e);if(t){let n=C.activeCaipNetwork?.id===r,s=[...t.caipNetworks?.filter(a=>a.id!==r)||[]];n&&t?.caipNetworks?.[0]&&m.setActiveCaipNetwork(t.caipNetworks[0]),C.chains.set(e,h(u({},t),{caipNetworks:s})),m.setRequestedCaipNetworks(s||[],e),s.length===0&&R.filterByNamespace(e,!1)}},setAdapterNetworkState(e,r){let t=C.chains.get(e);t&&(t.networkState=u(u({},t.networkState||Qt),r),C.chains.set(e,t))},setChainAccountData(e,r,t=!0){if(!e)throw new Error("Chain is required to update chain account data");let n=C.chains.get(e);if(n){let s=u(u({},n.accountState||Vr),r);C.chains.set(e,h(u({},n),{accountState:s})),(C.chains.size===1||C.activeChain===e)&&r.caipAddress&&(C.activeCaipAddress=r.caipAddress)}},setChainNetworkData(e,r){if(!e)return;let t=C.chains.get(e);if(t){let n=u(u({},t.networkState||Qt),r);C.chains.set(e,h(u({},t),{networkState:n}))}},setAccountProp(e,r,t,n=!0){m.setChainAccountData(t,{[e]:r},n)},setActiveNamespace(e){C.activeChain=e;let r=e?C.chains.get(e):void 0,t=r?.networkState?.caipNetwork;t?.id&&e&&(C.activeCaipAddress=r?.accountState?.caipAddress,C.activeCaipNetwork=t,m.setChainNetworkData(e,{caipNetwork:t}),_.setActiveCaipNetworkId(t?.caipNetworkId),xe.set({activeChain:e,selectedNetworkId:t?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;let r=C.activeChain===e.chainNamespace;r||m.setIsSwitchingNamespace(!0);let t=C.chains.get(e.chainNamespace);C.activeChain=e.chainNamespace,C.activeCaipNetwork=e,m.setChainNetworkData(e.chainNamespace,{caipNetwork:e});let n=t?.accountState?.address;if(n)C.activeCaipAddress=`${e.chainNamespace}:${e.id}:${n}`;else if(r&&C.activeCaipAddress){let{address:a}=he.parseCaipAddress(C.activeCaipAddress);n=a,C.activeCaipAddress=`${e.caipNetworkId}:${n}`}else C.activeCaipAddress=void 0;m.setChainAccountData(e.chainNamespace,{address:n,caipAddress:C.activeCaipAddress}),K.resetSend(),xe.set({activeChain:C.activeChain,selectedNetworkId:C.activeCaipNetwork?.caipNetworkId}),_.setActiveCaipNetworkId(e.caipNetworkId),!m.checkIfSupportedNetwork(e.chainNamespace)&&U.state.enableNetworkSwitch&&!U.state.allowUnsupportedChain&&!b.state.wcBasic&&m.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let r=C.chains.get(e.chainNamespace);r&&r?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let r=e!==m.state.activeChain,t=m.getNetworkData(e)?.caipNetwork,n=m.getCaipNetworkByNamespace(e,t?.id);r&&n&&await m.switchActiveNetwork(n)},async switchActiveNetwork(e,{throwOnFailure:r=!1}={}){let t=m.state.activeChain;if(!t)throw new Error("ChainController:switchActiveNetwork - namespace is required");let n=Yn.getProviderId(C.activeChain)==="AUTH",s=m.getAccountData(t)?.address,a=k.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e.chainNamespace);try{if(s&&e.chainNamespace===t||n&&a){let o=$n.get(e.chainNamespace);if(!o)throw new Error("Adapter not found");await o.switchNetwork({caipNetwork:e})}m.setActiveCaipNetwork(e)}catch(o){if(r)throw o}Y.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})},getConnectionControllerClient(e){let r=e||C.activeChain;if(!r)throw new Error("Chain is required to get connection controller client");let t=C.chains.get(r);if(!t?.connectionControllerClient)throw new Error("ConnectionController client not set");return t.connectionControllerClient},getNetworkProp(e,r){let t=C.chains.get(r)?.networkState;if(t)return t[e]},getRequestedCaipNetworks(e){let r=C.chains.get(e),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:n=[]}=r?.networkState||{};return O.sortRequestedNetworks(t,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){let e=[];return C.chains.forEach(r=>{if(!r.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");let t=m.getRequestedCaipNetworks(r.namespace);e.push(...t)}),e},setRequestedCaipNetworks(e,r){m.setAdapterNetworkState(r,{requestedCaipNetworks:e});let n=m.getAllRequestedCaipNetworks().map(a=>a.chainNamespace),s=Array.from(new Set(n));R.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){let e=[];return C.chains.forEach(r=>{if(!r.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");let t=m.getApprovedCaipNetworkIds(r.namespace);e.push(...t)}),e},getActiveCaipNetwork(e){return e?C.chains.get(e)?.networkState?.caipNetwork:C.activeCaipNetwork},getActiveCaipAddress(){return C.activeCaipAddress},getApprovedCaipNetworkIds(e){return C.chains.get(e)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(e,r){m.setAdapterNetworkState(e,r)},checkIfSupportedNetwork(e,r){let t=r||C.activeCaipNetwork?.caipNetworkId,n=m.getRequestedCaipNetworks(e);return n.length?n?.some(s=>s.caipNetworkId===t):!0},checkIfSupportedChainId(e){return C.activeChain?m.getRequestedCaipNetworks(C.activeChain)?.some(t=>t.id===e):!0},checkIfSmartAccountEnabled(){let e=Zr.caipNetworkIdToNumber(C.activeCaipNetwork?.caipNetworkId);return!C.activeChain||!e?!1:!!(ce.get(E.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(e.toString())},showUnsupportedChainUI(){ne.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=C.activeCaipNetwork;return!!(e?.chainNamespace&&se.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){m.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){let r=e;if(!r)throw new Error("Chain is required to set account prop");let t=m.state.chains.get(r)?.accountState?.preferredAccountType,n=U.state.defaultAccountTypes[r];C.activeCaipAddress=void 0,m.setChainAccountData(r,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||t,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),R.removeConnectorId(r)},setIsSwitchingNamespace(e){C.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[],r;if(C.chains.forEach(t=>{k.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return r=t?C.chains.get(t)?.caipNetworks?.[0]:void 0,r}},getAccountData(e){let r=e||C.activeChain;if(r)return m.state.chains.get(r)?.accountState},getNetworkData(e){let r=e||C.activeChain;if(r)return m.state.chains.get(r)?.networkState},getCaipNetworkByNamespace(e,r){if(!e)return;let t=m.state.chains.get(e),n=t?.caipNetworks?.find(s=>s.id.toString()===r?.toString());return n||t?.networkState?.caipNetwork||t?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=R.state.filterByNamespace;return(e?[C.chains.get(e)]:Array.from(C.chains.values())).flatMap(t=>t?.caipNetworks||[]).map(t=>t.caipNetworkId)},getCaipNetworks(e){return e?m.getRequestedCaipNetworks(e):m.getAllRequestedCaipNetworks()},getCaipNetworkById(e,r){return qn.getCaipNetworks(r).find(t=>t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString())},setLastConnectedSIWECaipNetwork(e){C.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork(){return C.lastConnectedSIWECaipNetwork},async fetchTokenBalance(e){let r=m.getAccountData();if(!r)return[];let t=m.state.activeCaipNetwork?.caipNetworkId,n=m.state.activeCaipNetwork?.chainNamespace,s=m.state.activeCaipAddress,a=s?O.getPlainAddress(s):void 0;if(m.setAccountProp("balanceLoading",!0,n),r.lastRetry&&!O.isAllowedRetry(r.lastRetry,30*se.ONE_SEC_MS))return m.setAccountProp("balanceLoading",!1,n),[];try{if(a&&t&&n){let o=await nt.getMyTokensWithBalance();return m.setAccountProp("tokenBalance",o,n),m.setAccountProp("lastRetry",void 0,n),m.setAccountProp("balanceLoading",!1,n),o}}catch(o){m.setAccountProp("lastRetry",Date.now(),n),e?.(o),We.showError("Token Balance Unavailable")}finally{m.setAccountProp("balanceLoading",!1,n)}return[]},isCaipNetworkDisabled(e){let r=e.chainNamespace,t=!!m.getAccountData(r)?.caipAddress,n=m.getAllApprovedCaipNetworkIds(),s=m.getNetworkProp("supportsAllNetworks",r)!==!1,a=R.getConnectorId(r),o=R.getAuthConnector(),c=a===k.CONNECTOR_ID.AUTH&&o;return!t||s||c?!1:!n?.includes(e.caipNetworkId)}},m=pe(qn);var Di={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Jn=O.getBlockchainApiUrl(),we=V({clientId:null,api:new Re({baseUrl:Jn,clientId:null}),supportedChains:{http:[],ws:[]}}),D={state:we,async get(e){let{st:r,sv:t}=D.getSdkProperties(),n=U.state.projectId,s=h(u({},e.params||{}),{st:r,sv:t,projectId:n});return we.api.get(h(u({},e),{params:s}))},getSdkProperties(){let{sdkType:e,sdkVersion:r}=U.state;return{st:e||"unknown",sv:r||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{we.supportedChains.http.length||await D.getSupportedNetworks()}catch{return!1}return we.supportedChains.http.includes(e)},async getSupportedNetworks(){try{let e=await D.get({path:"v1/supported-chains"});return we.supportedChains=e,e}catch{return we.supportedChains}},async fetchIdentity({address:e}){let r=_.getIdentityFromCacheForAddress(e);if(r)return r;let t=await D.get({path:`/v1/identity/${e}`,params:{sender:m.state.activeCaipAddress?O.getPlainAddress(m.state.activeCaipAddress):void 0}});return _.updateIdentityCache({address:e,identity:t,timestamp:Date.now()}),t},async fetchTransactions({account:e,cursor:r,signal:t,cache:n,chainId:s}){if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};let o=_.getTransactionsCacheForAddress({address:e,chainId:s});if(o)return o;let c=await D.get({path:`/v1/account/${e}/history`,params:{cursor:r,chainId:s},signal:t,cache:n});return _.updateTransactionsCache({address:e,chainId:s,timestamp:Date.now(),transactions:c}),c},async fetchSwapQuote({amount:e,userAddress:r,from:t,to:n,gasPrice:s}){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:r,from:t,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:e}){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]}},async fetchTokenPrice({addresses:e}){if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};let t=_.getTokenPriceCacheForAddresses(e);if(t)return t;let n=await we.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:U.state.projectId},headers:{"Content-Type":"application/json"}});return _.updateTokenPriceCache({addresses:e,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:e,userAddress:r}){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:r},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:e}){let{st:r,sv:t}=D.getSdkProperties();if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return D.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:r,sv:t}})},async generateSwapCalldata({amount:e,from:r,to:t,userAddress:n,disableEstimate:s}){if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return we.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:se.CONVERT_SLIPPAGE_TOLERANCE},projectId:U.state.projectId,from:r,to:t,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:e,to:r,userAddress:t}){let{st:n,sv:s}=D.getSdkProperties();if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return D.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:e,to:r,st:n,sv:s}})},async getBalance(e,r,t){let{st:n,sv:s}=D.getSdkProperties();if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))return We.showError("Token Balance Unavailable"),{balances:[]};let o=`${r}:${e}`,c=_.getBalanceCacheForCaipAddress(o);if(c)return c;let l=await D.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:r,forceUpdate:t,st:n,sv:s}});return _.updateBalanceCache({caipAddress:o,balance:l,timestamp:Date.now()}),l},async lookupEnsName(e){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:e}){if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))return[];let t=m.getAccountData()?.address;return D.get({path:`/v1/profile/reverse/${e}`,params:{sender:t,apiVersion:"2"}})},async getEnsNameSuggestions(e){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:e,address:r,message:t,signature:n}){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?we.api.post({path:"/v1/profile/account",body:{coin_type:e,address:r,message:t,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:e,partnerUserId:r,defaultNetwork:t,purchaseAmount:n,paymentAmount:s}){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?(await we.api.post({path:"/v1/generators/onrampurl",params:{projectId:U.state.projectId},body:{destinationWallets:e,defaultNetwork:t,partnerUserId:r,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await D.get({path:"/v1/onramp/options"})}catch{return Di}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:r,amount:t,network:n}){try{return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?await we.api.post({path:"/v1/onramp/quote",params:{projectId:U.state.projectId},body:{purchaseCurrency:e,paymentCurrency:r,amount:t,network:n}}):null}catch{return{networkFee:{amount:t,currency:r.id},paymentSubtotal:{amount:t,currency:r.id},paymentTotal:{amount:t,currency:r.id},purchaseAmount:{amount:t,currency:r.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(e){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?D.get({path:`/v1/sessions/${e}`}):[]},async revokeSmartSession(e,r,t){return await D.isNetworkSupported(m.state.activeCaipNetwork?.caipNetworkId)?we.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:U.state.projectId},body:{pci:r,signature:t}}):{success:!1}},setClientId(e){we.clientId=e,we.api=new Re({baseUrl:Jn,clientId:e})}};export{V as a,ee as b,Ue as c,te as d,Bi as e,Wi as f,se as g,_ as h,O as i,re as j,Ce as k,_c as l,Nr as m,bn as n,ti as o,kn as p,On as q,Or as r,Dn as s,U as t,We as u,D as v,Ye as w,pe as x,_e as y,jn as z,Y as A,x as B,B as C,gt as D,R as E,zt as F,Te as G,_u as H,Br as I,Ct as J,b as K,nt as L,$n as M,Yn as N,xe as O,zn as P,K as Q,m as R,Gn as S,ne as T};
