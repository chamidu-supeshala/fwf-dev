import{B as oe,F as re,N as ae,P as se,S as ce,Y as le,aa as j,b as K,ba as A,c as Y,d as J,ea as pe,f as X,ga as ge,ha as de,i as ee,ia as me,oa as ue,t as te,va as _e,w as ne,wa as fe,xa as he,z as ie,za as ve}from"./chunk-QG2MHF5G.js";import{$ as C,$b as h,Ab as p,Bb as x,G as R,Hb as E,Ib as u,La as y,Na as k,Nb as m,Oa as a,Pb as c,Tb as T,Ua as _,Ub as P,V as b,Vb as V,Wb as L,_a as G,bc as w,cb as B,da as M,db as f,dc as $,ea as F,ec as Q,f as N,fc as z,g as U,gb as D,hb as H,ka as g,la as d,nc as I,qc as W,rc as Z,tc as q,yb as s,zb as l}from"./chunk-TQGWX7UN.js";var we={BACK_TO_PREVIOUS_SCROLL:"back_to_previous_scroll",OPEN_LANGUAGE_MODAL:"OPEN_LANGUAGE_MODAL"},S=class t{_actions={};constructor(){}getAction(o){if(!this._actions[o]){let e=new D;this._actions[o]=e}return this._actions[o]}static \u0275fac=function(e){return new(e||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};var O=class t{constructor(o,e){this.router=o;this.ngZone=e;this.isDebug$.subscribe(i=>{this.isInit=!0}),this.reload$.pipe(R(100)).subscribe(i=>{let n=this.router.url;this.router.navigateByUrl("/blank",{skipLocationChange:!0}).then(()=>this.router.navigateByUrl(n,{replaceUrl:!0}))})}isDebug$=new U(!1);reload$=new N;toggle(){this.ngZone.run(()=>{this.isDebug$.next(!this.isDebug$.getValue())})}isInit=!1;static \u0275fac=function(e){return new(e||t)(M(ne),M(H))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};var Se=t=>[t],Ce=t=>({activated:t});function Oe(t,o){if(t&1&&(l(0,"div",8),h(1),p()),t&2){let e=c();a(),w(" ",e.currentLang.text," ")}}function Me(t,o){t&1&&x(0,"ion-icon",9)}function ke(t,o){if(t&1&&(l(0,"ion-content",11),E(1,12),p()),t&2){c(2);let e=L(7);a(),s("ngTemplateOutlet",e)}}function Ee(t,o){if(t&1){let e=u();l(0,"ion-popover",10),m("didDismiss",function(){g(e);let n=c();return d(n.isPopoverOpen=!1)}),f(1,ke,2,1,"ng-template"),p()}if(t&2){let e=c();s("isOpen",e.isPopoverOpen)("keepContentsMounted",!0)}}function Te(t,o){if(t&1){let e=u();l(0,"div",14)(1,"div",15),h(2),W(3,"translate"),p(),l(4,"ion-icon",16),m("click",function(){g(e),c();let n=L(1);return d(n.dismiss())}),p()(),E(5,12)}if(t&2){c(2);let e=L(7);a(2),w(" ",Z(3,2,"language-select")," "),a(3),s("ngTemplateOutlet",e)}}function Pe(t,o){if(t&1){let e=u();l(0,"ion-modal",13,1),m("didDismiss",function(){g(e);let n=c();return d(n.isModalOpen=!1)}),f(2,Te,6,4,"ng-template"),p()}if(t&2){let e=c();s("isOpen",e.isModalOpen)}}function Ve(t,o){if(t&1){let e=u();l(0,"ion-item",21),m("click",function(){let n=g(e).$implicit,r=c(2);return d(r.setLanguage(n))}),x(1,"img",22),l(2,"ion-label",23),h(3),p()()}if(t&2){let e=o.$implicit,i=c(2);s("ngClass",I(3,Ce,i.currentLang.code===e.code)),a(),s("src",e.icon,y),a(2),w(" ",e.text," ")}}function je(t,o){if(t&1){let e=u();l(0,"ion-item",21),m("click",function(){g(e);let n=c(2);return d(n.setLanguage(n.langDebug,!1))}),l(1,"div",24),x(2,"img",25),p(),l(3,"ion-label",23),h(4),p()()}if(t&2){let e=c(2);s("ngClass",I(3,Ce,e.currentLang.code===e.langDebug.code)),a(2),s("src",e.langDebug.icon,y),a(2),w(" ",e.langDebug.text," ")}}function Ae(t,o){if(t&1){let e=u();l(0,"ion-item",26)(1,"ion-checkbox",27),z("ngModelChange",function(n){g(e);let r=c(2);return Q(r.userService.isDebugMode,n)||(r.userService.isDebugMode=n),d(n)}),m("ngModelChange",function(){g(e);let n=c(2);return d(n.handleChange())}),p(),l(2,"ion-label",28),h(3,"Debug Mode"),p()()}if(t&2){let e=c(2);a(),$("ngModel",e.userService.isDebugMode)}}function Ne(t,o){if(t&1&&(l(0,"ion-list",17),f(1,Ve,4,5,"ion-item",18)(2,je,5,5,"ion-item",19)(3,Ae,4,1,"ion-item",20),p()),t&2){let e=c();a(),s("ngForOf",e.languages),a(),s("ngIf",e.showHiddenOption),a(),s("ngIf",e.showHiddenOption)}}var be=class t extends ve{constructor(e,i,n,r,v){super();this.activatedRoute=e;this.translateService=i;this.storage=n;this.userService=r;this.action=v}showText=!1;showIcon=!1;hideModal=!1;interface="popover";listenGlobalEvent=!1;popover;ionModal;onSetLanguage=new D;isModalOpen=!1;isPopoverOpen=!1;languages=[{icon:"assets/images/English.svg",text:"English",code:"en"},{icon:"assets/images/china.svg",text:"\u7B80\u4F53\u4E2D\u6587",code:"cn"},{icon:"assets/images/china-tradition.svg",text:"\u7E41\u9AD4\u4E2D\u6587",code:"tr"}];langDebug={icon:"assets/images/brackets.png",text:"Show Key",code:"langDebug"};currentLang=this.languages[0];ngOnInit(){this.listenGlobalEvent&&this.action.getAction(we.OPEN_LANGUAGE_MODAL).pipe(b(this.onDestroy$)).subscribe(i=>{this.handleGlobalEvent(i)});let e=this.translateService.currentLang;e===this.langDebug.code?this.currentLang=this.langDebug:this.currentLang=this.languages.find(i=>i.code===e)||this.languages[0],this.translateService.onLangChange.pipe(b(this.onDestroy$)).subscribe(i=>{this.currentLang=this.languages.find(n=>n.code===i.lang)||this.languages[0]}),this.activatedRoute.queryParams.pipe(b(this.onDestroy$)).subscribe(i=>{if(i.lang){let n=this.languages.find(r=>r.code===i.lang)||this.languages[0];this.setLanguage(n)}})}async setLanguage(e,i=!0){this.currentLang=e;let n=new Date(new Date().setFullYear(new Date().getFullYear()+1));i&&await this.storage.set(re,e.code);let r=this.router.url;this.ionModal?.dismiss(),this.popover?.dismiss(),this.onSetLanguage.emit(e),this.router.navigateByUrl("/blank",{skipLocationChange:!0}).then(()=>this.router.navigateByUrl(r,{replaceUrl:!0}).then(()=>{this.translateService.use(e.code)}))}handleTriger(e){console.log(346542456),this.interface==="popover"?(this.popover.event=e,this.isPopoverOpen=!0):this.isModalOpen=!0}handleGlobalEvent(e){e?(this.popover.event=e,this.isPopoverOpen=!0):this.isModalOpen=!0}showHiddenOption=!1;onShift(e){e.keyCode==16&&(this.showHiddenOption=!0)}onShiftRelease(e){e.keyCode==16&&(this.showHiddenOption=!1)}debugService=F(O);handleChange(){this.debugService.isDebug$.next(this.userService.isDebugMode)}static \u0275fac=function(i){return new(i||t)(_(te),_(_e),_(oe),_(ae),_(S))};static \u0275cmp=G({type:t,selectors:[["app-language-dropdown"]],viewQuery:function(i,n){if(i&1&&(T(A,5),T(j,5)),i&2){let r;P(r=V())&&(n.popover=r.first),P(r=V())&&(n.ionModal=r.first)}},hostBindings:function(i,n){i&1&&m("keydown",function(v){return n.onShift(v)},k)("keyup",function(v){return n.onShiftRelease(v)},k)},inputs:{showText:"showText",showIcon:"showIcon",hideModal:"hideModal",interface:"interface",listenGlobalEvent:"listenGlobalEvent"},outputs:{onSetLanguage:"onSetLanguage"},features:[B],decls:8,vars:8,consts:[["languageList",""],["modal",""],[1,"flex","justify-center","items-center","py-1.5","rounded-full","h-full",3,"click"],[1,"h-4","md:h-5","flex-shrink-0",3,"ngClass","src"],["class","ml-2 text-strong language-dropdown-text whitespace-nowrap text-base md:text-lg",4,"ngIf"],["class","ml-1","name","chevron-down-outline",4,"ngIf"],["class","theme-popover","side","bottom","alignment","center",3,"isOpen","keepContentsMounted","didDismiss",4,"ngIf"],["class","glass-modal",3,"isOpen","didDismiss",4,"ngIf"],[1,"ml-2","text-strong","language-dropdown-text","whitespace-nowrap","text-base","md:text-lg"],["name","chevron-down-outline",1,"ml-1"],["side","bottom","alignment","center",1,"theme-popover",3,"didDismiss","isOpen","keepContentsMounted"],[2,"--background","transparent"],[3,"ngTemplateOutlet"],[1,"glass-modal",3,"didDismiss","isOpen"],[1,"modal-header"],[1,"modal-title","text-2xl","md:text-3xl","flex","justify-center","font-bold","pt-3","md:pt-4","capitalize"],["name","close-outline",1,"modal-close-btn","rounded-md","w-10","xs:w-10","h-10","xs:h-10","absolute","-right-2","-top-3","3xs:-right-3",3,"click"],["lines","full",1,"py-3"],["class","cursor-pointer","lines","none",3,"ngClass","click",4,"ngFor","ngForOf"],["class","cursor-pointer","lines","none",3,"ngClass","click",4,"ngIf"],["lines","none","class","cursor-pointer",4,"ngIf"],["lines","none",1,"cursor-pointer",3,"click","ngClass"],[1,"mr-2","h-8",3,"src"],[1,"text-text-strong","my-4","font-bold","whitespace-nowrap"],[1,"flex","justify-center","items-center","w-11","mr-2","flex-shrink-0"],[1,"h-8","brackets",3,"src"],["lines","none",1,"cursor-pointer"],[1,"my-0","mr-4","ml-2","w-7","h-7",2,"--border-color","var(--strong)",3,"ngModelChange","ngModel"],[1,"my-1","text-text-strong","font-bold"]],template:function(i,n){if(i&1){let r=u();l(0,"button",2),m("click",function(De){return g(r),d(n.handleTriger(De))}),x(1,"img",3),f(2,Oe,2,1,"div",4)(3,Me,1,0,"ion-icon",5),p(),f(4,Ee,2,2,"ion-popover",6)(5,Pe,3,1,"ion-modal",7)(6,Ne,4,3,"ng-template",null,0,q)}i&2&&(a(),s("ngClass",I(6,Se,n.currentLang.code===n.langDebug.code?"brackets":""))("src",n.currentLang.icon,y),a(),s("ngIf",n.showText),a(),s("ngIf",n.showIcon),a(),s("ngIf",!n.hideModal),a(),s("ngIf",!n.hideModal))},dependencies:[ee,K,Y,J,X,le,se,ce,ie,he,ue,A,j,de,ge,pe,me,fe],styles:['ion-popover[_ngcontent-%COMP%]{--backdrop-opacity: 0;--max-width: 206px}ion-list[_ngcontent-%COMP%]{background:transparent}ion-item[_ngcontent-%COMP%]{--color: rgb(var(--strong));--background: transparent;font-size:20px}ion-item[_ngcontent-%COMP%]:hover{--background: rgb(var(--main-purple) / .06)}ion-item.activated[_ngcontent-%COMP%]{--background: rgb(var(--main-purple) / .1);--color: rgb(var(--main-purple))}ion-item.activated[_ngcontent-%COMP%]:after, ion-item.activated[_ngcontent-%COMP%]:before{content:"";width:3px;height:100%;position:absolute;top:0;bottom:0;--tw-bg-opacity: 1;background-color:rgb(var(--main-purple) / var(--tw-bg-opacity, 1))}ion-item.activated[_ngcontent-%COMP%]:before{left:0}ion-item.activated[_ngcontent-%COMP%]:after{right:0}ion-modal[_ngcontent-%COMP%]{--width: 250px;--height: auto;--border-width: 0;--background: var(--panel-1)}@media (min-width: 768px){ion-modal[_ngcontent-%COMP%]{--width: 320px}}  .brackets{flex-shrink:0}  .dark-mode .brackets,   app-header .brackets{filter:brightness(0) invert(1)}']})};var ye=class t{static injector;static setInjector(o){console.log(4556345345,o),t.injector=o}static getInjector(){return t.injector}};export{we as a,S as b,be as c,ye as d};
