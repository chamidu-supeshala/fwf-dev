import"./chunk-5V5RJYSA.js";import{b as Se,c as Mt,d as kt,e as Ie,f as Ot,g as Lt,h as Oi}from"./chunk-5N6VGJHR.js";import"./chunk-7UZYWCAJ.js";import"./chunk-GBPRYQYN.js";import{a as ki,b as Dt}from"./chunk-DXV5FKFK.js";import{A as G,B as bt,C as xi,Ca as te,D as Ne,Da as j,E as wt,Ga as U,H as Me,Ha as Mi,I as He,Ia as z,J as Zt,K as ke,M as X,N as Ue,O as le,Oa as Di,P as $e,Q as Ge,R as Si,T as je,U as ze,V as qe,W as xt,X as We,Y as ee,Z as be,aa as St,b as _t,d as _e,f as Ce,g as Ct,i as Z,oa as we,p as Ci,pa as Ke,qa as Ii,ra as Ei,s as bi,sa as xe,t as Be,ta as It,va as Et,w as wi,wa as he,xa as oe,ya as Ti,z as J,za as Tt}from"./chunk-QG2MHF5G.js";import"./chunk-NKG5QJFS.js";import"./chunk-QUJFQN2Y.js";import"./chunk-XSE7VYFF.js";import"./chunk-RXCMDSKT.js";import"./chunk-LATL2TC6.js";import"./chunk-V7MCRQOR.js";import"./chunk-GZRP6ZXQ.js";import"./chunk-O2REEJ2X.js";import"./chunk-QOOFSVWP.js";import"./chunk-PKG65ASR.js";import"./chunk-NLNGYEN6.js";import"./chunk-SALVUVHZ.js";import"./chunk-4ZW52FCY.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-3QQLWDM5.js";import"./chunk-CKP3SGE2.js";import"./chunk-GNVVPZOR.js";import{$ as ct,$a as ui,$b as D,A as oi,Aa as Fe,Ab as _,Bb as A,C as ri,Cb as ft,Db as gt,E as ai,Eb as mi,Fb as hi,Gb as fi,Hb as pe,Ib as V,Jb as gi,La as ci,Nb as O,Oa as m,Ob as yi,Pb as x,Qb as yt,Ra as pt,Rb as vt,Sb as vi,Ta as di,Tb as ge,Ua as B,Ub as ue,V as de,Vb as me,Wa as pi,Wb as N,Yb as R,_a as K,aa as si,ab as ut,ac as W,bc as H,cb as ne,cc as Qt,da as Ae,db as F,dc as nt,ec as ot,fc as rt,gb as Y,hb as Ve,jc as ye,ka as S,l as ni,la as I,ma as Te,mc as ve,na as Kt,nc as fe,p as se,pc as _i,q as Re,qc as E,r as it,rc as T,tb as mt,tc as Q,ub as ht,xa as dt,ya as li,yb as C,z as ie,zb as y}from"./chunk-TQGWX7UN.js";import"./chunk-3VF75X5I.js";import"./chunk-CPWC3ZS2.js";import"./chunk-FNEHRYPQ.js";import"./chunk-5L7QZ573.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-66J23OD7.js";import"./chunk-M2X7KQLB.js";import"./chunk-OZYWYLNK.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-42C7ZIID.js";import{a as zt,b as qt,g as Pe,j as Wt}from"./chunk-QGXACWGO.js";var Vi=Pe((ur,Fi)=>{"use strict";(function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return a.rotl(e,8)&16711935|a.rotl(e,24)&4278255360;for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(e){for(var t=[],i=0,o=0;i<e.length;i++,o+=8)t[o>>>5]|=e[i]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<e.length*32;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((e[i]&15).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var t=[],i=0;i<e.length;i+=3)for(var o=e[i]<<16|e[i+1]<<8|e[i+2],l=0;l<4;l++)i*8+l*6<=e.length*8?t.push(n.charAt(o>>>6*(3-l)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var t=[],i=0,o=0;i<e.length;o=++i%4)o!=0&&t.push((n.indexOf(e.charAt(i-1))&Math.pow(2,-2*o+8)-1)<<o*2|n.indexOf(e.charAt(i))>>>6-o*2);return t}};Fi.exports=a})()});var Jt=Pe((mr,Bi)=>{"use strict";var Xt={utf8:{stringToBytes:function(n){return Xt.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(Xt.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var a=[],e=0;e<n.length;e++)a.push(n.charCodeAt(e)&255);return a},bytesToString:function(n){for(var a=[],e=0;e<n.length;e++)a.push(String.fromCharCode(n[e]));return a.join("")}}};Bi.exports=Xt});var Ui=Pe((hr,Hi)=>{"use strict";Hi.exports=function(n){return n!=null&&(Ni(n)||pn(n)||!!n._isBuffer)};function Ni(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function pn(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&Ni(n.slice(0,0))}});var ei=Pe((fr,$i)=>{"use strict";(function(){var n=Vi(),a=Jt().utf8,e=Ui(),t=Jt().bin,i=function(o,l){o.constructor==String?l&&l.encoding==="binary"?o=t.stringToBytes(o):o=a.stringToBytes(o):e(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var c=n.bytesToWords(o),M=o.length*8,d=1732584193,f=-271733879,h=-1732584194,g=271733878,v=0;v<c.length;v++)c[v]=(c[v]<<8|c[v]>>>24)&16711935|(c[v]<<24|c[v]>>>8)&4278255360;c[M>>>5]|=128<<M%32,c[(M+64>>>9<<4)+14]=M;for(var L=i._ff,k=i._gg,p=i._hh,r=i._ii,v=0;v<c.length;v+=16){var s=d,u=f,b=h,w=g;d=L(d,f,h,g,c[v+0],7,-680876936),g=L(g,d,f,h,c[v+1],12,-389564586),h=L(h,g,d,f,c[v+2],17,606105819),f=L(f,h,g,d,c[v+3],22,-1044525330),d=L(d,f,h,g,c[v+4],7,-176418897),g=L(g,d,f,h,c[v+5],12,1200080426),h=L(h,g,d,f,c[v+6],17,-1473231341),f=L(f,h,g,d,c[v+7],22,-45705983),d=L(d,f,h,g,c[v+8],7,1770035416),g=L(g,d,f,h,c[v+9],12,-1958414417),h=L(h,g,d,f,c[v+10],17,-42063),f=L(f,h,g,d,c[v+11],22,-1990404162),d=L(d,f,h,g,c[v+12],7,1804603682),g=L(g,d,f,h,c[v+13],12,-40341101),h=L(h,g,d,f,c[v+14],17,-1502002290),f=L(f,h,g,d,c[v+15],22,1236535329),d=k(d,f,h,g,c[v+1],5,-165796510),g=k(g,d,f,h,c[v+6],9,-1069501632),h=k(h,g,d,f,c[v+11],14,643717713),f=k(f,h,g,d,c[v+0],20,-373897302),d=k(d,f,h,g,c[v+5],5,-701558691),g=k(g,d,f,h,c[v+10],9,38016083),h=k(h,g,d,f,c[v+15],14,-660478335),f=k(f,h,g,d,c[v+4],20,-405537848),d=k(d,f,h,g,c[v+9],5,568446438),g=k(g,d,f,h,c[v+14],9,-1019803690),h=k(h,g,d,f,c[v+3],14,-187363961),f=k(f,h,g,d,c[v+8],20,1163531501),d=k(d,f,h,g,c[v+13],5,-1444681467),g=k(g,d,f,h,c[v+2],9,-51403784),h=k(h,g,d,f,c[v+7],14,1735328473),f=k(f,h,g,d,c[v+12],20,-1926607734),d=p(d,f,h,g,c[v+5],4,-378558),g=p(g,d,f,h,c[v+8],11,-2022574463),h=p(h,g,d,f,c[v+11],16,1839030562),f=p(f,h,g,d,c[v+14],23,-35309556),d=p(d,f,h,g,c[v+1],4,-1530992060),g=p(g,d,f,h,c[v+4],11,1272893353),h=p(h,g,d,f,c[v+7],16,-155497632),f=p(f,h,g,d,c[v+10],23,-1094730640),d=p(d,f,h,g,c[v+13],4,681279174),g=p(g,d,f,h,c[v+0],11,-358537222),h=p(h,g,d,f,c[v+3],16,-722521979),f=p(f,h,g,d,c[v+6],23,76029189),d=p(d,f,h,g,c[v+9],4,-640364487),g=p(g,d,f,h,c[v+12],11,-421815835),h=p(h,g,d,f,c[v+15],16,530742520),f=p(f,h,g,d,c[v+2],23,-995338651),d=r(d,f,h,g,c[v+0],6,-198630844),g=r(g,d,f,h,c[v+7],10,1126891415),h=r(h,g,d,f,c[v+14],15,-1416354905),f=r(f,h,g,d,c[v+5],21,-57434055),d=r(d,f,h,g,c[v+12],6,1700485571),g=r(g,d,f,h,c[v+3],10,-1894986606),h=r(h,g,d,f,c[v+10],15,-1051523),f=r(f,h,g,d,c[v+1],21,-2054922799),d=r(d,f,h,g,c[v+8],6,1873313359),g=r(g,d,f,h,c[v+15],10,-30611744),h=r(h,g,d,f,c[v+6],15,-1560198380),f=r(f,h,g,d,c[v+13],21,1309151649),d=r(d,f,h,g,c[v+4],6,-145523070),g=r(g,d,f,h,c[v+11],10,-1120210379),h=r(h,g,d,f,c[v+2],15,718787259),f=r(f,h,g,d,c[v+9],21,-343485551),d=d+s>>>0,f=f+u>>>0,h=h+b>>>0,g=g+w>>>0}return n.endian([d,f,h,g])};i._ff=function(o,l,c,M,d,f,h){var g=o+(l&c|~l&M)+(d>>>0)+h;return(g<<f|g>>>32-f)+l},i._gg=function(o,l,c,M,d,f,h){var g=o+(l&M|c&~M)+(d>>>0)+h;return(g<<f|g>>>32-f)+l},i._hh=function(o,l,c,M,d,f,h){var g=o+(l^c^M)+(d>>>0)+h;return(g<<f|g>>>32-f)+l},i._ii=function(o,l,c,M,d,f,h){var g=o+(c^(l|~M))+(d>>>0)+h;return(g<<f|g>>>32-f)+l},i._blocksize=16,i._digestsize=16,$i.exports=function(o,l){if(o==null)throw new Error("Illegal argument "+o);var c=n.wordsToBytes(i(o,l));return l&&l.asBytes?c:l&&l.asString?t.bytesToString(c):n.bytesToHex(c)}})()});var Gi=Pe(($a,Vt)=>{"use strict";(function(n){typeof Vt=="object"&&Vt.exports?Vt.exports=n():window.intlTelInput=n()})(function(n){"use strict";return(function(){for(var a=[["Afghanistan (\u202B\u0627\u0641\u063A\u0627\u0646\u0633\u062A\u0627\u0646\u202C\u200E)","af","93"],["Albania (Shqip\xEBri)","al","355"],["Algeria (\u202B\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u202C\u200E)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (\u0540\u0561\u0575\u0561\u057D\u057F\u0561\u0576)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (\xD6sterreich)","at","43"],["Azerbaijan (Az\u0259rbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (\u202B\u0627\u0644\u0628\u062D\u0631\u064A\u0646\u202C\u200E)","bh","973"],["Bangladesh (\u09AC\u09BE\u0982\u09B2\u09BE\u09A6\u09C7\u09B6)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u044C)","by","375"],["Belgium (Belgi\xEB)","be","32"],["Belize","bz","501"],["Benin (B\xE9nin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (\u0F60\u0F56\u0FB2\u0F74\u0F42)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (\u0411\u043E\u0441\u043D\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043E\u0432\u0438\u043D\u0430)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (\u0411\u044A\u043B\u0433\u0430\u0440\u0438\u044F)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (\u1780\u1798\u17D2\u1796\u17BB\u1787\u17B6)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (R\xE9publique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (\u4E2D\u56FD)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (\u202B\u062C\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202C\u200E)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["C\xF4te d\u2019Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Cura\xE7ao","cw","599",0],["Cyprus (\u039A\u03CD\u03C0\u03C1\u03BF\u03C2)","cy","357"],["Czech Republic (\u010Cesk\xE1 republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Rep\xFAblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (\u202B\u0645\u0635\u0631\u202C\u200E)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (F\xF8royar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane fran\xE7aise)","gf","594"],["French Polynesia (Polyn\xE9sie fran\xE7aise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (\u10E1\u10D0\u10E5\u10D0\u10E0\u10D7\u10D5\u10D4\u10DA\u10DD)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (\u0395\u03BB\u03BB\u03AC\u03B4\u03B1)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guin\xE9e)","gn","224"],["Guinea-Bissau (Guin\xE9 Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (\u9999\u6E2F)","hk","852"],["Hungary (Magyarorsz\xE1g)","hu","36"],["Iceland (\xCDsland)","is","354"],["India (\u092D\u093E\u0930\u0924)","in","91"],["Indonesia","id","62"],["Iran (\u202B\u0627\u06CC\u0631\u0627\u0646\u202C\u200E)","ir","98"],["Iraq (\u202B\u0627\u0644\u0639\u0631\u0627\u0642\u202C\u200E)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (\u202B\u05D9\u05E9\u05E8\u05D0\u05DC\u202C\u200E)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (\u65E5\u672C)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (\u202B\u0627\u0644\u0623\u0631\u062F\u0646\u202C\u200E)","jo","962"],["Kazakhstan (\u041A\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043D)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (\u202B\u0627\u0644\u0643\u0648\u064A\u062A\u202C\u200E)","kw","965"],["Kyrgyzstan (\u041A\u044B\u0440\u0433\u044B\u0437\u0441\u0442\u0430\u043D)","kg","996"],["Laos (\u0EA5\u0EB2\u0EA7)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (\u202B\u0644\u0628\u0646\u0627\u0646\u202C\u200E)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (\u202B\u0644\u064A\u0628\u064A\u0627\u202C\u200E)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (\u6FB3\u9580)","mo","853"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (\u202B\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627\u202C\u200E)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (M\xE9xico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (\u041C\u043E\u043D\u0433\u043E\u043B)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (\u202B\u0627\u0644\u0645\u063A\u0631\u0628\u202C\u200E)","ma","212",0],["Mozambique (Mo\xE7ambique)","mz","258"],["Myanmar (Burma) (\u1019\u103C\u1014\u103A\u1019\u102C)","mm","95"],["Namibia (Namibi\xEB)","na","264"],["Nauru","nr","674"],["Nepal (\u0928\u0947\u092A\u093E\u0932)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Cal\xE9donie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (\uC870\uC120 \uBBFC\uC8FC\uC8FC\uC758 \uC778\uBBFC \uACF5\uD654\uAD6D)","kp","850"],["North Macedonia (\u0421\u0435\u0432\u0435\u0440\u043D\u0430 \u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0438\u0458\u0430)","mk","389"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (\u202B\u0639\u064F\u0645\u0627\u0646\u202C\u200E)","om","968"],["Pakistan (\u202B\u067E\u0627\u06A9\u0633\u062A\u0627\u0646\u202C\u200E)","pk","92"],["Palau","pw","680"],["Palestine (\u202B\u0641\u0644\u0633\u0637\u064A\u0646\u202C\u200E)","ps","970"],["Panama (Panam\xE1)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per\xFA)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (\u202B\u0642\u0637\u0631\u202C\u200E)","qa","974"],["R\xE9union (La R\xE9union)","re","262",0],["Romania (Rom\xE2nia)","ro","40"],["Russia (\u0420\u043E\u0441\u0441\u0438\u044F)","ru","7",0],["Rwanda","rw","250"],["Saint Barth\xE9lemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie fran\xE7aise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["S\xE3o Tom\xE9 and Pr\xEDncipe (S\xE3o Tom\xE9 e Pr\xEDncipe)","st","239"],["Saudi Arabia (\u202B\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629\u202C\u200E)","sa","966"],["Senegal (S\xE9n\xE9gal)","sn","221"],["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (\uB300\uD55C\uBBFC\uAD6D)","kr","82"],["South Sudan (\u202B\u062C\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)","ss","211"],["Spain (Espa\xF1a)","es","34"],["Sri Lanka (\u0DC1\u0DCA\u200D\u0DBB\u0DD3 \u0DBD\u0D82\u0D9A\u0DCF\u0DC0)","lk","94"],["Sudan (\u202B\u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (\u202B\u0633\u0648\u0631\u064A\u0627\u202C\u200E)","sy","963"],["Taiwan (\u53F0\u7063)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (\u0E44\u0E17\u0E22)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (\u202B\u062A\u0648\u0646\u0633\u202C\u200E)","tn","216"],["Turkey (T\xFCrkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (\u0423\u043A\u0440\u0430\u0457\u043D\u0430)","ua","380"],["United Arab Emirates (\u202B\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629\u202C\u200E)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (O\u02BBzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt\xE0 del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vi\u1EC7t Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (\u202B\u0627\u0644\u0635\u062D\u0631\u0627\u0621 \u0627\u0644\u063A\u0631\u0628\u064A\u0629\u202C\u200E)","eh","212",1,["5288","5289"]],["Yemen (\u202B\u0627\u0644\u064A\u0645\u0646\u202C\u200E)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["\xC5land Islands","ax","358",1,["18"]]],e=0;e<a.length;e++){var t=a[e];a[e]={name:t[0],iso2:t[1],dialCode:t[2],priority:t[3]||0,areaCodes:t[4]||null}}function i(k,p){if(!(k instanceof p))throw new TypeError("Cannot call a class as a function")}function o(k,p){for(var r=0;r<p.length;r++){var s=p[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(k,s.key,s)}}function l(k,p,r){return p&&o(k.prototype,p),r&&o(k,r),k}var c={getInstance:function(p){var r=p.getAttribute("data-intl-tel-input-id");return window.intlTelInputGlobals.instances[r]},instances:{},documentReady:function(){return document.readyState==="complete"}};typeof window=="object"&&(window.intlTelInputGlobals=c);var M=0,d={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},f=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],h=function(p,r){for(var s=Object.keys(p),u=0;u<s.length;u++)r(s[u],p[s[u]])},g=function(p){h(window.intlTelInputGlobals.instances,function(r){window.intlTelInputGlobals.instances[r][p]()})},v=(function(){function k(p,r){var s=this;i(this,k),this.id=M++,this.telInput=p,this.activeItem=null,this.highlightedItem=null;var u=r||{};this.options={},h(d,function(b,w){s.options[b]=u.hasOwnProperty(b)?u[b]:w}),this.hadInitialPlaceholder=!!p.getAttribute("placeholder")}return l(k,[{key:"_init",value:function(){var r=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(document.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=document.body)),typeof Promise<"u"){var s=new Promise(function(b,w){r.resolveAutoCountryPromise=b,r.rejectAutoCountryPromise=w}),u=new Promise(function(b,w){r.resolveUtilsScriptPromise=b,r.rejectUtilsScriptPromise=w});this.promise=Promise.all([s,u])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(r,s,u){s.length>this.countryCodeMaxLen&&(this.countryCodeMaxLen=s.length),this.countryCodes.hasOwnProperty(s)||(this.countryCodes[s]=[]);for(var b=0;b<this.countryCodes[s].length;b++)if(this.countryCodes[s][b]===r)return;var w=u!==n?u:this.countryCodes[s].length;this.countryCodes[s][w]=r}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var r=this.options.onlyCountries.map(function(u){return u.toLowerCase()});this.countries=a.filter(function(u){return r.indexOf(u.iso2)>-1})}else if(this.options.excludeCountries.length){var s=this.options.excludeCountries.map(function(u){return u.toLowerCase()});this.countries=a.filter(function(u){return s.indexOf(u.iso2)===-1})}else this.countries=a}},{key:"_translateCountriesByLocale",value:function(){for(var r=0;r<this.countries.length;r++){var s=this.countries[r].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(s)&&(this.countries[r].name=this.options.localizedCountries[s])}}},{key:"_countryNameSort",value:function(r,s){return r.name.localeCompare(s.name)}},{key:"_processCountryCodes",value:function(){this.countryCodeMaxLen=0,this.dialCodes={},this.countryCodes={};for(var r=0;r<this.countries.length;r++){var s=this.countries[r];this.dialCodes[s.dialCode]||(this.dialCodes[s.dialCode]=!0),this._addCountryCode(s.iso2,s.dialCode,s.priority)}for(var u=0;u<this.countries.length;u++){var b=this.countries[u];if(b.areaCodes)for(var w=this.countryCodes[b.dialCode][0],P=0;P<b.areaCodes.length;P++){for(var $=b.areaCodes[P],q=1;q<$.length;q++){var ce=b.dialCode+$.substr(0,q);this._addCountryCode(w,ce),this._addCountryCode(b.iso2,ce)}this._addCountryCode(b.iso2,b.dialCode+$)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var r=0;r<this.options.preferredCountries.length;r++){var s=this.options.preferredCountries[r].toLowerCase(),u=this._getCountryData(s,!1,!0);u&&this.preferredCountries.push(u)}}},{key:"_createEl",value:function(r,s,u){var b=document.createElement(r);return s&&h(s,function(w,P){return b.setAttribute(w,P)}),u&&u.appendChild(b),b}},{key:"_generateMarkup",value:function(){!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))&&this.telInput.setAttribute("autocomplete","off");var r="iti";this.options.allowDropdown&&(r+=" iti--allow-dropdown"),this.options.separateDialCode&&(r+=" iti--separate-dial-code"),this.options.customContainer&&(r+=" ",r+=this.options.customContainer);var s=this._createEl("div",{class:r});if(this.telInput.parentNode.insertBefore(s,this.telInput),this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},s),s.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{class:"iti__selected-flag",role:"combobox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-owns":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred",!0),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var u=this.options.hiddenInput,b=this.telInput.getAttribute("name");if(b){var w=b.lastIndexOf("[");w!==-1&&(u="".concat(b.substr(0,w),"[").concat(u,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:u}),s.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(r,s,u){for(var b="",w=0;w<r.length;w++){var P=r[w],$=u?"-preferred":"";b+="<li class='iti__country ".concat(s,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(P.iso2).concat($,"' role='option' data-dial-code='").concat(P.dialCode,"' data-country-code='").concat(P.iso2,"' aria-selected='false'>"),b+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(P.iso2,"'></div></div>"),b+="<span class='iti__country-name'>".concat(P.name,"</span>"),b+="<span class='iti__dial-code'>+".concat(P.dialCode,"</span>"),b+="</li>"}this.countryList.insertAdjacentHTML("beforeend",b)}},{key:"_setInitialState",value:function(){var r=this.telInput.getAttribute("value"),s=this.telInput.value,u=r&&r.charAt(0)==="+"&&(!s||s.charAt(0)!=="+"),b=u?r:s,w=this._getDialCode(b),P=this._isRegionlessNanp(b),$=this.options,q=$.initialCountry,ce=$.nationalMode,tt=$.autoHideDialCode,ae=$.separateDialCode;w&&!P?this._updateFlagFromNumber(b):q!=="auto"&&(q?this._setFlag(q.toLowerCase()):w&&P?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,b||this._setFlag(this.defaultCountry)),!b&&!ce&&!tt&&!ae&&(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),b&&this._updateValFromNumber(b)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var r=this;this._handleHiddenInputSubmit=function(){r.hiddenInput.value=r.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var r=this.telInput;r&&r.tagName!=="LABEL";)r=r.parentNode;return r}},{key:"_initDropdownListeners",value:function(){var r=this;this._handleLabelClick=function(u){r.countryList.classList.contains("iti__hide")?r.telInput.focus():u.preventDefault()};var s=this._getClosestLabel();s&&s.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){r.countryList.classList.contains("iti__hide")&&!r.telInput.disabled&&!r.telInput.readOnly&&r._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(u){var b=r.countryList.classList.contains("iti__hide");b&&["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(u.key)!==-1&&(u.preventDefault(),u.stopPropagation(),r._showDropdown()),u.key==="Tab"&&r._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var r=this;this.options.utilsScript&&!window.intlTelInputUtils?window.intlTelInputGlobals.documentReady()?window.intlTelInputGlobals.loadUtils(this.options.utilsScript):window.addEventListener("load",function(){window.intlTelInputGlobals.loadUtils(r.options.utilsScript)}):this.resolveUtilsScriptPromise(),this.options.initialCountry==="auto"?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){window.intlTelInputGlobals.autoCountry?this.handleAutoCountry():window.intlTelInputGlobals.startedLoadingAutoCountry||(window.intlTelInputGlobals.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup(function(r){window.intlTelInputGlobals.autoCountry=r.toLowerCase(),setTimeout(function(){return g("handleAutoCountry")})},function(){return g("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var r=this;this._handleKeyupEvent=function(){r._updateFlagFromNumber(r.telInput.value)&&r._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(r._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(r){var s=this.telInput.getAttribute("maxlength");return s&&r.length>s?r.substr(0,s):r}},{key:"_initBlurListeners",value:function(){var r=this;this._handleSubmitOrBlurEvent=function(){r._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if(this.telInput.value.charAt(0)==="+"){var r=this._getNumeric(this.telInput.value);(!r||this.selectedCountryData.dialCode===r)&&(this.telInput.value="")}}},{key:"_getNumeric",value:function(r){return r.replace(/\D/g,"")}},{key:"_trigger",value:function(r){var s=document.createEvent("Event");s.initEvent(r,!0,!0),this.telInput.dispatchEvent(s)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(r,s,u){u&&!r.classList.contains(s)?r.classList.add(s):!u&&r.classList.contains(s)&&r.classList.remove(s)}},{key:"_setDropdownPosition",value:function(){var r=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var s=this.telInput.getBoundingClientRect(),u=window.pageYOffset||document.documentElement.scrollTop,b=s.top+u,w=this.countryList.offsetHeight,P=b+this.telInput.offsetHeight+w<u+window.innerHeight,$=b-w>u;if(this._toggleClass(this.countryList,"iti__country-list--dropup",!P&&$),this.options.dropdownContainer){var q=!P&&$?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(b+q,"px"),this.dropdown.style.left="".concat(s.left+document.body.scrollLeft,"px"),this._handleWindowScroll=function(){return r._closeDropdown()},window.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(r){for(var s=r;s&&s!==this.countryList&&!s.classList.contains("iti__country");)s=s.parentNode;return s===this.countryList?null:s}},{key:"_bindDropdownListeners",value:function(){var r=this;this._handleMouseoverCountryList=function(w){var P=r._getClosestListItem(w.target);P&&r._highlightListItem(P,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(w){var P=r._getClosestListItem(w.target);P&&r._selectListItem(P)},this.countryList.addEventListener("click",this._handleClickCountryList);var s=!0;this._handleClickOffToClose=function(){s||r._closeDropdown(),s=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);var u="",b=null;this._handleKeydownOnDropdown=function(w){w.preventDefault(),w.key==="ArrowUp"||w.key==="Up"||w.key==="ArrowDown"||w.key==="Down"?r._handleUpDownKey(w.key):w.key==="Enter"?r._handleEnterKey():w.key==="Escape"?r._closeDropdown():/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(w.key)&&(b&&clearTimeout(b),u+=w.key.toLowerCase(),r._searchForCountry(u),b=setTimeout(function(){u=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(r){var s=r==="ArrowUp"||r==="Up"?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;s&&(s.classList.contains("iti__divider")&&(s=r==="ArrowUp"||r==="Up"?s.previousElementSibling:s.nextElementSibling),this._highlightListItem(s,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(r){for(var s=0;s<this.countries.length;s++)if(this._startsWith(this.countries[s].name,r)){var u=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[s].iso2));this._highlightListItem(u,!1),this._scrollTo(u,!0);break}}},{key:"_startsWith",value:function(r,s){return r.substr(0,s.length).toLowerCase()===s}},{key:"_updateValFromNumber",value:function(r){var s=r;if(this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData){var u=!this.options.separateDialCode&&(this.options.nationalMode||s.charAt(0)!=="+"),b=intlTelInputUtils.numberFormat,w=b.NATIONAL,P=b.INTERNATIONAL,$=u?w:P;s=intlTelInputUtils.formatNumber(s,this.selectedCountryData.iso2,$)}s=this._beforeSetNumber(s),this.telInput.value=s}},{key:"_updateFlagFromNumber",value:function(r){var s=r,u=this.selectedCountryData.dialCode,b=u==="1";s&&this.options.nationalMode&&b&&s.charAt(0)!=="+"&&(s.charAt(0)!=="1"&&(s="1".concat(s)),s="+".concat(s)),this.options.separateDialCode&&u&&s.charAt(0)!=="+"&&(s="+".concat(u).concat(s));var w=this._getDialCode(s,!0),P=this._getNumeric(s),$=null;if(w){var q=this.countryCodes[this._getNumeric(w)],ce=q.indexOf(this.selectedCountryData.iso2)!==-1&&P.length<=w.length-1,tt=u==="1"&&this._isRegionlessNanp(P);if(!tt&&!ce){for(var ae=0;ae<q.length;ae++)if(q[ae]){$=q[ae];break}}}else s.charAt(0)==="+"&&P.length?$="":(!s||s==="+")&&($=this.defaultCountry);return $!==null?this._setFlag($):!1}},{key:"_isRegionlessNanp",value:function(r){var s=this._getNumeric(r);if(s.charAt(0)==="1"){var u=s.substr(1,3);return f.indexOf(u)!==-1}return!1}},{key:"_highlightListItem",value:function(r,s){var u=this.highlightedItem;u&&u.classList.remove("iti__highlight"),this.highlightedItem=r,this.highlightedItem.classList.add("iti__highlight"),s&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(r,s,u){for(var b=s?a:this.countries,w=0;w<b.length;w++)if(b[w].iso2===r)return b[w];if(u)return null;throw new Error("No country data for '".concat(r,"'"))}},{key:"_setFlag",value:function(r){var s=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=r?this._getCountryData(r,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(r));var u=r?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",u),this.options.separateDialCode){var b=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=b;var w=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(w+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var P=this.activeItem;if(P&&(P.classList.remove("iti__active"),P.setAttribute("aria-selected","false")),r){var $=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(r,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(r));$.setAttribute("aria-selected","true"),$.classList.add("iti__active"),this.activeItem=$,this.selectedFlag.setAttribute("aria-activedescendant",$.getAttribute("id"))}}return s.iso2!==r}},{key:"_getHiddenSelectedFlagWidth",value:function(){var r=this.telInput.parentNode.cloneNode();r.style.visibility="hidden",document.body.appendChild(r);var s=this.flagsContainer.cloneNode();r.appendChild(s);var u=this.selectedFlag.cloneNode(!0);s.appendChild(u);var b=u.offsetWidth;return r.parentNode.removeChild(r),b}},{key:"_updatePlaceholder",value:function(){var r=this.options.autoPlaceholder==="aggressive"||!this.hadInitialPlaceholder&&this.options.autoPlaceholder==="polite";if(window.intlTelInputUtils&&r){var s=intlTelInputUtils.numberType[this.options.placeholderNumberType],u=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,s):"";u=this._beforeSetNumber(u),typeof this.options.customPlaceholder=="function"&&(u=this.options.customPlaceholder(u,this.selectedCountryData)),this.telInput.setAttribute("placeholder",u)}}},{key:"_selectListItem",value:function(r){var s=this._setFlag(r.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(r.getAttribute("data-dial-code"),!0),this.telInput.focus();var u=this.telInput.value.length;this.telInput.setSelectionRange(u,u),s&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(r,s){var u=this.countryList,b=window.pageYOffset||document.documentElement.scrollTop,w=u.offsetHeight,P=u.getBoundingClientRect().top+b,$=P+w,q=r.offsetHeight,ce=r.getBoundingClientRect().top+b,tt=ce+q,ae=ce-P+u.scrollTop,ii=w/2-q/2;if(ce<P)s&&(ae-=ii),u.scrollTop=ae;else if(tt>$){s&&(ae+=ii);var en=w-q;u.scrollTop=ae-en}}},{key:"_updateDialCode",value:function(r,s){var u=this.telInput.value,b="+".concat(r),w;if(u.charAt(0)==="+"){var P=this._getDialCode(u);P?w=u.replace(P,b):w=b}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(u)w=b+u;else if(s||!this.options.autoHideDialCode)w=b;else return}this.telInput.value=w}},{key:"_getDialCode",value:function(r,s){var u="";if(r.charAt(0)==="+")for(var b="",w=0;w<r.length;w++){var P=r.charAt(w);if(!isNaN(parseInt(P,10))){if(b+=P,s)this.countryCodes[b]&&(u=r.substr(0,w+1));else if(this.dialCodes[b]){u=r.substr(0,w+1);break}if(b.length===this.countryCodeMaxLen)break}}return u}},{key:"_getFullNumber",value:function(){var r=this.telInput.value.trim(),s=this.selectedCountryData.dialCode,u,b=this._getNumeric(r);return this.options.separateDialCode&&r.charAt(0)!=="+"&&s&&b?u="+".concat(s):u="",u+r}},{key:"_beforeSetNumber",value:function(r){var s=r;if(this.options.separateDialCode){var u=this._getDialCode(s);if(u){u="+".concat(this.selectedCountryData.dialCode);var b=s[u.length]===" "||s[u.length]==="-"?u.length+1:u.length;s=s.substr(b)}}return this._cap(s)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){this.options.initialCountry==="auto"&&(this.defaultCountry=window.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){window.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var r=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var s=this._getClosestLabel();s&&s.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&r&&r.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(r&&r.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var u=this.telInput.parentNode;u.parentNode.insertBefore(this.telInput,u),u.parentNode.removeChild(u),delete window.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(r){if(window.intlTelInputUtils){var s=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),s,r)}return""}},{key:"getNumberType",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(window.intlTelInputUtils){var r=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),r)}return-99}},{key:"isValidNumber",value:function(){var r=this._getFullNumber().trim(),s=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(r,s):null}},{key:"setCountry",value:function(r){var s=r.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(s))||(this._setFlag(s),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(r){var s=this._updateFlagFromNumber(r);this._updateValFromNumber(r),s&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(r){this.options.placeholderNumberType=r,this._updatePlaceholder()}}]),k})();c.getCountryData=function(){return a};var L=function(p,r,s){var u=document.createElement("script");u.onload=function(){g("handleUtils"),r&&r()},u.onerror=function(){g("rejectUtilsScriptPromise"),s&&s()},u.className="iti-load-utils",u.async=!0,u.src=p,document.body.appendChild(u)};return c.loadUtils=function(k){if(!window.intlTelInputUtils&&!window.intlTelInputGlobals.startedLoadingUtilsScript){if(window.intlTelInputGlobals.startedLoadingUtilsScript=!0,typeof Promise<"u")return new Promise(function(p,r){return L(k,p,r)});L(k)}return null},c.defaults=d,c.version="17.0.21",function(k,p){var r=new v(k,p);return r._init(),k.setAttribute("data-intl-tel-input-id",r.id),window.intlTelInputGlobals.instances[r.id]=r,r}})()})});var zi=Pe((Ga,ji)=>{"use strict";ji.exports=Gi()});var Pt=(n,a)=>{let e=n.shadowRoot;if(!e)return;let t=a.create().addElement(e.querySelector("ion-backdrop")).fromTo("opacity","0.01","var(--backdrop-opacity)"),i=a.create().addElement(e.querySelector(".modal-wrapper")).keyframes([{offset:0,opacity:"0",transform:"scale(0)"},{offset:1,opacity:"0.99",transform:"scale(1)"}]);return a.create().addElement(n).easing("ease").duration(250).addAnimation([t,i])};var ko=te("slideLeftFromRightTopCorner",[z(":enter",[U({transform:"translateX(-100%) translateY(-50%)",opacity:0}),j("200ms ease-out",U({transform:"translateX(0%) translateY(0%)",opacity:1}))]),z(":leave",[j("200ms ease-out",U({transform:"translateX(-100%) translateY(-50%)",opacity:0}))])]),Do=te("slideRightFromLeftTopCorner",[z(":enter",[U({transform:"translateX(100%) translateY(-50%)",opacity:0}),j("200ms ease-out",U({transform:"translateX(0%) translateY(0%)",opacity:1}))]),z(":leave",[j("200ms ease-out",U({transform:"translateX(100%) translateY(-50%)",opacity:0}))])]),Oo=te("fadeInOut",[z(":enter",[U({opacity:0}),j("{{inDuration}} {{inDelay}}",U({opacity:"{{opacity}}"}))],{params:{opacity:1,inDuration:"500ms"}}),z(":leave",[j("{{outDuration}}",U({opacity:0}))],{params:{outDuration:"500ms",inDelay:"0ms"}})]),Li=te("slideLeftRight",[z(":enter",[U({transform:"translateX(-100%)",opacity:0}),j("200ms ease-out",U({transform:"translateX(0%)",opacity:1}))])]),Pi=te("slideRightLeft",[z(":enter",[U({transform:"translateX(100%)",opacity:0}),j("200ms ease-out",U({transform:"translateX(0%)",opacity:1}))])]),Lo=te("slideInOutY",[z(":enter",[U({transform:"translateY(-100%)",opacity:0,scale:.8}),j("200ms ease-out",U({transform:"translateX(0%)",opacity:1,scale:1}))]),z(":leave",[j("200ms ease-out",U({transform:"translateY(-100%)",opacity:0,scale:.8}))])]),Po=te("slideOutInY",[z(":enter",[U({transform:"translateY(100%)",opacity:0,scale:.8}),j("200ms ease-out",U({transform:"translateX(0%)",opacity:1,scale:1}))]),z(":leave",[j("200ms ease-out",U({transform:"translateY(100%)",opacity:0,scale:.8}))])]),Qe=te("upHide",[z(":enter",[U({transform:"translate(-50%, -28px)",opacity:0}),j("260ms 260ms cubic-bezier(.0, .0, .2, 1)",Mi([U({transform:"translate(-50%, -28px)",opacity:0,offset:0}),U({opacity:.8,offset:.5}),U({transform:"translate(-50%, -50%)",opacity:1,offset:1})]))]),z(":leave",[j("260ms 0ms cubic-bezier(.4, .0, 1, 1)",U({transform:"translate(-50%, 10px)",opacity:0,offset:1}))])]),Ro=te("slideOnPaginate",[z(":enter",[U({transform:"translateX({{direction}}100%)"}),j("200ms ease-out",U({transform:"translateX(0%)"}))],{params:{direction:"+"}})]),Ao=te("slideInOut",[z(":enter",[U({transform:"translateY(-60px)",opacity:0}),j("200ms ease-out",U({transform:"translateY(0)",opacity:1}))]),z(":leave",[j("200ms ease-out",U({transform:"translateY(-60px)",opacity:0}))])]);var tn=0,Ze={},nn=(function(n){return function(e){let t={};return t._onLoad=function(i){return o=>{let l=Ze[i];l?l.promise.then(()=>{l.error?o(l.error):o(null,l)}):console.warn("No script cached")}},t._scriptTag=(i,o)=>{if(!Ze[i]){let l=document.createElement("script"),M={loaded:!1,error:!1,promise:new Promise((d,f)=>{let h=!1,g=!1,v=document.getElementsByTagName("body")[0];l.type="text/javascript",l.async=!0,l.defer=!0;let L=`loaderCB${tn++}${Date.now()}`,k,p=s=>u=>{let b=Ze[i];s==="loaded"?(b.resolved=!0,d(o)):s==="error"&&(b.errored=!0,f(u)),r()},r=()=>{n[L]&&typeof n[L]=="function"&&(n[L]=null)};return l.onload=p("loaded"),l.onerror=p("error"),l.onreadystatechange=()=>{p(l.readyState)},o.match(/callback=CALLBACK_NAME/)?(o=o.replace(/(callback=)[^\&]+/,`$1${L}`),k=n[L]=l.onload):l.addEventListener("load",l.onload),l.addEventListener("error",l.onerror),l.src=o,v.appendChild(l),l}),tag:l};Ze[i]=M}return Ze[i]},Object.keys(e).forEach(function(i){let o=e[i];t[i]={tag:t._scriptTag(i,o),onLoad:t._onLoad(i)}}),t.onLoad=function(i){let o=[];Object.keys(e).forEach(function(l){let c=Ze[l];c&&o.push(c.promise)}),Promise.all(o).then(()=>{i&&i()})},t}})(typeof window<"u"?window:{}),Ri=nn;var Ee=class n{constructor(a){this.http=a}getVerifyCode(a){return this.http.get(`${X.BASE_URL}/user/basic/getVerifyCode`,{params:{type:a}}).pipe(it(e=>e.data))}getCaptchaConfig(a){return this.http.post(`${X.BASE_URL}/user/basic/getCaptchaConfig`,{},{headers:{"Captcha-Verify-Scene":a}}).pipe(it(e=>e.data))}getCaptchaConfigV2(a){return this.http.post(`${X.BASE_URL}/user/basic/getCaptchaConfigV2`,{},{headers:{"Captcha-Verify-Scene":a}}).pipe(it(e=>e.data))}checkCaptchaV2(a,e,t){return this.http.post(`${X.BASE_URL}/user/basic/checkCaptchaV2`,{clientJson:a},{headers:{"Captcha-Verify-Code":e,"Captcha-Verify-Scene":t}})}checkAliCaptcha(a,e){return this.http.post(`${X.BASE_URL}/user/basic/checkAliCaptcha`,{captchaVerifyParam:a},{headers:{"Captcha-Verify-Code":e}}).pipe(it(t=>t.data))}login(a,e){return this.http.post(`${X.BASE_URL}/user/basic/v2/login`,a,{observe:"response",headers:{"Captcha-Verify-Code":e}})}loginByMobilePhone(a){return this.http.post(`${X.BASE_URL}/user/basic/loginByMobilePhone`,a,{observe:"response"})}register(a){return this.http.post(`${X.BASE_URL}/user/basic/v3/register`,a,{observe:"response"})}sendSMSVerifyCode(a,e){return this.http.post(`${X.BASE_URL}/user/basic/v2/queryMobileSms`,a,{headers:{"Captcha-Verify-Code":e}})}sendEmailVerifyCode(a,e){return this.http.post(`${X.BASE_URL}/user/basic/v2/sendEmail`,a,{headers:{"Captcha-Verify-Code":e}})}checkEmailValidity(a,e){return this.http.post(`${X.BASE_URL}/user/basic/checkEmailRegister`,{email:a},{headers:{"Captcha-Verify-Code":e}})}checkMobileValidity(a,e){return this.http.post(`${X.BASE_URL}/user/basic/checkPhoneRegister`,a,{headers:{"Captcha-Verify-Code":e}})}checkEmailCodeValidity(a){return this.http.post(`${X.BASE_URL}/user/basic/v3/checkEmailCode`,a)}checkSMSCodeValidity(a){return this.http.post(`${X.BASE_URL}/user/basic/checkSmsCode`,a)}static \u0275fac=function(e){return new(e||n)(Ae(Ci))};static \u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"})};var on=["modal"],rn=["element"],an=["trigger"];function sn(n,a){n&1&&(y(0,"div",9),A(1,"app-loading-spinner",10),_()),n&2&&(m(),C("size","30px"))}function ln(n,a){if(n&1){let e=V();y(0,"form",11),O("submit",function(){S(e);let i=x(2);return I(i.checkCaptcha())}),y(1,"div",12)(2,"ion-input",13),E(3,"translate"),O("ionInput",function(i){S(e);let o=x(2);return I(o.onCodeInput(i))}),_(),y(4,"img",14),O("click",function(){S(e);let i=x(2);return I(i.initCaptcha())}),_()()(),y(5,"button",15),O("click",function(){S(e);let i=x(2);return I(i.checkCaptcha())}),D(6),E(7,"translate"),_()}if(n&2){let e,t=x(2);C("formGroup",t.form),m(2),R("error-field",((e=t.form.get("captchaCode"))==null?null:e.invalid)&&(((e=t.form.get("captchaCode"))==null?null:e.dirty)||((e=t.form.get("captchaCode"))==null?null:e.touched))),C("placeholder",T(3,7,"verification-code-placeholder")),m(2),C("src",t.verifyImg,ci),m(),C("disabled",t.form.invalid),m(),H(" ",T(7,9,"confirm")," ")}}function cn(n,a){if(n&1){let e=V();y(0,"div",3)(1,"div",4)(2,"div",5),D(3),E(4,"translate"),_(),y(5,"ion-icon",6),O("click",function(){S(e),x();let i=N(1);return I(i.dismiss())}),_()(),y(6,"div",7),F(7,sn,2,1,"div",8)(8,ln,8,11,"ng-template",null,1,Q),_()()}if(n&2){let e=N(9),t=x();m(3),W(T(4,3,"verification-code")),m(4),C("ngIf",!t.verifyImg)("ngIfElse",e)}}function dn(n,a){return e=>{let t=e.value?.toString();return t&&(t.length<n||t.length>a)?{lengthInvalid:{value:e.value}}:null}}var Ye=class n extends Se{constructor(e,t,i,o,l){super();this.authService=e;this.animationCtrl=t;this.translateService=i;this.renderer=o;this.fb=l}captchaType="loginPwd";modalElementRef;element;trigger;onSuccess=new Y;captchaInstance=null;captchaVerifyCode="";captchaId=null;verifyImg=null;form;ngOnChanges(e){e.isOpen&&this.isOpen&&G.isBrowser&&setTimeout(()=>{this.initCaptcha()},100)}ngOnInit(){this.form=this.fb.group({captchaCode:[this.form?.get("captchaCode")?.value||null,[dn(4,4),le.required]]})}ngAfterViewInit(){}submit(e){e.dismiss()}async initCaptcha(){this.verifyImg=null,this.form.setValue({captchaCode:null});let e=await se(this.authService.getCaptchaConfigV2(this.captchaType));if(!e)return;let t=JSON.parse(e.clientJson);this.captchaId=t.captchaId,this.verifyImg=t.picture,this.captchaVerifyCode=e.captchaVerifyCode.toString(),this.cdr.detectChanges()}async checkCaptcha(){let e=this.form.value;this.verifyImg=null;let{captchaId:t,captchaVerifyCode:i,captchaType:o}=this,l={captchaId:t,captchaCode:e.captchaCode.toString()};this.authService.checkCaptchaV2(JSON.stringify(l),i,o).pipe(de(this.onDestroy$)).subscribe(c=>{c.code===0&&c.data.captchaVerifyResult?this.modalRef.dismiss().then(()=>{this.onSuccess.emit(this.captchaVerifyCode)}):(this.initCaptcha(),this.toast.toastError(this.translateService.instant("verfiy-code-error")))})}onCodeInput(e){let o=e.target.value.replace(/[^0-9]/g,"").slice(0,4);e.target.value=o,this.form.get("captchaCode")?.setValue(o)}static \u0275fac=function(t){return new(t||n)(B(Ee),B(xe),B(Et),B(di),B(We))};static \u0275cmp=K({type:n,selectors:[["app-captcha-modal"]],viewQuery:function(t,i){if(t&1&&(ge(on,7,Fe),ge(rn,5),ge(an,5)),t&2){let o;ue(o=me())&&(i.modalElementRef=o.first),ue(o=me())&&(i.element=o.first),ue(o=me())&&(i.trigger=o.first)}},inputs:{captchaType:"captchaType"},outputs:{onSuccess:"onSuccess"},features:[ne,dt],decls:3,vars:2,consts:[["modal",""],["verifycode",""],[1,"glass-modal","px-2",3,"didDismiss","isOpen","backdropDismiss"],[1,"modal-content","flex","flex-col","p-2"],[1,"modal-header","z-10"],[1,"text-2xl","font-bold"],["name","close-outline",1,"modal-close-btn","rounded-md","w-10","xs:w-10","h-10","xs:h-10","absolute","-right-2","-top-3","3xs:-right-3",3,"click"],[1,"flex","flex-col","flex-1","items-stretch","justify-center"],["class","relative z-1",4,"ngIf","ngIfElse"],[1,"relative","z-1"],[1,"absolute","left-1/2","top-1/2","-translate-x-1/2","-translate-y-1/2","text-gray-3",3,"size"],[3,"submit","formGroup"],[1,"flex","items-center","mb-6","gap-2"],["type","text","formControlName","captchaCode",1,"border-2","rounded-md","bg-white","!text-black",2,"border-color","white !important",3,"ionInput","placeholder"],[1,"min-h-[44px]","w-auto",3,"click","src"],["type","button",1,"w-full","theme-btn","whitespace-nowrap","text-lg","bg-main-yellow","hover:shadow-md","text-black","h-12","w-32","rounded-md","px-2","py-1","border","border-solid","font-bold",3,"click","disabled"]],template:function(t,i){if(t&1){let o=V();y(0,"ion-modal",2,0),O("didDismiss",function(){return S(o),I(i.handleDismiss())}),F(2,cn,10,5,"ng-template"),_()}t&2&&C("isOpen",i.isOpen)("backdropDismiss",!1)},dependencies:[Z,_e,ee,je,$e,Ge,J,oe,St,Ke,we,Ie,be,ze,qe,Dt,he],styles:["ion-modal[_ngcontent-%COMP%]{--width: 400px;--height: auto}ng-scrollbar[_ngcontent-%COMP%]{min-height:30vh;max-height:85vh}ng-scrollbar[_ngcontent-%COMP%]     .ng-scroll-content{width:100%}.modal-content[_ngcontent-%COMP%]{border-radius:15px;min-height:200px}ion-input[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--highlight-color-focused: var(--strong);--highlight-color-valid: var(--strong);font-weight:500;box-shadow:0 10px 15px -3px #0000000d,0 4px 6px -2px #00000008}ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-inner-spin-button, ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}ion-input[_ngcontent-%COMP%]     input{font-size:18px!important;height:100%;padding:0 12px!important}ion-input[_ngcontent-%COMP%]     input:-webkit-autofill, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:focus{border:0;filter:none;-webkit-text-fill-color:var(--strong);-webkit-box-shadow:0 0 0px 1000px var(--panel-3) inset;transition:background-color 50000s ease-in-out 0s}ion-input[_ngcontent-%COMP%]     .input-highlight{display:none}ion-input.icon-input[_ngcontent-%COMP%]     input{padding-right:42px!important}"]})};var Zi=Wt(ei());var un=(n,a,e,t,i,o,l)=>({seconds:n,minutes:a,hours:e,hoursWithDays:t,days:i,difference:o,remainingTime:l}),mn=n=>({$implicit:n});function hn(n,a){}var At=class n extends Tt{constructor(e){super();this.ngZone=e}time;roundToUpperLimit=!1;onTimeEnd=new Y;templateRef;difference;seconds;minutes;hours;days;hoursWithDays;remainingTime;getTimeDifference(){this.difference=this.time?new Date(this.time).getTime()-new Date().getTime():0,this.allocateTimeUnits(this.difference)}ngOnChanges(e){let t=e.time;t&&!t.isFirstChange()&&t.currentValue!==t.previousValue&&this.restart()}allocateTimeUnits(e){e<=0&&(e=0),this.seconds=Math.floor(e/1e3),this.minutes=Math.floor(this.seconds/60),this.hours=Math.floor(this.minutes/60),this.hoursWithDays=Math.floor(this.minutes/60),this.days=Math.floor(this.hours/24),this.hours%=24,this.minutes%=60,this.seconds%=60,this.hours==0&&this.minutes==0&&this.seconds==0&&(this.onTimeEnd.emit(),this.subscriptions?.unsubscribe()),this.roundToUpperLimit&&(this.hoursWithDays!=0?(this.minutes!=0||this.seconds!=0)&&(this.hoursWithDays+=1):this.minutes==59&&this.seconds!=0?this.hoursWithDays+=1:this.minutes!=0&&this.seconds!=0&&(this.minutes+=1)),this.hours=this.hours<10?"0"+this.hours:this.hours,this.hoursWithDays=this.hoursWithDays<10?"0"+this.hoursWithDays:this.hoursWithDays,this.minutes=this.minutes<10?"0"+this.minutes:this.minutes,this.seconds=this.seconds<10?"0"+this.seconds:this.seconds}ngOnInit(){this.restart()}restart(){this.subscriptions?.unsubscribe(),this.getTimeDifference(),this.cdr.detectChanges(),G.isServer||this.ngZone.runOutsideAngular(()=>{this.subscriptions=oi(1e3).subscribe(e=>{this.getTimeDifference(),this.cdr.detectChanges()})})}static \u0275fac=function(t){return new(t||n)(B(Ve))};static \u0275cmp=K({type:n,selectors:[["app-countdown"]],contentQueries:function(t,i,o){if(t&1&&vi(o,pt,5),t&2){let l;ue(l=me())&&(i.templateRef=l.first)}},inputs:{time:"time",roundToUpperLimit:"roundToUpperLimit"},outputs:{onTimeEnd:"onTimeEnd"},features:[ne,dt],decls:2,vars:12,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&(hi(0),F(1,hn,0,0,"ng-template",0),fi()),t&2&&(m(),C("ngTemplateOutlet",i.templateRef)("ngTemplateOutletContext",fe(10,mn,_i(2,un,i.seconds,i.minutes,i.hours,i.hoursWithDays,i.days,i.difference,i.remainingTime))))},dependencies:[Z,Ce,ee,J,oe],encapsulation:2})};var ti=class{$implicit=null;ngLet=null},Oe=class n{constructor(a,e){this._vcr=a;this._templateRef=e}_context=new ti;set ngLet(a){this._context.$implicit=this._context.ngLet=a}static ngTemplateContextGuard(a,e){return!0}ngOnInit(){this._vcr.createEmbeddedView(this._templateRef,this._context)}static \u0275fac=function(e){return new(e||n)(B(pi),B(pt))};static \u0275dir=ut({type:n,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}})};var Le=class n{constructor(a,e){this.el=a;this.toast=e;this.ionInput=a}eyeOpen;eyeClose;ionInput;async ngAfterViewInit(){this.eyeOpen&&(this.eyeOpen.style.display="none"),this.eyeClose?.addEventListener("click",this.toggle),this.eyeOpen?.addEventListener("click",this.toggle)}toggle=()=>{if(console.log(112234),this.ionInput.nativeElement.classList.contains("show-pass")){this.eyeClose&&this.eyeClose.style.removeProperty("display"),this.eyeOpen&&(this.eyeOpen.style.display="none"),this.ionInput.nativeElement.classList.remove("show-pass");let a=this.ionInput.nativeElement.querySelector("input");a&&(a.type="password")}else{this.eyeClose&&(this.eyeClose.style.display="none"),this.eyeOpen&&this.eyeOpen.style.removeProperty("display"),this.ionInput.nativeElement.classList.add("show-pass");let a=this.ionInput.nativeElement.querySelector("input");a&&(a.type="text")}};static \u0275fac=function(e){return new(e||n)(B(Fe),B(Ti))};static \u0275dir=ut({type:n,selectors:[["","appPasswordToggle",""]],inputs:{eyeOpen:"eyeOpen",eyeClose:"eyeClose"}})};var Ft=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=ui({type:n});static \u0275inj=si({providers:[Et],imports:[Z,ee,be,J,It,Ie,Mt,At,ki]})};var Wi=Wt(zi());var qi=[{country:"Afghanistan",code:"93",iso:"AF"},{country:"Albania",code:"355",iso:"AL"},{country:"Algeria",code:"213",iso:"DZ"},{country:"American Samoa",code:"1-684",iso:"AS"},{country:"Andorra",code:"376",iso:"AD"},{country:"Angola",code:"244",iso:"AO"},{country:"Anguilla",code:"1-264",iso:"AI"},{country:"Antarctica",code:"672",iso:"AQ"},{country:"Antigua and Barbuda",code:"1-268",iso:"AG"},{country:"Argentina",code:"54",iso:"AR"},{country:"Armenia",code:"374",iso:"AM"},{country:"Aruba",code:"297",iso:"AW"},{country:"Australia",code:"61",iso:"AU"},{country:"Austria",code:"43",iso:"AT"},{country:"Azerbaijan",code:"994",iso:"AZ"},{country:"Bahamas",code:"1-242",iso:"BS"},{country:"Bahrain",code:"973",iso:"BH"},{country:"Bangladesh",code:"880",iso:"BD"},{country:"Barbados",code:"1-246",iso:"BB"},{country:"Belarus",code:"375",iso:"BY"},{country:"Belgium",code:"32",iso:"BE"},{country:"Belize",code:"501",iso:"BZ"},{country:"Benin",code:"229",iso:"BJ"},{country:"Bermuda",code:"1-441",iso:"BM"},{country:"Bhutan",code:"975",iso:"BT"},{country:"Bolivia",code:"591",iso:"BO"},{country:"Bosnia and Herzegovina",code:"387",iso:"BA"},{country:"Botswana",code:"267",iso:"BW"},{country:"Brazil",code:"55",iso:"BR"},{country:"British Indian Ocean Territory",code:"246",iso:"IO"},{country:"British Virgin Islands",code:"1-284",iso:"VG"},{country:"Brunei",code:"673",iso:"BN"},{country:"Bulgaria",code:"359",iso:"BG"},{country:"Burkina Faso",code:"226",iso:"BF"},{country:"Burundi",code:"257",iso:"BI"},{country:"Cambodia",code:"855",iso:"KH"},{country:"Cameroon",code:"237",iso:"CM"},{country:"Canada",code:"1",iso:"CA"},{country:"Cape Verde",code:"238",iso:"CV"},{country:"Cayman Islands",code:"1-345",iso:"KY"},{country:"Central African Republic",code:"236",iso:"CF"},{country:"Chad",code:"235",iso:"TD"},{country:"Chile",code:"56",iso:"CL"},{country:"China",code:"86",iso:"CN"},{country:"Christmas Island",code:"61",iso:"CX"},{country:"Cocos Islands",code:"61",iso:"CC"},{country:"Colombia",code:"57",iso:"CO"},{country:"Comoros",code:"269",iso:"KM"},{country:"Cook Islands",code:"682",iso:"CK"},{country:"Costa Rica",code:"506",iso:"CR"},{country:"Croatia",code:"385",iso:"HR"},{country:"Cuba",code:"53",iso:"CU"},{country:"Curacao",code:"599",iso:"CW"},{country:"Cyprus",code:"357",iso:"CY"},{country:"Czech Republic",code:"420",iso:"CZ"},{country:"Democratic Republic of the Congo",code:"243",iso:"CD"},{country:"Denmark",code:"45",iso:"DK"},{country:"Djibouti",code:"253",iso:"DJ"},{country:"Dominica",code:"1-767",iso:"DM"},{country:"Dominican Republic",code:"1-809, 1-829, 1-849",iso:"DO"},{country:"East Timor",code:"670",iso:"TL"},{country:"Ecuador",code:"593",iso:"EC"},{country:"Egypt",code:"20",iso:"EG"},{country:"El Salvador",code:"503",iso:"SV"},{country:"Equatorial Guinea",code:"240",iso:"GQ"},{country:"Eritrea",code:"291",iso:"ER"},{country:"Estonia",code:"372",iso:"EE"},{country:"Ethiopia",code:"251",iso:"ET"},{country:"Falkland Islands",code:"500",iso:"FK"},{country:"Faroe Islands",code:"298",iso:"FO"},{country:"Fiji",code:"679",iso:"FJ"},{country:"Finland",code:"358",iso:"FI"},{country:"France",code:"33",iso:"FR"},{country:"French Polynesia",code:"689",iso:"PF"},{country:"Gabon",code:"241",iso:"GA"},{country:"Gambia",code:"220",iso:"GM"},{country:"Georgia",code:"995",iso:"GE"},{country:"Germany",code:"49",iso:"DE"},{country:"Ghana",code:"233",iso:"GH"},{country:"Gibraltar",code:"350",iso:"GI"},{country:"Greece",code:"30",iso:"GR"},{country:"Greenland",code:"299",iso:"GL"},{country:"Grenada",code:"1-473",iso:"GD"},{country:"Guam",code:"1-671",iso:"GU"},{country:"Guatemala",code:"502",iso:"GT"},{country:"Guernsey",code:"44-1481",iso:"GG"},{country:"Guinea",code:"224",iso:"GN"},{country:"Guinea-Bissau",code:"245",iso:"GW"},{country:"Guyana",code:"592",iso:"GY"},{country:"Haiti",code:"509",iso:"HT"},{country:"Honduras",code:"504",iso:"HN"},{country:"Hong Kong",code:"852",iso:"HK"},{country:"Hungary",code:"36",iso:"HU"},{country:"Iceland",code:"354",iso:"IS"},{country:"India",code:"91",iso:"IN"},{country:"Indonesia",code:"62",iso:"ID"},{country:"Iran",code:"98",iso:"IR"},{country:"Iraq",code:"964",iso:"IQ"},{country:"Ireland",code:"353",iso:"IE"},{country:"Isle of Man",code:"44-1624",iso:"IM"},{country:"Israel",code:"972",iso:"IL"},{country:"Italy",code:"39",iso:"IT"},{country:"Ivory Coast",code:"225",iso:"CI"},{country:"Jamaica",code:"1-876",iso:"JM"},{country:"Japan",code:"81",iso:"JP"},{country:"Jersey",code:"44-1534",iso:"JE"},{country:"Jordan",code:"962",iso:"JO"},{country:"Kazakhstan",code:"7",iso:"KZ"},{country:"Kenya",code:"254",iso:"KE"},{country:"Kiribati",code:"686",iso:"KI"},{country:"Kosovo",code:"383",iso:"XK"},{country:"Kuwait",code:"965",iso:"KW"},{country:"Kyrgyzstan",code:"996",iso:"KG"},{country:"Laos",code:"856",iso:"LA"},{country:"Latvia",code:"371",iso:"LV"},{country:"Lebanon",code:"961",iso:"LB"},{country:"Lesotho",code:"266",iso:"LS"},{country:"Liberia",code:"231",iso:"LR"},{country:"Libya",code:"218",iso:"LY"},{country:"Liechtenstein",code:"423",iso:"LI"},{country:"Lithuania",code:"370",iso:"LT"},{country:"Luxembourg",code:"352",iso:"LU"},{country:"Macao",code:"853",iso:"MO"},{country:"Macedonia",code:"389",iso:"MK"},{country:"Madagascar",code:"261",iso:"MG"},{country:"Malawi",code:"265",iso:"MW"},{country:"Malaysia",code:"60",iso:"MY"},{country:"Maldives",code:"960",iso:"MV"},{country:"Mali",code:"223",iso:"ML"},{country:"Malta",code:"356",iso:"MT"},{country:"Marshall Islands",code:"692",iso:"MH"},{country:"Mauritania",code:"222",iso:"MR"},{country:"Mauritius",code:"230",iso:"MU"},{country:"Mayotte",code:"262",iso:"YT"},{country:"Mexico",code:"52",iso:"MX"},{country:"Micronesia",code:"691",iso:"FM"},{country:"Moldova",code:"373",iso:"MD"},{country:"Monaco",code:"377",iso:"MC"},{country:"Mongolia",code:"976",iso:"MN"},{country:"Montenegro",code:"382",iso:"ME"},{country:"Montserrat",code:"1-664",iso:"MS"},{country:"Morocco",code:"212",iso:"MA"},{country:"Mozambique",code:"258",iso:"MZ"},{country:"Myanmar",code:"95",iso:"MM"},{country:"Namibia",code:"264",iso:"NA"},{country:"Nauru",code:"674",iso:"NR"},{country:"Nepal",code:"977",iso:"NP"},{country:"Netherlands",code:"31",iso:"NL"},{country:"Netherlands Antilles",code:"599",iso:"AN"},{country:"New Caledonia",code:"687",iso:"NC"},{country:"New Zealand",code:"64",iso:"NZ"},{country:"Nicaragua",code:"505",iso:"NI"},{country:"Niger",code:"227",iso:"NE"},{country:"Nigeria",code:"234",iso:"NG"},{country:"Niue",code:"683",iso:"NU"},{country:"North Korea",code:"850",iso:"KP"},{country:"Northern Mariana Islands",code:"1-670",iso:"MP"},{country:"Norway",code:"47",iso:"NO"},{country:"Oman",code:"968",iso:"OM"},{country:"Pakistan",code:"92",iso:"PK"},{country:"Palau",code:"680",iso:"PW"},{country:"Palestine",code:"970",iso:"PS"},{country:"Panama",code:"507",iso:"PA"},{country:"Papua New Guinea",code:"675",iso:"PG"},{country:"Paraguay",code:"595",iso:"PY"},{country:"Peru",code:"51",iso:"PE"},{country:"Philippines",code:"63",iso:"PH"},{country:"Pitcairn",code:"64",iso:"PN"},{country:"Poland",code:"48",iso:"PL"},{country:"Portugal",code:"351",iso:"PT"},{country:"Puerto Rico",code:"1-787, 1-939",iso:"PR"},{country:"Qatar",code:"974",iso:"QA"},{country:"Republic of the Congo",code:"242",iso:"CG"},{country:"Reunion",code:"262",iso:"RE"},{country:"Romania",code:"40",iso:"RO"},{country:"Russia",code:"7",iso:"RU"},{country:"Rwanda",code:"250",iso:"RW"},{country:"Saint Barthelemy",code:"590",iso:"BL"},{country:"Saint Helena",code:"290",iso:"SH"},{country:"Saint Kitts and Nevis",code:"1-869",iso:"KN"},{country:"Saint Lucia",code:"1-758",iso:"LC"},{country:"Saint Martin",code:"590",iso:"MF"},{country:"Saint Pierre and Miquelon",code:"508",iso:"PM"},{country:"Saint Vincent and the Grenadines",code:"1-784",iso:"VC"},{country:"Samoa",code:"685",iso:"WS"},{country:"San Marino",code:"378",iso:"SM"},{country:"Sao Tome and Principe",code:"239",iso:"ST"},{country:"Saudi Arabia",code:"966",iso:"SA"},{country:"Senegal",code:"221",iso:"SN"},{country:"Serbia",code:"381",iso:"RS"},{country:"Seychelles",code:"248",iso:"SC"},{country:"Sierra Leone",code:"232",iso:"SL"},{country:"Singapore",code:"65",iso:"SG"},{country:"Sint Maarten",code:"1-721",iso:"SX"},{country:"Slovakia",code:"421",iso:"SK"},{country:"Slovenia",code:"386",iso:"SI"},{country:"Solomon Islands",code:"677",iso:"SB"},{country:"Somalia",code:"252",iso:"SO"},{country:"South Africa",code:"27",iso:"ZA"},{country:"South Korea",code:"82",iso:"KR"},{country:"South Sudan",code:"211",iso:"SS"},{country:"Spain",code:"34",iso:"ES"},{country:"Sri Lanka",code:"94",iso:"LK"},{country:"Sudan",code:"249",iso:"SD"},{country:"Suriname",code:"597",iso:"SR"},{country:"Svalbard and Jan Mayen",code:"47",iso:"SJ"},{country:"Swaziland",code:"268",iso:"SZ"},{country:"Sweden",code:"46",iso:"SE"},{country:"Switzerland",code:"41",iso:"CH"},{country:"Syria",code:"963",iso:"SY"},{country:"Taiwan",code:"886",iso:"TW"},{country:"Tajikistan",code:"992",iso:"TJ"},{country:"Tanzania",code:"255",iso:"TZ"},{country:"Thailand",code:"66",iso:"TH"},{country:"Togo",code:"228",iso:"TG"},{country:"Tokelau",code:"690",iso:"TK"},{country:"Tonga",code:"676",iso:"TO"},{country:"Trinidad and Tobago",code:"1-868",iso:"TT"},{country:"Tunisia",code:"216",iso:"TN"},{country:"Turkey",code:"90",iso:"TR"},{country:"Turkmenistan",code:"993",iso:"TM"},{country:"Turks and Caicos Islands",code:"1-649",iso:"TC"},{country:"Tuvalu",code:"688",iso:"TV"},{country:"U.S. Virgin Islands",code:"1-340",iso:"VI"},{country:"Uganda",code:"256",iso:"UG"},{country:"Ukraine",code:"380",iso:"UA"},{country:"United Arab Emirates",code:"971",iso:"AE"},{country:"United Kingdom",code:"44",iso:"GB"},{country:"United States",code:"1",iso:"US"},{country:"Uruguay",code:"598",iso:"UY"},{country:"Uzbekistan",code:"998",iso:"UZ"},{country:"Vanuatu",code:"678",iso:"VU"},{country:"Vatican",code:"379",iso:"VA"},{country:"Venezuela",code:"58",iso:"VE"},{country:"Vietnam",code:"84",iso:"VN"},{country:"Wallis and Futuna",code:"681",iso:"WF"},{country:"Western Sahara",code:"212",iso:"EH"},{country:"Yemen",code:"967",iso:"YE"},{country:"Zambia",code:"260",iso:"ZM"},{country:"Zimbabwe",code:"263",iso:"ZW"}];var yn=["phone"],Je=class n{showPhone;placeholder=null;onSelectPhoneCountry=new Y;onPhoneNumberChange=new Y;phone;get checkFocus(){return this.isFocus}countryCodes=qi;constructor(){}ngOnInit(){}ngOnDestroy(){}ngAfterViewInit(){if(G.isServer)return;let a=this.phone.nativeElement;(0,Wi.default)(a,{initialCountry:"cn",separateDialCode:!0});let e=window.intlTelInputGlobals?.getInstance(a);a.addEventListener("countrychange",()=>{let t=e.getSelectedCountryData();this.onSelectPhoneCountry.emit(`+${t.dialCode}`)})}onInput(a){this.onPhoneNumberChange.emit(a.target.value)}isFocus=!1;handleBlur(){this.isFocus=!1}handleFocus(){this.isFocus=!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-phone-control"]],viewQuery:function(e,t){if(e&1&&ge(yn,5),e&2){let i;ue(i=me())&&(t.phone=i.first)}},hostVars:2,hostBindings:function(e,t){e&2&&R("has-focus",t.checkFocus)},inputs:{showPhone:"showPhone",placeholder:"placeholder"},outputs:{onSelectPhoneCountry:"onSelectPhoneCountry",onPhoneNumberChange:"onPhoneNumberChange"},decls:2,vars:1,consts:[["phone",""],["type","tel",1,"tel-input","block",3,"blur","focus","input","placeholder"]],template:function(e,t){if(e&1){let i=V();ft(0,"input",1,0),yi("blur",function(){return S(i),I(t.handleBlur())})("focus",function(){return S(i),I(t.handleFocus())})("input",function(l){return S(i),I(t.onInput(l))}),gt()}e&2&&gi("placeholder",t.placeholder)},styles:["[_nghost-%COMP%]{--tw-border-opacity: 1;border-color:rgb(var(--gray-6) / var(--tw-border-opacity, 1))}[_nghost-%COMP%]     .iti__flag-container{border-color:inherit}[_nghost-%COMP%]     .iti{padding-left:.375rem;padding-right:.375rem;height:44px!important}[_nghost-%COMP%]     .iti__selected-flag{border-right-width:2px;border-style:solid;border-color:inherit}[_nghost-%COMP%]     input{height:100%;width:100%;font-size:1.125rem;line-height:1.75rem;font-weight:500;--tw-text-opacity: 1;color:rgb(var(--strong) / var(--tw-text-opacity, 1));outline:2px solid transparent;outline-offset:2px}[_nghost-%COMP%]     input::placeholder{color:#0009}[_nghost-%COMP%]     .iti, [_nghost-%COMP%]     input{width:100%;border-radius:.375rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}[_nghost-%COMP%]     .iti__selected-flag{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.has-focus[_nghost-%COMP%]{--tw-border-opacity: 1;border-color:rgb(var(--main-purple) / var(--tw-border-opacity, 1))}.error-field[_nghost-%COMP%]{border-color:red}"]})};var bn=[[["","header",""]]],wn=["[header]"],xn=n=>({"translate-x-full":n}),Ki=n=>({"text-white":n}),Sn=n=>({"-translate-x-full":n}),Nt=()=>({value:!0});function In(n,a){if(n&1){let e=V();y(0,"div",12)(1,"div",13),A(2,"div",14),y(3,"button",15),O("click",function(){S(e);let i=x();return I(i.switchLoginType(i.LoginType.ACCOUNT))}),A(4,"ion-icon",16),D(5),E(6,"translate"),_(),y(7,"button",15),O("click",function(){S(e);let i=x();return I(i.switchLoginType(i.LoginType.MOBILE))}),A(8,"ion-icon",17),D(9),E(10,"translate"),_()(),y(11,"div",18)(12,"div",19)(13,"div",20),pe(14,21),_(),y(15,"div",20),pe(16,21),_()()()()}if(n&2){let e=x(),t=N(5),i=N(7);m(2),C("ngClass",fe(14,xn,e.loginType!==e.LoginType.ACCOUNT)),m(),C("disabled",e.progress!=="Inputing")("ngClass",fe(16,Ki,e.loginType===e.LoginType.ACCOUNT)),m(2),H(" ",T(6,10,"username")," "),m(2),C("disabled",e.progress!=="Inputing")("ngClass",fe(18,Ki,e.loginType!==e.LoginType.ACCOUNT)),m(2),H(" ",T(10,12,"sms")," "),m(3),C("ngClass",fe(20,Sn,e.loginType===e.LoginType.MOBILE)),m(2),C("ngTemplateOutlet",t),m(2),C("ngTemplateOutlet",i)}}function En(n,a){n&1&&pe(0)}function Tn(n,a){if(n&1){let e=V();y(0,"form",22),O("submit",function(){S(e);let i=x();return I(i.submit())}),y(1,"div",23)(2,"div",24),A(3,"ion-input",25,4),E(5,"translate"),_()(),y(6,"div",26)(7,"div",27),A(8,"ion-input",28,5),E(10,"translate"),y(11,"div",29,6),A(13,"app-eye-close"),_(),y(14,"div",29,7),A(16,"app-eye-open"),_()()(),y(17,"div",30)(18,"button",31),O("click",function(){S(e);let i=x();return I(i.userService.authMode=i.AuthMode.FORGOT_PASSWORD)}),D(19),E(20,"translate"),_()(),y(21,"button",32),F(22,En,1,0,"ng-container",33),_(),y(23,"div",34)(24,"button",35),O("click",function(){S(e);let i=x();return I(i.userService.authMode=i.AuthMode.REGISTER)}),D(25),E(26,"translate"),_()()()}if(n&2){let e,t,i=N(12),o=N(15),l=x(),c=N(11);C("@delayHide",void 0)("formGroup",l.form),m(3),R("error-field",((e=l.form.get("username"))==null?null:e.invalid)&&(((e=l.form.get("username"))==null?null:e.dirty)||((e=l.form.get("username"))==null?null:e.touched))),C("placeholder",ye(T(5,26,"username")))("readonly",l.progress!=="Inputing"),m(5),R("error-field",((t=l.form.get("password"))==null?null:t.invalid)&&(((t=l.form.get("password"))==null?null:t.dirty)||((t=l.form.get("password"))==null?null:t.touched))),C("placeholder",ye(T(10,28,"password")))("eyeClose",i)("readonly",l.progress!=="Inputing")("eyeOpen",o)("clearOnEdit",!1),m(10),C("disabled",l.progress!=="Inputing"),m(),W(T(20,30,"forgot-password")),m(2),R("disabled",l.form.invalid)("success",l.progress=="Success")("failed",l.progress=="Error"),m(),C("ngTemplateOutlet",c),m(2),C("disabled",l.progress!=="Inputing"),m(),H(" ",T(26,32,"register")," ")}}function Mn(n,a){if(n&1){let e=V();y(0,"button",44),O("click",function(){S(e);let i=x(2);return I(i.getSmsCode())}),D(1),E(2,"translate"),_()}if(n&2){let e,t,i=a.ngLet,o=x(2);R("error-field",((e=o.form.get("smsCode"))==null?null:e.invalid)&&(((e=o.form.get("smsCode"))==null?null:e.dirty)||((e=o.form.get("smsCode"))==null?null:e.touched))),C("disabled",i>0||!((t=o.form.get("mobile"))!=null&&t.value)),m(),H(" ",i||T(2,4,"get-verification-code")," ")}}function kn(n,a){n&1&&pe(0)}function Dn(n,a){if(n&1){let e=V();y(0,"form",22),O("submit",function(){S(e);let i=x();return I(i.submitMobile())}),y(1,"div",36)(2,"div",37),D(3),E(4,"translate"),_(),y(5,"app-phone-control",38),E(6,"translate"),O("onSelectPhoneCountry",function(i){S(e);let o=x();return I(o.onSelectPhoneCountry(i))})("onPhoneNumberChange",function(i){S(e);let o=x();return I(o.onPhoneNumberChange(i))}),_()(),y(7,"div",26)(8,"div",37),D(9),E(10,"translate"),_(),y(11,"div",39),A(12,"ion-input",40),E(13,"translate"),F(14,Mn,3,6,"button",41),E(15,"async"),_()(),y(16,"button",42),F(17,kn,1,0,"ng-container",33),_(),y(18,"div",43)(19,"button",35),O("click",function(){S(e);let i=x();return I(i.userService.authMode=i.AuthMode.REGISTER)}),D(20),E(21,"translate"),_()()()}if(n&2){let e,t,i,o,l=x(),c=N(11);C("@delayHide",void 0)("formGroup",l.form),m(2),R("error-label",((e=l.form.get("mobile"))==null?null:e.invalid)&&(((e=l.form.get("mobile"))==null?null:e.dirty)||((e=l.form.get("mobile"))==null?null:e.touched))),m(),W(T(4,25,"phone-number")),m(2),R("error-field",((t=l.form.get("mobile"))==null?null:t.invalid)&&(((t=l.form.get("mobile"))==null?null:t.dirty)||((t=l.form.get("mobile"))==null?null:t.touched))),C("placeholder",T(6,27,"phone-number")),m(3),R("error-label",((i=l.form.get("smsCode"))==null?null:i.invalid)&&(((i=l.form.get("smsCode"))==null?null:i.dirty)||((i=l.form.get("smsCode"))==null?null:i.touched))),m(),W(T(10,29,"verification-code")),m(3),R("error-field",((o=l.form.get("smsCode"))==null?null:o.invalid)&&(((o=l.form.get("smsCode"))==null?null:o.dirty)||((o=l.form.get("smsCode"))==null?null:o.touched))),C("readonly",l.progress!=="Inputing")("placeholder",T(13,31,"verification-code-placeholder")),m(2),C("ngLet",T(15,33,l.userService.smsTimeRemaining$)),m(2),R("disabled",l.form.invalid)("success",l.progress=="Success")("failed",l.progress=="Error"),m(),C("ngTemplateOutlet",c),m(2),C("disabled",l.progress!=="Inputing"),m(),H(" ",T(21,35,"register")," ")}}function On(n,a){}function Ln(n,a){n&1&&(y(0,"div",49),A(1,"span",50),_()),n&2&&C("@upHide",ve(1,Nt))}function Pn(n,a){n&1&&(Te(),y(0,"svg",51),A(1,"path",52),_()),n&2&&C("@upHide",ve(1,Nt))}function Rn(n,a){n&1&&(y(0,"div",53),A(1,"ion-icon",54),y(2,"span"),D(3),E(4,"translate"),_()()),n&2&&(C("@upHide",ve(4,Nt)),m(3),W(T(4,2,"login-failed")))}function An(n,a){n&1&&(y(0,"div",53)(1,"span",55),D(2),E(3,"translate"),_()()),n&2&&(C("@upHide",ve(4,Nt)),m(2),W(T(3,2,"login-human-verification")))}function Fn(n,a){n&1&&(y(0,"span",56),D(1),E(2,"translate"),_()),n&2&&(m(),H(" ",T(2,1,"login")," "))}function Vn(n,a){if(n&1&&F(0,Ln,2,2,"div",45)(1,Pn,2,2,"svg",46)(2,Rn,5,5,"div",47)(3,An,4,5,"div",47)(4,Fn,3,3,"span",48),n&2){let e=x();C("ngIf",e.progress==="Loading"),m(),C("ngIf",e.progress=="Success"),m(),C("ngIf",e.progress==="Error"),m(),C("ngIf",e.progress==="Verifying"),m(),C("ngIf",e.progress==="Inputing")}}var Bt=class n extends Tt{constructor(e,t,i,o,l,c){super();this.fb=e;this.animationCtrl=t;this.userService=i;this.authService=o;this.route=l;this.ngZone=c}onFinish=new Y;onFailed=new Y;form;loginType="account";verifyCode;showPassword=!1;progress="Inputing";isLogining=!1;isFailed=!1;isOpenCaptchaModal=!1;LoginType=xi;AuthMode=Ne;captchaType="loginPwd";ngOnInit(){this.setLoginForm("account"),this.userService.userInfo.set(null),G.isBrowser&&this.userService.initVerificationTimer()}ngOnDestroy(){super.ngOnDestroy()}switchLoginType(e){this.loginType=e,this.setLoginForm(e)}onSelectPhoneCountry(e){e&&this.form.get("mobileArea")?.patchValue(e)}onPhoneNumberChange(e){this.form.get("mobile")?.markAsTouched(),this.form.get("mobile")?.patchValue(e)}getVerifyCode(){this.verifyCode=null,this.authService.getVerifyCode("Login").pipe(de(this.onDestroy$)).subscribe(e=>{e&&(this.verifyCode=e,this.form.get("captchaId")?.patchValue(e.captchaId),this.cdr.detectChanges())})}getSmsCode(){this.captchaType="sendSms",this.isOpenCaptchaModal=!0}async submit(){if(this.progress==="Inputing"){if(this.form.invalid){let e=this.form.getRawValue();e.username||(this.form.controls.username.markAsDirty(),this.form.controls.username.updateValueAndValidity({onlySelf:!0})),e.password||(this.form.controls.password.markAsDirty(),this.form.controls.password.updateValueAndValidity({onlySelf:!0})),this.loginHasFailed(!0);return}this.progress="Verifying",this.captchaType="loginPwd",this.cdr.detectChanges(),this.isOpenCaptchaModal=!0,this.cdr.detectChanges()}}async submitMobile(){if(this.progress!=="Inputing")return;let e=this.form.value;if(this.form.invalid){e.mobile||(this.form.controls.mobile.markAsDirty(),this.form.controls.mobile.updateValueAndValidity({onlySelf:!0})),e.smsCode||(this.form.controls.smsCode.markAsDirty(),this.form.controls.smsCode.updateValueAndValidity({onlySelf:!0})),this.loginHasFailed(!0);return}this.progress="Loading",this.cdr.detectChanges(),this.authService.loginByMobilePhone(qt(zt({},e),{mobile:e.mobile.toString(),smsCode:e.smsCode.toString()})).pipe(de(this.onDestroy$)).subscribe(t=>{this.login(t)})}async login(e){if(G.isBrowser&&await se(ie(300)),!e.body.data){this.loginHasFailed(),this.toast.toastError(e.body.i18nKey||e.body.message),this.getVerifyCode();return}this.progress="Success",this.cdr.detectChanges(),G.isBrowser&&await se(ie(800)),this.userService.setToken(e.headers.get("token")),await se(ie(0)),this.userService.setUserInfo(e.body.data),this.userService.updateUserInfo();let t=this.route.snapshot.queryParamMap.get("back")||"/",i=this.router.url.includes("/login")?decodeURIComponent(t):this.router.url;this.onFinish.emit(),G.isBrowser&&await se(ie(200)),this.router.navigateByUrl("/blank",{skipLocationChange:!0}).then(()=>{this.router.navigateByUrl(i,{replaceUrl:!0}).then(()=>{})})}async loginHasFailed(e=!1){G.isBrowser&&(e||(this.progress="Error",this.cdr.detectChanges(),await Re(ie(260))),this.isFailed=!0,this.onFailed.emit(this.isFailed),this.cdr.detectChanges(),setTimeout(()=>{this.progress="Inputing",this.isFailed=!1,this.onFailed.emit(this.isFailed),this.cdr.detectChanges()},800))}setLoginForm(e){switch(e){case"account":this.form=this.fb.group({username:[this.form?.get("username")?.value||null,[le.required]],password:[this.form?.get("password")?.value||null,[le.required]],mobileArea:[this.form?.get("mobileArea")?.value||"+86"],mobile:[this.form?.get("mobile")?.value||null],smsCode:[this.form?.get("smsCode")?.value||null]}),this.form.updateValueAndValidity();break;case"mobile":this.form=this.fb.group({username:[this.form?.get("username")?.value||null],password:[this.form?.get("password")?.value||null],mobileArea:[this.form?.get("mobileArea")?.value||"+86",[le.required]],mobile:[this.form?.get("mobile")?.value||null,[le.required]],smsCode:[this.form?.get("smsCode")?.value||null,[le.required]]}),this.form.updateValueAndValidity();break}}loginAfterCaptcha(e){let t=this.form.getRawValue();if(this.loginType==="account")this.progress="Loading",this.cdr.detectChanges(),this.authService.login(qt(zt({},t),{source:"web",password:(0,Zi.default)(t.password).toString(),username:t.username?.trim()}),e).pipe(de(this.onDestroy$)).subscribe(i=>{this.login(i)});else if(this.loginType==="mobile"){this.progress="Inputing";let{mobile:i,mobileArea:o}=this.form.value;this.authService.sendSMSVerifyCode({method:"loginByMobilePhone",mobileArea:o||"+86",mobile:i.toString()},e).pipe(de(this.onDestroy$)).subscribe(l=>{if(l.code!==0){this.progress="Inputing",this.toast.toastError(l.i18nKey||l.message);return}this.userService.startVerificationTimer("sms",60,!0),this.toast.toastSuccess(this.i18n.instant("verify-code-sent"))})}}onCaptchDismiss(e){this.progress="Inputing"}static \u0275fac=function(t){return new(t||n)(B(We),B(xe),B(Ue),B(Ee),B(Be),B(Ve))};static \u0275cmp=K({type:n,selectors:[["app-login-form"]],outputs:{onFinish:"onFinish",onFailed:"onFailed"},features:[ne],ngContentSelectors:wn,decls:13,vars:6,consts:[["accountLogin",""],["mobileLogin",""],["qrLogin",""],["loginBtnContent",""],["username",""],["password",""],["eyeClose",""],["eyeOpen",""],["visibility","hover",3,"autoHeightDisabled"],[1,"auth-form","pt-8"],["class","w-full",4,"ngIf"],[3,"isOpenChange","onSuccess","captchaType","isOpen"],[1,"w-full"],[1,"grid","grid-cols-2","relative","rounded-lg","mb-8","bg-[#545A80]","text-white"],[1,"w-1/2","absolute","bg-primary-color","rounded-lg","h-full","top-0","left-0","transform","transition-transform","duration-300",3,"ngClass"],[1,"w-full","h-10","text-base","2xs:text-xl","font-medium","flex","items-center","justify-center","gap-x-2","relative",3,"click","disabled","ngClass"],["name","person-outline",1,"h-4","w-4","xs:w-6","xs:h-6"],["name","call-outline",1,"h-4","w-4","xs:w-6","xs:h-6"],[1,"relative","overflow-hidden","w-full",2,"height","300px"],[1,"flex","h-full","transform","transition-transform","duration-300",3,"ngClass"],[1,"basis-full","flex-shrink-0","flex-grow-0"],[3,"ngTemplateOutlet"],[1,"",3,"submit","formGroup"],[1,"",2,"--delay","100ms"],[1,"flex","items-center","mb-8","relative"],["formControlName","username","type","text",1,"w-full","border-2","bg-white","rounded-md",3,"readonly","placeholder"],[1,"",2,"--delay","200ms"],[1,"flex","items-center","mb-4","relative"],["appPasswordToggle","","type","password","formControlName","password",1,"w-full","icon-input","bg-white","rounded-md",2,"--strong","0 0 0",3,"eyeClose","readonly","eyeOpen","placeholder","clearOnEdit"],[1,"cursor-pointer","w-7","h-7","flex","justify-center","items-center","z-10","absolute","right-2","top-1/2","transform","-translate-y-1/2","text-gray-4"],[1,"flex","items-center","mb-4","w-full","justify-end","fade-in","text-white",2,"--delay","250ms"],["type","button",1,"block","ml-auto","text-lg","font-bold","text-dark-purple","cursor-pointer","hover:text-primary-color",3,"click","disabled"],["type","submit",1,"auth-btn","theme-btn","border","border-solid","border-transparent","bg-dark-purple","text-white","w-full","mb-2","text-2xl","rounded-xl","font-medium","relative","hover:bg-primary-color","bg-primary-gradient",2,"--delay","250ms"],[4,"ngTemplateOutlet"],[1,"flex","items-center","justify-center","text-white",2,"--delay","250ms"],["type","button",1,"text-2xl","cursor-pointer","font-medium","text-gray-6","text-center","py-2","w-full","h-12","register-account","flex","items-center","justify-center","rounded-md","hover:text-primary-color","hover:bg-primary-color/10",3,"click","disabled"],[1,"relative","z-10",2,"--delay","100ms"],[1,"text-lg","font-bold","text-gray-6"],[1,"block","w-full","mb-4",3,"onSelectPhoneCountry","onPhoneNumberChange","placeholder"],[1,"flex","items-center","mb-6","gap-2"],["type","number","formControlName","smsCode","maxlength","6",1,"bg-white","rounded-md",3,"readonly","placeholder"],["class","verification-btn theme-btn whitespace-nowrap text-lg bg-main-yellow hover:shadow-md text-black h-12 w-32 rounded-md px-2 py-1 border border-solid font-bold","type","button",3,"disabled","error-field","click",4,"ngLet"],["type","submit",1,"auth-btn","theme-btn","border","border-solid","border-transparent","bg-dark-purple","text-white","text-2xl","font-medium","text-center","w-full","rounded-xl","py-2.5","mb-2","relative","bg-primary-gradient",2,"--delay","250ms"],[1,"flex","items-center","justify-center",2,"--delay","250ms"],["type","button",1,"verification-btn","theme-btn","whitespace-nowrap","text-lg","bg-main-yellow","hover:shadow-md","text-black","h-12","w-32","rounded-md","px-2","py-1","border","border-solid","font-bold",3,"click","disabled"],["class","absolute block left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",4,"ngIf"],["width","36","height","36","viewBox","0 0 36 36","class","absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",4,"ngIf"],["class","absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center whitespace-nowrap",4,"ngIf"],["class","absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",4,"ngIf"],[1,"absolute","block","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"spinner"],["width","36","height","36","viewBox","0 0 36 36",1,"absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],["fill","#fff","d","M13.5 24.26L7.24 18l-2.12 2.12 8.38 8.38 18-18-2.12-2.12z"],[1,"absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2","flex","items-center","whitespace-nowrap"],["name","alert-circle-outline",1,"mr-2","w-6","h-6"],[1,"animated-elipsis"],[1,"absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"]],template:function(t,i){if(t&1){let o=V();yt(bn),vt(0),y(1,"ng-scrollbar",8)(2,"div",9),F(3,In,17,22,"div",10),_()(),F(4,Tn,27,34,"ng-template",null,0,Q)(6,Dn,22,37,"ng-template",null,1,Q)(8,On,0,0,"ng-template",null,2,Q)(10,Vn,5,5,"ng-template",null,3,Q),y(12,"app-captcha-modal",11),rt("isOpenChange",function(c){return S(o),ot(i.isOpenCaptchaModal,c)||(i.isOpenCaptchaModal=c),I(c)}),O("isOpenChange",function(c){return S(o),I(i.onCaptchDismiss(c))})("onSuccess",function(c){return S(o),I(i.loginAfterCaptcha(c))}),_()}t&2&&(m(),C("autoHeightDisabled",!1),m(),R("failed",i.isFailed),m(),C("ngIf",i.form),m(9),C("captchaType",i.captchaType),nt("isOpen",i.isOpenCaptchaModal))},dependencies:[Z,_t,_e,Ce,ee,je,$e,Ge,xt,J,oe,Ke,we,Ft,Oe,Le,Ie,kt,Oi,Ot,Lt,Ye,be,ze,qe,Je,Ct,he],styles:["ng-scrollbar[_ngcontent-%COMP%]{max-height:85vh}.auth-form[_ngcontent-%COMP%]{min-height:430px}.login-type[_ngcontent-%COMP%]{max-width:100px;transition:all .2s ease}.login-type[_ngcontent-%COMP%]:hover{background:rgba(var(--dark-purple-rgb),.05);transform:translateY(-2px)}.login-type.active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}ion-input[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--highlight-color-focused: var(--strong);--highlight-color-valid: var(--strong);font-weight:500;box-shadow:0 10px 15px -3px #0000000d,0 4px 6px -2px #00000008}ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-inner-spin-button, ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}ion-input[_ngcontent-%COMP%]     input{font-size:18px!important;height:100%;padding:0 12px!important}ion-input[_ngcontent-%COMP%]     input:-webkit-autofill, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:focus{border:0;filter:none;-webkit-text-fill-color:var(--strong);-webkit-box-shadow:0 0 0px 1000px var(--panel-3) inset;transition:background-color 50000s ease-in-out 0s}ion-input[_ngcontent-%COMP%]     .input-highlight{display:none}ion-input.icon-input[_ngcontent-%COMP%]     input{padding-right:42px!important}app-eye-close[_ngcontent-%COMP%], app-eye-open[_ngcontent-%COMP%]{display:block;width:1rem}.checkmark[_ngcontent-%COMP%]{transform:translate(-50%) translateY(-54%) rotate(45deg);width:5px;height:10px}.auth-btn[_ngcontent-%COMP%]{height:55px;box-shadow:0 10px 15px -3px #00000020,0 4px 6px -2px #00000008;text-shadow:2px 3px 6px rgba(0,0,0,.1);transition:all .26s ease-out}.auth-btn.success[_ngcontent-%COMP%]{background-color:#03bf3f;border:1px solid #7befa2}.auth-btn.success[_ngcontent-%COMP%]:hover{background:#03bf3f}.auth-btn.failed[_ngcontent-%COMP%]{background-color:red;border-color:red;color:#fff;opacity:1}.auth-btn.failed[_ngcontent-%COMP%]:hover{background-color:red}.auth-btn.disabled[_ngcontent-%COMP%]{cursor:not-allowed;box-shadow:none;text-shadow:none}.auth-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;margin:0 8px;border-radius:50%;width:1.5em;height:1.5em;border:.215em solid transparent;vertical-align:middle;font-size:16px;border-top-color:#fff;filter:drop-shadow(2px 3px 6px rgba(0,0,0,.1));animation:_ngcontent-%COMP%_spin 1s cubic-bezier(.55,.15,.45,.85) infinite}.auth-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(2px 3px 6px rgba(0,0,0,.1))}auth-form.failed[_ngcontent-%COMP%]   .auth-btn[_ngcontent-%COMP%]{transition-delay:0;transition:none;background-color:red;border-color:red;color:#fff;opacity:1}.verification-btn[_ngcontent-%COMP%]{border-color:#d9b500}.verification-btn[_ngcontent-%COMP%]:disabled{box-shadow:none}.error-label[_ngcontent-%COMP%]{color:red}ion-icon[_ngcontent-%COMP%]{--ionicon-stroke-width: 40px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}ion-input[_ngcontent-%COMP%]{color:#000;--strong: 0, 0, 0;--contrast-strong: 255, 255, 255}app-phone-control[_ngcontent-%COMP%]{color:#000}app-phone-control[_ngcontent-%COMP%]     input{color:#000}"],data:{animation:[Qe,te("delayHide",[z(":leave",[j("0.3s ease-out")])])]}})};var Yi=Wt(ei());var Bn=(()=>{class n{constructor(e,t,i,o,l){this._legacyCanvasSize=n.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=t:(console.warn(i||o||l?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof i=="object"?i:{},this._onDecodeError=t.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof o=="function"?o:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||l||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof o=="number"?o:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let c=!1;if(e.hidden&&(e.hidden=!1,c=!0),document.body.contains(e)||(document.body.appendChild(e),c=!0),i=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(o=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),l=this.$overlay.style,l.position="absolute",l.display="none",l.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let M=window.getComputedStyle(e);M.display==="none"&&(e.style.setProperty("display","block","important"),c=!0),M.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),c=!0),c&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=n.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await n.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(o=>o.kind==="videoinput"),i;try{e&&(await t()).every(o=>!o.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((o,l)=>({id:o.deviceId,label:o.label||(l===0?"Default Camera":`Camera ${l+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),n._stopVideoStream(i))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),n._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),n._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?n._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(n._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(t(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,i,o,l=!1,c=!1){let M,d=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(M=t.scanRegion,i=t.qrEngine,o=t.canvas,l=t.disallowCanvasResizing||!1,c=t.alsoTryWithoutScanRegion||!1,d=!0):console.warn(t||i||o||l||c?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!i;try{let f,h;[i,f]=await Promise.all([i||n.createQrEngine(),n._loadImage(e)]),[o,h]=n._drawToCanvas(f,M,o,l);let g;if(i instanceof Worker){let v=i;t||n._postWorkerMessageSync(v,"inversionMode","both"),g=await new Promise((L,k)=>{let p,r,s,u=-1;r=w=>{w.data.id===u&&(v.removeEventListener("message",r),v.removeEventListener("error",s),clearTimeout(p),w.data.data!==null?L({data:w.data.data,cornerPoints:n._convertPoints(w.data.cornerPoints,M)}):k(n.NO_QR_CODE_FOUND))},s=w=>{v.removeEventListener("message",r),v.removeEventListener("error",s),clearTimeout(p),k("Scanner error: "+(w?w.message||w:"Unknown Error"))},v.addEventListener("message",r),v.addEventListener("error",s),p=setTimeout(()=>s("timeout"),1e4);let b=h.getImageData(0,0,o.width,o.height);u=n._postWorkerMessageSync(v,"decode",b,[b.data.buffer])})}else g=await Promise.race([new Promise((v,L)=>window.setTimeout(()=>L("Scanner error: timeout"),1e4)),(async()=>{try{var[v]=await i.detect(o);if(!v)throw n.NO_QR_CODE_FOUND;return{data:v.rawValue,cornerPoints:n._convertPoints(v.cornerPoints,M)}}catch(L){if(v=L.message||L,/not implemented|service unavailable/.test(v))return n._disableBarcodeDetector=!0,n.scanImage(e,{scanRegion:M,canvas:o,disallowCanvasResizing:l,alsoTryWithoutScanRegion:c});throw`Scanner error: ${v}`}})()]);return d?g:g.data}catch(f){if(!M||!c)throw f;let h=await n.scanImage(e,{qrEngine:i,canvas:o,disallowCanvasResizing:l});return d?h:h.data}finally{t||n._postWorkerMessage(i,"close")}}setGrayscaleWeights(e,t,i,o=!0){n._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:i,useIntegerApproximation:o})}setInversionMode(e){n._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>import("./chunk-SS3TLHB6.js").then(i=>i.createWorker()),!(!n._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,i=e.videoHeight,o=e.offsetWidth,l=e.offsetHeight,c=e.offsetLeft,M=e.offsetTop,d=window.getComputedStyle(e),f=d.objectFit,h=t/i,g=o/l;switch(f){case"none":var v=t,L=i;break;case"fill":v=o,L=l;break;default:(f==="cover"?h>g:h<g)?(L=l,v=L*h):(v=o,L=v/h),f==="scale-down"&&(v=Math.min(v,t),L=Math.min(L,i))}var[k,p]=d.objectPosition.split(" ").map((s,u)=>{let b=parseFloat(s);return s.endsWith("%")?(u?l-L:o-v)*b/100:b});d=this._scanRegion.width||t,g=this._scanRegion.height||i,f=this._scanRegion.x||0;var r=this._scanRegion.y||0;h=this.$overlay.style,h.width=`${d/t*v}px`,h.height=`${g/i*L}px`,h.top=`${M+p+r/i*L}px`,i=/scaleX\(-1\)/.test(e.style.transform),h.left=`${c+(i?o-k-v:k)+(i?t-f-d:f)/t*v}px`,h.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let i=t.x||0,o=t.y||0,l=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let c of e)c.x=c.x*l+i,c.y=c.y*t+o;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(o=>setTimeout(o,t-e)),this._lastScanTimestamp=Date.now();try{var i=await n.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(o){if(!this._active)return;this._onDecodeError(o)}!n._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=n.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:o,y:l})=>`${o},${l}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==n.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],i=t.map(o=>Object.assign({},o,{[e]:{exact:this._preferredCamera}}));for(let o of[...i,...t])try{let l=await navigator.mediaDevices.getUserMedia({video:o,audio:!1}),c=this._getFacingMode(l)||(o.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:l,facingMode:c}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,i,o=!1){i=i||document.createElement("canvas");let l=t&&t.x?t.x:0,c=t&&t.y?t.y:0,M=t&&t.width?t.width:e.videoWidth||e.width,d=t&&t.height?t.height:e.videoHeight||e.height;return o||(o=t&&t.downScaledWidth?t.downScaledWidth:M,t=t&&t.downScaledHeight?t.downScaledHeight:d,i.width!==o&&(i.width=o),i.height!==t&&(i.height=t)),t=i.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(e,l,c,M,d,0,0,i.width,i.height),[i,t]}static async _loadImage(e){if(e instanceof Image)return await n._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await n._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((t,i)=>{let o=l=>{e.removeEventListener("load",o),e.removeEventListener("error",o),l instanceof ErrorEvent?i("Image load error"):t()};e.addEventListener("load",o),e.addEventListener("error",o)})}static async _postWorkerMessage(e,t,i,o){return n._postWorkerMessageSync(await e,t,i,o)}static _postWorkerMessageSync(e,t,i,o){if(!(e instanceof Worker))return-1;let l=n._workerMessageId++;return e.postMessage({id:l,type:t,data:i},o),l}}return n.DEFAULT_CANVAS_SIZE=400,n.NO_QR_CODE_FOUND="No QR code found",n._disableBarcodeDetector=!1,n._workerMessageId=0,n})(),Ht=Bn;var Ut=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-camera-flip-icon"]],decls:5,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","version","1.1","id","\u5716\u5C64_1","x","0","y","0","viewBox","0 0 100 100",0,"xml","space","preserve"],["d","M70.492 25.691H59.347l-2.039-5.253a3.252 3.252 0 0 0-3.081-2.209h-8.454a3.254 3.254 0 0 0-3.081 2.209l-2.039 5.253H29.508a4.975 4.975 0 0 0-4.975 4.975v25.585a4.975 4.975 0 0 0 4.975 4.975h40.984a4.975 4.975 0 0 0 4.975-4.975V30.666a4.975 4.975 0 0 0-4.975-4.975z","fill","none","stroke","currentColor","stroke-width","4","stroke-miterlimit","10"],["cx","50","cy","43.459","r","11.371","fill","none","stroke","currentColor","stroke-width","4","stroke-miterlimit","10"],["d","M7.5 56.45c0 9.087 11.913 16.84 29.751 19.457l-.785 5.864 8.675-6.629-6.625-8.676-.782 5.842c-15.475-2.289-26.602-8.881-26.602-15.858 0-3.102 2.2-6.225 6.245-8.932v-4.26C10.916 46.924 7.5 51.482 7.5 56.45z","fill","currentColor"],["d","M82.624 43.262v4.259c4.043 2.706 6.244 5.823 6.244 8.929 0 9.073-17.8 16.739-38.869 16.739v3.632c23.832 0 42.5-8.948 42.5-20.37.001-4.9-3.507-9.571-9.875-13.189z","fill","currentColor"]],template:function(e,t){e&1&&(Te(),ft(0,"svg",0),mi(1,"path",1)(2,"circle",2)(3,"path",3)(4,"path",4),gt())},dependencies:[Z],encapsulation:2})};function Nn(n,a){if(n&1){let e=V();y(0,"div",16),O("click",function(){S(e);let i=x(2);return I(i.flipCamera())}),A(1,"app-camera-flip-icon",17),y(2,"div",18),D(3),E(4,"translate"),_()()}n&2&&(m(3),H(" ",T(4,1,"flip-camera")," "))}function Hn(n,a){if(n&1){let e=V();y(0,"div",4)(1,"div",5)(2,"div"),F(3,Nn,5,3,"div",6),_(),y(4,"button",7),O("click",function(){S(e),x();let i=N(1);return I(i.dismiss())}),D(5," \u2715 "),_()()(),y(6,"div",8),A(7,"video",9,1),y(9,"button",10),O("click",function(){S(e);let i=N(18);return I(i.click())}),y(10,"div",11),A(11,"ion-icon",12),y(12,"div",13),D(13),E(14,"translate"),_()(),y(15,"span",14),D(16,"+"),_()(),y(17,"input",15,2),O("change",function(i){S(e);let o=x();return I(o.scanImageForQr(i))}),_()()}if(n&2){let e=x();m(3),C("ngIf",e.cameraList.length>1),m(10),W(T(14,2,"album"))}}var $t=class n extends Se{onScanned=new Y;ngOnInit(){}code;qrScanner;qrcode;async scanImageForQr(a){console.log(a);let e=a.target.files[0];console.log("event",a),console.log(e);let t=e.type;if(!["image/gif","image/jpeg","image/png"].includes(t)){alert("File is not an image!");return}Ht.scanImage(e).then(o=>this.onScanned.emit({data:o})).catch(o=>alert("No Qr code found"))}cameraList=[];async handlePresent(){await this.getCameraList(),this.selectedCamera=0,this.qrScanner=new Ht(document.getElementById("QrScanner"),a=>this.onScanned.emit(a),{highlightScanRegion:!0}),this.qrScanner.start(),this.qrcode&&(this.qrcode.callback=a=>{console.log("data",a)}),this.cdr.markForCheck()}selectedCamera=0;async getCameraList(){this.cameraList=await Ht.listCameras(),this.cameraList.length===1&&!this.cameraList[0].id&&(this.cameraList[0].id="environment",this.cameraList.push({id:"user",label:"Camera 2"}))}async cycleCamera(){this.selectedCamera++,this.selectedCamera>this.cameraList.length-1&&(this.selectedCamera=0),await this.qrScanner.setCamera(this.cameraList[this.selectedCamera].id)}handleDismiss(){super.handleDismiss(),this.stop()}stop(){this.qrScanner?.stop()}facingMode="environment";async flipCamera(){this.facingMode=this.facingMode==="environment"?"user":"environment",await this.qrScanner.setCamera(this.facingMode)}ngOnDestroy(){super.ngOnDestroy(),this.stop()}static \u0275fac=(()=>{let a;return function(t){return(a||(a=li(n)))(t||n)}})();static \u0275cmp=K({type:n,selectors:[["app-qr-scan-modal"]],outputs:{onScanned:"onScanned"},features:[ne],decls:3,vars:1,consts:[["modal",""],["QrScanner",""],["inputFile",""],[3,"didPresent","didDismiss","isOpen"],[1,"absolute","top-0","w-full","left-0","right-0","z-10","bg-black/30"],[1,"flex","justify-between","items-center","px-2","py-1"],["class","flex items-center cursor-pointer",3,"click",4,"ngIf"],[1,"outline-none","text-5xl","text-primary",3,"click"],[1,"light-box-modal","flex","items-center"],["id","QrScanner"],[1,"absolute","cursor-pointer","z-10","bottom-1","left-1/2","transform","-translate-x-1/2","rounded-full","w-14","h-14","bg-black/20","hover:bg-black/50","flex","items-center","justify-center","text-white",3,"click"],[1,"text-center"],["name","images-outline",1,"w-8","h-8"],[1,"text-xs","leading-3","-mt-1.5","text-[10px]"],[1,"absolute","right-1","top-1","text-sm"],["type","file","type","file","accept","image/*",1,"hidden",3,"change"],[1,"flex","items-center","cursor-pointer",3,"click"],[1,"w-10","block","text-white","mx-auto"],[1,"text-xl","ml-2","text-white","capitalize"]],template:function(e,t){if(e&1){let i=V();y(0,"ion-modal",3,0),O("didPresent",function(){return S(i),I(t.handlePresent())})("didDismiss",function(){return S(i),I(t.handleDismiss())}),F(2,Hn,19,4,"ng-template"),_()}e&2&&C("isOpen",t.isOpen)},dependencies:[Z,_e,ee,J,oe,It,Ii,Ei,Ut,he],styles:["ion-modal[_ngcontent-%COMP%]{--backdrop-opacity: .8;--height: 100%;--width: 100%;--background: white}.light-box-modal[_ngcontent-%COMP%]{height:100%}video[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}  .scan-region-highlight{box-shadow:0 0 0 500vw #0000004d}  .scan-region-highlight svg{stroke:#ff7e18!important}"]})};var Un=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),et=class{static number(a){if(a.value){if(!/^[0-9]*$/.test(a.value))return{error:!0}}return{}}static phone(a){if(a.value){if(!/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/.test(a.value))return{error:!0}}else return{required:!0};return{}}static userName(a){if(a.value){if(!/(?![A-Z]*$)(?![a-z]*$)(?![0-9]*$)(?![^a-zA-Z0-9]*$)/.test(a.value)||/[\u4e00-\u9fa5]/.test(a.value))return{error:!0};if(a.value.trim().length<6)return{length:!0}}else return{required:!0};return{}}static password(a){if(a.value)if(/(?![A-Z]*$)(?![a-z]*$)(?![0-9]*$)(?![^a-zA-Z0-9]*$)/.test(a.value)){if(a.value.trim().length<6)return{length:!0}}else return{error:!0};else return{required:!0};return{}}static email(a){if(a.value){if(!Un.test(a.value))return{error:!0}}return{}}};var Gt=class n{constructor(a,e,t){this.router=a;this.activatedRoute=e;this.storage=t}saveRecommenderId(){let a=this.router.events.pipe(ri(e=>e instanceof bi)).subscribe(e=>{let t=this.activatedRoute.snapshot.queryParamMap.get("recommenderId");t&&this.storage.set(Me,t,{expires:new Date(Date.now()+1728e5).toUTCString()});let i=this.activatedRoute.snapshot.queryParamMap.get("sharerId");i&&this.storage.set(He,i,{expires:new Date(Date.now()+1728e5).toUTCString()});let o=this.activatedRoute.snapshot.queryParamMap.get("useNewCode");i&&this.storage.set(ke,o,{expires:new Date(Date.now()+1728e5).toUTCString()}),a.unsubscribe()})}setRecommenderId(a){this.storage.set(Me,a)}setIsUseNewShare(a){this.storage.set(ke,a)}getRecommenderId(){return this.storage.get(Me)||""}getSharerId(){return this.storage.get(He)||""}getIsUseNewShare(){return this.storage.get(ke)||""}static \u0275fac=function(e){return new(e||n)(Ae(wi),Ae(Be),Ae(bt))};static \u0275prov=ct({token:n,factory:n.\u0275fac,providedIn:"root"})};var jn=[[["","header",""]]],zn=["[header]"],Xi=()=>({value:!0});function qn(n,a){n&1&&(y(0,"div",30),D(1),E(2,"translate"),_()),n&2&&(m(),H(" ",T(2,1,"register-loot-box-tooltip")," "))}function Wn(n,a){if(n&1&&(y(0,"div",23)(1,"div",24),D(2),E(3,"translate"),_(),A(4,"ion-icon",25),y(5,"div",26),D(6),E(7,"translate"),_(),A(8,"ion-icon",27),y(9,"div",28),A(10,"ion-icon",29),_(),F(11,qn,3,3,"ng-template",null,3,Q),_()),n&2){let e=N(12),t=x();m(),R("active",t.step===t.RegisterStep.BIND_EMAIL_PHONE),m(),H(" ",T(3,7,"step-1")," "),m(3),R("active",t.step===t.RegisterStep.CREATE_USERNAME_PASSWORD),m(),H(" ",T(7,9,"step-2")," "),m(3),C("appTooltip",e)}}function Kn(n,a){if(n&1&&(y(0,"div",49),D(1),E(2,"translate"),_()),n&2){let e,t=x(2);m(),H(" ",T(2,1,(e=t.form.get("email"))!=null&&e.errors&&((e=t.form.get("email"))!=null&&e.errors.exists)?"register-email-already-exists":"register-email-error")," ")}}function Qn(n,a){if(n&1&&(y(0,"div",49),D(1),E(2,"translate"),_()),n&2){let e,t=x(2);m(),H(" ",T(2,1,(e=t.form.get("mobile"))!=null&&e.errors&&((e=t.form.get("mobile"))!=null&&e.errors.exists)?"register-phone-number-already-exists":"register-phone-number-invalid")," ")}}function Zn(n,a){if(n&1){let e=V();y(0,"button",50),O("click",function(){S(e);let i=x(2);return I(i.onGetCode("sms"))}),D(1),E(2,"translate"),_()}if(n&2){let e,t,i=a.ngLet,o=x(2);R("error-field",!((e=o.form.get("verifyCode"))!=null&&e.value)&&(((e=o.form.get("verifyCode"))==null?null:e.dirty)||((e=o.form.get("verifyCode"))==null?null:e.touched))),C("disabled",i>0||!((t=o.form.get("mobile"))!=null&&t.value)||((t=o.form.get("mobile"))==null?null:t.invalid)),m(),H(" ",i||T(2,4,"sms")," ")}}function Yn(n,a){if(n&1){let e=V();y(0,"button",50),O("click",function(){S(e);let i=x(2);return I(i.onGetCode("email"))}),D(1),E(2,"translate"),_()}if(n&2){let e,t,i=a.ngLet,o=x(2);R("error-field",!((e=o.form.get("verifyCode"))!=null&&e.value)&&(((e=o.form.get("verifyCode"))==null?null:e.dirty)||((e=o.form.get("verifyCode"))==null?null:e.touched))),C("disabled",i>0||!((t=o.form.get("email"))!=null&&t.value)||((t=o.form.get("email"))==null?null:t.invalid)),m(),H(" ",i||T(2,4,"email")," ")}}function Xn(n,a){if(n&1&&(y(0,"div",51),D(1),E(2,"translate"),_()),n&2){let e,t=x(2);m(),H(" ",T(2,1,(e=t.form.get("verifyCode"))!=null&&e.errors&&((e=t.form.get("verifyCode"))!=null&&e.errors.invalid)?"verification-code-incorrect":"register-verification-empty-error")," ")}}function Jn(n,a){n&1&&(y(0,"div",52),A(1,"span",53),_()),n&2&&C("@upHide",ve(1,Xi))}function eo(n,a){n&1&&(y(0,"span",54),D(1),E(2,"translate"),_()),n&2&&(C("@upHide",ve(4,Xi)),m(),H(" ",T(2,2,"next")," "))}function to(n,a){if(n&1&&(y(0,"div",55),D(1),E(2,"translate"),_()),n&2){let e=x(2);m(),Qt("",T(2,2,"inviter"),": ",e.form.get("newCode").value)}}function io(n,a){if(n&1&&(y(0,"span"),D(1),_()),n&2){let e=x(3);m(),W(e.flushingStatus==="success"?"Cleared!":"Clear Inviter")}}function no(n,a){n&1&&A(0,"app-loading-spinner",58)}function oo(n,a){if(n&1){let e=V();y(0,"button",56),O("click",function(){S(e);let i=x(2);return I(i.flushCookies())}),F(1,io,2,1,"span",57)(2,no,1,0,"ng-template",null,5,Q),_()}if(n&2){let e=N(3),t=x(2);m(),C("ngIf",t.flushingStatus!=="flushing")("ngIfElse",e)}}function ro(n,a){if(n&1){let e=V();y(0,"button",59),O("click",function(){S(e);let i=x(2);return I(i.skipStep())}),D(1," Skip Step "),_()}}function ao(n,a){if(n&1){let e=V();y(0,"div",31)(1,"div",32)(2,"div",33),A(3,"ion-input",34,4),E(5,"translate"),_(),F(6,Kn,3,3,"div",35),_(),y(7,"div",36)(8,"app-phone-control",37),E(9,"translate"),O("onSelectPhoneCountry",function(i){S(e);let o=x();return I(o.onSelectPhoneCountry(i))})("onPhoneNumberChange",function(i){S(e);let o=x();return I(o.onPhoneNumberChange(i))}),_(),F(10,Qn,3,3,"div",35),_(),y(11,"div",38)(12,"div",39),A(13,"ion-input",40),E(14,"translate"),F(15,Zn,3,6,"button",41),E(16,"async"),F(17,Yn,3,6,"button",41),E(18,"async"),_(),F(19,Xn,3,3,"div",42),_(),y(20,"button",43),O("click",function(){S(e);let i=x();return I(i.handleNext())}),F(21,Jn,2,2,"div",44)(22,eo,3,5,"span",45),_(),F(23,to,3,4,"div",46)(24,oo,4,2,"button",47)(25,ro,2,0,"button",48),_()}if(n&2){let e,t,i,o,l,c,M,d=x();C("hidden",d.step!==d.RegisterStep.BIND_EMAIL_PHONE)("formGroup",d.form),m(),C("ngClass",d.formAnimation),m(2),R("error-field",!((e=d.form.get("email"))!=null&&e.valid)&&(((e=d.form.get("email"))==null?null:e.dirty)||((e=d.form.get("email"))==null?null:e.touched))),C("placeholder",ye(T(5,27,"email"))),m(3),C("ngIf",((t=d.form.get("email"))==null?null:t.invalid)&&(((t=d.form.get("email"))==null?null:t.dirty)||((t=d.form.get("email"))==null?null:t.touched))),m(),C("ngClass",d.formAnimation),m(),R("error-field",!((i=d.form.get("mobile"))!=null&&i.valid)&&(((i=d.form.get("mobile"))==null?null:i.dirty)||((i=d.form.get("mobile"))==null?null:i.touched))),C("placeholder",T(9,29,"phone-number")),m(2),C("ngIf",((o=d.form.get("mobile"))==null?null:o.invalid)&&(((o=d.form.get("mobile"))==null?null:o.dirty)||((o=d.form.get("mobile"))==null?null:o.touched))),m(),C("ngClass",d.formAnimation),m(2),R("error-field",!((l=d.form.get("verifyCode"))!=null&&l.valid)&&(((l=d.form.get("verifyCode"))==null?null:l.dirty)||((l=d.form.get("verifyCode"))==null?null:l.touched))),C("placeholder",T(14,31,"verification-code-placeholder")),m(2),C("ngLet",T(16,33,d.userService.smsTimeRemaining$)),m(2),C("ngLet",T(18,35,d.userService.emailTimeRemaining$)),m(2),C("ngIf",((c=d.form.get("verifyCode"))==null?null:c.invalid)&&(((c=d.form.get("verifyCode"))==null?null:c.dirty)||((c=d.form.get("verifyCode"))==null?null:c.touched))),m(),R("disabled",!((M=d.form.get("email"))!=null&&M.value)&&!((M=d.form.get("mobile"))!=null&&M.value)||((M=d.form.get("verifyCode"))==null?null:M.invalid)||((M=d.form.get("email"))==null?null:M.invalid)||((M=d.form.get("mobile"))==null?null:M.invalid)),m(),C("ngIf",d.isLoading),m(),C("ngIf",!d.isLoading),m(),C("ngIf",d.hasRecommenderInURL),m(),C("ngIf",d.showHiddenOption&&d.hasRecommenderInURL),m(),C("ngIf",d.showHiddenOption)}}function so(n,a){if(n&1){let e=V();y(0,"div",68)(1,"div",69)(2,"span",70),Te(),y(3,"svg",71),A(4,"path",72),_()(),Kt(),y(5,"ion-input",73),E(6,"translate"),O("ionInput",function(i){S(e);let o=x(2);return I(o.handleInviteCodeChange(i))})("ionBlur",function(i){S(e);let o=x(2);return I(o.handleInviteCodeChange(i))}),y(7,"button",74),O("touchstart",function(i){S(e);let o=x(2);return I(o.openCamera(i))})("click",function(i){S(e);let o=x(2);return I(o.openCamera(i))}),A(8,"img",75),_()()()()}if(n&2){let e,t=x(2);C("ngClass",t.formAnimation),m(5),R("error-field",((e=t.form.get("newCode"))==null?null:e.invalid)&&(((e=t.form.get("newCode"))==null?null:e.dirty)||((e=t.form.get("newCode"))==null?null:e.touched))),C("placeholder",T(6,4,"enter-invitation-code"))}}function lo(n,a){if(n&1){let e=V();y(0,"div",68)(1,"div",69)(2,"span",70),Te(),y(3,"svg",71),A(4,"path",72),_()(),Kt(),y(5,"ion-input",76),E(6,"translate"),O("ionInput",function(i){S(e);let o=x(2);return I(o.handleInviteUsernameChange(i))})("ionBlur",function(i){S(e);let o=x(2);return I(o.handleInviteUsernameChange(i))}),_()()()}if(n&2){let e,t=x(2);C("ngClass",t.formAnimation),m(5),R("error-field",((e=t.form.get("recommenderId"))==null?null:e.invalid)&&(((e=t.form.get("recommenderId"))==null?null:e.dirty)||((e=t.form.get("recommenderId"))==null?null:e.touched))),C("placeholder",T(6,4,"enter-inviter-username"))}}function co(n,a){if(n&1){let e=V();y(0,"button",59),O("click",function(){S(e);let i=x(2);return I(i.skipStep())}),D(1," Skip Step "),_()}}function po(n,a){if(n&1){let e=V();y(0,"div",31)(1,"div",60)(2,"div",61,6)(4,"div",62)(5,"div",63,7)(7,"div",64),O("click",function(){S(e);let i=x();return I(i.handleInviteTabClick(0))}),D(8),E(9,"translate"),_(),y(10,"div",64),O("click",function(){S(e);let i=x();return I(i.handleInviteTabClick(1))}),D(11),E(12,"translate"),_()()()(),y(13,"div",65),F(14,so,9,6,"div",66)(15,lo,7,6,"div",66),_()(),y(16,"button",67),O("click",function(){S(e);let i=x();return I(i.handleNext())}),D(17),E(18,"translate"),_(),F(19,co,2,0,"button",48),_()}if(n&2){let e,t=x();C("hidden",t.step!==t.RegisterStep.ADD_INVITER)("formGroup",t.form),m(7),R("active",t.activeInviterTab===0),m(),H(" ",T(9,12,"invitation-code-tab")," "),m(2),R("active",t.activeInviterTab===1),m(),H(" ",T(12,14,"inviter-username-tab")," "),m(3),C("ngIf",t.activeInviterTab==0),m(),C("ngIf",t.activeInviterTab==1),m(2),H(" ",T(18,16,(e=t.form.get("useNewCode"))!=null&&e.value&&((e=t.form.get("newCode"))!=null&&e.value)||!((e=t.form.get("useNewCode"))!=null&&e.value)&&((e=t.form.get("recommenderId"))!=null&&e.value)?"next":"skip")," "),m(2),C("ngIf",t.showHiddenOption)}}function uo(n,a){if(n&1&&(y(0,"div",49),D(1),E(2,"translate"),_()),n&2){let e,t=x(2);m(),H(" ",T(2,1,(e=t.form.get("username"))!=null&&e.errors&&((e=t.form.get("username"))!=null&&e.errors.length)?"register-user-name-validation-symbols-number":"register-user-name-validation-symbols-types")," ")}}function mo(n,a){if(n&1&&(y(0,"div",49),D(1),E(2,"translate"),_()),n&2){let e,t=x(2);m(),H(" ",T(2,1,(e=t.form.get("password"))!=null&&e.errors&&((e=t.form.get("password"))!=null&&e.errors.length)?"register-password-validation-symbols-number":"register-password-validation-symbols-types")," ")}}function ho(n,a){n&1&&(y(0,"div",49),D(1),E(2,"translate"),_()),n&2&&(m(),H(" ",T(2,1,"register-passwords-not-match-error")," "))}function fo(n,a){if(n&1){let e=V();y(0,"button",59),O("click",function(){S(e);let i=x(2);return I(i.skipStep())}),D(1," Skip Step "),_()}}function go(n,a){if(n&1&&(y(0,"div",85),D(1),E(2,"translate"),_()),n&2){let e=x(2);m(),Qt("",T(2,2,"inviter"),": ",e.form.get("useNewCode").value?e.form.get("newCode").value:e.form.get("recommenderId").value)}}function yo(n,a){n&1&&A(0,"app-eye-open")}function vo(n,a){if(n&1){let e=V();y(0,"div",31)(1,"div",77)(2,"div",78),D(3),E(4,"translate"),_(),y(5,"div",33),A(6,"ion-input",79,8),E(8,"translate"),_(),F(9,uo,3,3,"div",35),_(),y(10,"div",80)(11,"div",78),D(12),E(13,"translate"),_(),y(14,"div",33),A(15,"ion-input",81,9),E(17,"translate"),y(18,"div",82,10),A(20,"app-eye-close"),_(),y(21,"div",82,11),A(23,"app-eye-open"),_()(),F(24,mo,3,3,"div",35),_(),y(25,"div",38)(26,"div",78),D(27),E(28,"translate"),_(),y(29,"div",33),A(30,"ion-input",83,12),E(32,"translate"),y(33,"div",82,13),A(35,"app-eye-close"),_(),y(36,"div",82,14),A(38,"app-eye-open"),_()(),F(39,ho,3,3,"div",35),_(),y(40,"button",43),O("click",function(){S(e);let i=x();return I(i.handleNext())}),D(41),E(42,"translate"),_(),F(43,fo,2,0,"button",48)(44,go,3,4,"div",84)(45,yo,1,0,"ng-template",null,15,Q),_()}if(n&2){let e,t,i,o,l,c,M,d,f,h,g=N(19),v=N(22),L=N(34),k=N(37),p=x();C("hidden",p.step!==p.RegisterStep.CREATE_USERNAME_PASSWORD)("formGroup",p.form),m(),C("ngClass",p.formAnimation),m(),R("error-label",((e=p.form.get("username"))==null?null:e.invalid)&&(((e=p.form.get("username"))==null?null:e.dirty)||((e=p.form.get("username"))==null?null:e.touched))),m(),W(T(4,40,"create-username")),m(3),R("error-field",((t=p.form.get("username"))==null?null:t.invalid)&&(((t=p.form.get("username"))==null?null:t.dirty)||((t=p.form.get("username"))==null?null:t.touched))),C("placeholder",ye(T(8,42,"username"))),m(3),C("ngIf",((i=p.form.get("username"))==null?null:i.invalid)&&(((i=p.form.get("username"))==null?null:i.dirty)||((i=p.form.get("username"))==null?null:i.touched))),m(),C("ngClass",p.formAnimation),m(),R("error-label",((o=p.form.get("password"))==null?null:o.invalid)&&(((o=p.form.get("password"))==null?null:o.dirty)||((o=p.form.get("password"))==null?null:o.touched))),m(),W(T(13,44,"create-password")),m(3),R("error-field",((l=p.form.get("password"))==null?null:l.invalid)&&(((l=p.form.get("password"))==null?null:l.dirty)||((l=p.form.get("password"))==null?null:l.touched))),C("placeholder",ye(T(17,46,"password")))("eyeClose",g)("eyeOpen",v)("clearOnEdit",!1),m(9),C("ngIf",((c=p.form.get("password"))==null?null:c.invalid)&&(((c=p.form.get("password"))==null?null:c.dirty)||((c=p.form.get("password"))==null?null:c.touched))),m(),C("ngClass",p.formAnimation),m(),R("error-label",((M=p.form.get("confirmPassword"))==null?null:M.invalid)&&(((M=p.form.get("confirmPassword"))==null?null:M.dirty)||((M=p.form.get("confirmPassword"))==null?null:M.touched))),m(),W(T(28,48,"confirm-password")),m(3),R("error-field",((d=p.form.get("confirmPassword"))==null?null:d.invalid)&&(((d=p.form.get("confirmPassword"))==null?null:d.dirty)||((d=p.form.get("confirmPassword"))==null?null:d.touched))),C("placeholder",ye(T(32,50,"confirm-password")))("eyeClose",L)("eyeOpen",k)("clearOnEdit",!1),m(9),C("ngIf",((f=p.form.get("confirmPassword"))==null?null:f.invalid)&&(((f=p.form.get("confirmPassword"))==null?null:f.dirty)||((f=p.form.get("confirmPassword"))==null?null:f.touched))),m(),R("disabled",p.form.invalid),m(),H(" ",T(42,52,"register-confirm")," "),m(2),C("ngIf",p.showHiddenOption),m(),C("ngIf",((h=p.form.get("useNewCode"))==null?null:h.value)&&((h=p.form.get("newCode"))==null?null:h.value)||!((h=p.form.get("useNewCode"))!=null&&h.value)&&((h=p.form.get("recommenderId"))==null?null:h.value))}}function _o(n,a){if(n&1){let e=V();y(0,"app-qr-scan-modal",86),O("onScanned",function(i){S(e);let o=x();return I(o.handleQrScanned(i))}),rt("isOpenChange",function(i){S(e);let o=x();return ot(o.isOpenQrScanModal,i)||(o.isOpenQrScanModal=i),I(i)}),_()}if(n&2){let e=x();nt("isOpen",e.isOpenQrScanModal)}}var jt=class n extends Se{constructor(e,t,i,o,l,c,M,d,f){super();this.activeRoute=e;this.fb=t;this.referralService=i;this.ngZone=o;this.storage=l;this.userService=c;this.animationCtrl=M;this.authService=d;this.themeService=f}onFinish=new Y;onFailed=new Y;form;hasRecommenderInURL=!1;step=1;flushingStatus;showHiddenOption=!1;showPassword=!1;showConfirmPassword=!1;isFailed=!1;isFormDirty=!1;isLoading=!1;isOpenCaptchaModal=!1;isOpenQrScanModal=!1;scaleInAnimation=Pt;AuthMode=Ne;RegisterStep=wt;type="register";formAnimation="fade-from-right";captchaType="sendSms";captchaVerifyCode=null;isRollerCoaster=!1;activeInviterTab=0;ngOnInit(){this.initForm(),this.isRollerCoaster=this.router.url.startsWith("/roller-coaster")}ngOnDestroy(){super.ngOnDestroy()}confirmationValidator=e=>{if(e.value){if(!Object.is(e.value,this.form.get("password")?.value))return{confirm:!0,error:!0}}else return{required:!0};return{}};initForm(){let e=this.activeRoute.snapshot.queryParams,t=e.recommenderId||this.referralService.getRecommenderId()||e.sharerId||this.referralService.getSharerId()||null;this.hasRecommenderInURL=!!t,console.log(t,this.hasRecommenderInURL),this.form=this.fb.group({username:[null,[et.userName]],password:[null,[et.password]],confirmPassword:[null,[le.required,this.confirmationValidator]],mobileArea:["+86"],mobile:[null],email:[null,et.email],verifyCode:[null,[le.required]],recommenderId:[null],useNewCode:[!0],newCode:[this.hasRecommenderInURL?t:null]}),console.log("formdata",this.form.getRawValue())}flushCookies(){G.isBrowser&&!this.flushingStatus&&(this.flushingStatus="flushing",ie(600).subscribe(()=>{this.storage.remove(Me),this.storage.remove(He),this.storage.remove(ke),this.storage.remove(Zt),this.flushingStatus="success",this.cdr.detectChanges(),this.form.get("recommenderId")?.setValue(null),this.form.get("recommenderId")?.enable(),this.hasRecommenderInURL=!1,this.cdr.detectChanges(),ie(1500).subscribe(()=>{this.flushingStatus="",this.cdr.detectChanges()})}))}registerHasFailed(){G.isBrowser&&(this.isFailed=!0,this.onFailed.emit(this.isFailed),this.cdr.detectChanges(),setTimeout(()=>{this.isFailed=!1,this.onFailed.emit(this.isFailed),this.cdr.detectChanges()},800))}openCamera(e){e.preventDefault(),e.stopPropagation(),this.isOpenQrScanModal=!0}handleQrScanned(e){try{let t=new URL(e.data),i=new URLSearchParams(t.search),o=i.get("sharerId")||i.get("recommenderId");this.isOpenQrScanModal=!1,o&&(this.form.get("newCode")?.setValue(o),this.form.get("useNewCode")?.setValue(!0)),this.cdr.detectChanges()}catch{}}skipStep(){switch(this.step){case 1:this.step=this.hasRecommenderInURL?3:2;break;case 2:this.step=3;break;case 3:this.onFinish.emit(),this.userService.bypassLogin(),this.ngZone.run(()=>{this.router.navigateByUrl("/blank",{skipLocationChange:!0}).then(()=>{this.router.navigateByUrl("/")})});break}}handleBack(){switch(this.formAnimation="fade-from-left",this.step){case 1:this.userService.authMode="login";break;case 2:this.step=1;break;case 3:this.step=this.hasRecommenderInURL?1:2;break}}async handleNext(){if(!this.isLoading)switch(this.step){case 1:this.isLoading=!0;let e=await this.validateBidEmailPhoneStep();if(this.isLoading=!1,this.formAnimation="fade-from-right",!e)return;this.step=this.hasRecommenderInURL?3:2;break;case 2:this.formAnimation="fade-from-right",this.step=3;break;case 3:if(!this.form.valid){this.markAsDirty(),this.registerHasFailed();return}this.submit();break}}async validateBidEmailPhoneStep(){let e=this.form.getRawValue();if(!e.email&&!e.mobile||this.form.get("verifyCode")?.invalid||this.form.get("email")?.invalid||this.form.get("mobile")?.invalid)return this.markAsDirty(),this.registerHasFailed(),!1;let t=!0;if(e.email&&this.captchaVerifyCode&&(await Re(this.authService.checkEmailValidity(e.email,this.captchaVerifyCode)))?.data?.isRegistered&&(this.form.get("email")?.setErrors({exists:!0}),t=!1),e.mobile&&this.captchaVerifyCode&&(await Re(this.authService.checkMobileValidity({mobile:e.mobile,mobileArea:e.mobileArea},this.captchaVerifyCode)))?.data?.isRegistered&&(this.form.get("mobile")?.setErrors({exists:!0}),t=!1),e.verifyCode){let i=this.captchaType==="sendEmail"?this.authService.checkEmailCodeValidity({address:e.email,emailCode:e.verifyCode,type:"register"}):this.authService.checkSMSCodeValidity({mobile:e.mobile,mobileArea:e.mobileArea,smsCode:e.verifyCode,method:"register"});(await Re(i)).code!=0&&(this.form.get("verifyCode")?.setErrors({invalid:!0}),t=!1)}return t}markAsDirty(){Object.values(this.form.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}submit(){let e=this.form.getRawValue(),t={mobileArea:e.mobileArea,mobile:e.mobile?e.mobile.toString():null,email:e.email?e.email:null,verifyCode:e.verifyCode.toString().trim(),username:e.username.trim(),password:(0,Yi.default)(this.form.value.password).toString(),type:this.type,recommenderId:!e.useNewCode&&e.recommenderId?e.recommenderId:null,useNewCode:e.useNewCode&&e.newCode?!0:!e.useNewCode&&e.recommenderId?!1:null,newCode:e.useNewCode&&e.newCode?e.newCode?.toString():null,source:G.isApp?"app":"web"};this.authService.register(t).pipe(de(this.onDestroy$),ai(()=>ni(null))).subscribe(i=>{if(i?.body?.code!==0){i?.body?.code===1001013&&(this.form.patchValue({useNewCode:!1,recommenderId:"",newCode:""}),this.flushCookies()),this.toast.toastError(i?.body.i18nKey||i?.body?.message);return}this.toast.toastSuccess(this.i18n.instant("registration-success")),this.handleAutoLogin(i),this.storage.remove(Me),this.storage.remove(He),this.storage.remove(ke),this.storage.remove(Zt)})}async handleAutoLogin(e){if(!e.headers.get("token")){this.router.navigateByUrl("/login").then(()=>{this.onFinish.emit()});return}G.isBrowser&&await se(ie(300)),this.userService.setToken(e.headers.get("token")),G.isBrowser&&await se(ie(10)),this.userService.updateUserInfo(),this.onFinish.emit(),G.isBrowser&&await se(ie(200)),this.ngZone.run(()=>{this.router.navigateByUrl("/blank",{skipLocationChange:!0}).then(()=>{this.router.navigateByUrl("/")})})}onSelectPhoneCountry(e){e&&this.form.get("mobileArea")?.patchValue(e)}onPhoneNumberChange(e){this.form.get("mobile")?.markAsTouched(),this.form.get("mobile")?.patchValue(e)}onGetCode(e){switch(this.type=e,e){case"sms":this.captchaType="sendSms";break;case"email":this.captchaType="sendEmail";break}this.isOpenCaptchaModal=!0}onCaptchaSuccess(e){switch(this.type){case"email":return this.getEmailCode(e);case"sms":return this.getSmsCode(e)}}getSmsCode(e){let{mobile:t,mobileArea:i}=this.form.value;this.authService.sendSMSVerifyCode({method:"register",mobileArea:i||"+86",mobile:t.toString()},e).pipe(de(this.onDestroy$)).subscribe(o=>{if(o.code===7001012){this.form.get("mobile")?.setErrors({exists:!0});return}if(o.code===8){this.form.get("mobile")?.setErrors({invalid:!0});return}if(o.code!==0){this.toast.toastError(o.i18nKey||o.message);return}this.captchaVerifyCode=e,this.userService.startVerificationTimer("sms",60,!0),this.toast.toastSuccess(this.i18n.instant("verify-code-sent")),this.type="sms"})}getEmailCode(e){this.authService.sendEmailVerifyCode({email:this.form.value.email,type:"register"},e).subscribe(t=>{if(t.code===1001006){this.form.get("email")?.setErrors({exists:!0});return}if(t.code!==0){this.toast.toastError(t.i18nKey||t.message);return}this.captchaVerifyCode=e,this.userService.startVerificationTimer("email",60,!0),this.toast.toastSuccess(this.i18n.instant("verify-code-sent")),this.type="email"})}handleInviteCodeChange(e){this.form.patchValue({newCode:e.target.value.replace(/[^a-zA-Z0-9]/g,"")})}handleInviteUsernameChange(e){this.form.patchValue({recommenderId:e.target.value.replace(/[^a-zA-Z0-9]/g,"")})}handleInviteTabClick(e){this.activeInviterTab=e,this.form.patchValue({useNewCode:e==0}),console.log(this.form.value)}static \u0275fac=function(t){return new(t||n)(B(Be),B(We),B(Gt),B(Ve),B(bt),B(Ue),B(xe),B(Ee),B(Di))};static \u0275cmp=K({type:n,selectors:[["app-register-form"]],outputs:{onFinish:"onFinish",onFailed:"onFailed"},features:[ne],ngContentSelectors:zn,decls:16,vars:9,consts:[["bindEmailPhoneStep",""],["addInviterStep",""],["createUsernamePasswordStep",""],["lootboxTooltip",""],["email",""],["flushing",""],["tabContainer",""],["tabScroll",""],["username",""],["password",""],["eyeClose",""],["eyeOpen",""],["confirmPassword",""],["eyeCloseConfirm",""],["eyeOpenConfirm",""],["hiddenPassword",""],["visibility","hover",3,"autoHeightDisabled"],[1,"auth-form","py-6","flex","flex-col","items-start","justify-center","h-full","relative"],["class","w-full flex items-center justify-between text-xl leading-relaxed font-medium mb-5",4,"ngIf"],[1,"w-full","mb-1.5"],[3,"ngTemplateOutlet"],[3,"isOpen","onScanned","isOpenChange",4,"isBrowser"],[3,"isOpenChange","onSuccess","captchaType","isOpen"],[1,"w-full","flex","items-center","justify-between","text-xl","leading-relaxed","font-medium","mb-5"],[1,"tab-item","justify-center","text-center","py-2","px-1","3xs:px-3","sm:px-5","flex","items-center","fade-in",2,"--delay","100ms"],["name","chevron-forward-outline",1,"text-white","fade-in",2,"--delay","130ms"],[1,"tab-item","justify-center","text-center","py-2","px-1","3xs:px-3","sm:px-5","flex","items-center","fade-in",2,"--delay","160ms"],["name","chevron-forward-outline",1,"text-white","fade-in",2,"--delay","190ms"],[1,"tab-item","relative","justify-center","text-center","py-2","px-1","3xs:px-3","sm:px-5","flex","items-center","fade-in",2,"--delay","220ms",3,"appTooltip"],["name","checkmark-circle-outline",1,"h-16","w-16","text-main-blue"],[1,"p-2"],[1,"w-full",3,"hidden","formGroup"],[1,"mb-8",2,"--delay","100ms",3,"ngClass"],[1,"flex","items-center","mb-4","relative"],["formControlName","email","type","text",1,"w-full","bg-white","rounded-md",3,"placeholder"],["class","text-main-red -mt-3 mb-1.5 ml-px text-sm",4,"ngIf"],[1,"relative","z-1","mb-8",2,"--delay","200ms",3,"ngClass"],[1,"block","w-full","mb-4",3,"onSelectPhoneCountry","onPhoneNumberChange","placeholder"],[2,"--delay","300ms",3,"ngClass"],[1,"flex","items-center","gap-2","mb-6"],["type","string","formControlName","verifyCode",1,"flex-1","bg-white","rounded-md",3,"placeholder"],["class","verification-btn theme-btn whitespace-nowrap text-lg bg-main-yellow text-black h-12 min-w-20 hover:shadow-md rounded-md px-2 py-1 border border-solid font-bold","type","button",3,"disabled","error-field","click",4,"ngLet"],["class","text-main-red -mt-5 mb-1.5 ml-px text-sm",4,"ngIf"],["type","submit",1,"auth-btn","theme-btn","border","border-solid","border-transparent","bg-dark-purple","text-white","w-full","text-2xl","rounded-md","font-medium","relative","hover:bg-primary-color","fade-in","mt-2",2,"--delay","350ms",3,"click"],["class","absolute block left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",4,"ngIf"],["class","absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",4,"ngIf"],["class","text-gray-5 font-medium text-sm text-right -mb-3 mt-1 capitalize",4,"ngIf"],["class","flex border-2 rounded-lg bg-green-700 text-white font-medium border-solid border-blue-400 px-4 py-2 text-lg w-full mt-2 mb-3 justify-center",3,"click",4,"ngIf"],["class","flex border-2 rounded-lg bg-green-700 text-white font-medium border-solid border-blue-400 px-4 py-3 text-lg w-full mt-2 -mb-2 justify-center",3,"click",4,"ngIf"],[1,"text-main-red","-mt-3","mb-1.5","ml-px","text-sm"],["type","button",1,"verification-btn","theme-btn","whitespace-nowrap","text-lg","bg-main-yellow","text-black","h-12","min-w-20","hover:shadow-md","rounded-md","px-2","py-1","border","border-solid","font-bold",3,"click","disabled"],[1,"text-main-red","-mt-5","mb-1.5","ml-px","text-sm"],[1,"absolute","block","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"spinner"],[1,"absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"text-gray-5","font-medium","text-sm","text-right","-mb-3","mt-1","capitalize"],[1,"flex","border-2","rounded-lg","bg-green-700","text-white","font-medium","border-solid","border-blue-400","px-4","py-2","text-lg","w-full","mt-2","mb-3","justify-center",3,"click"],[4,"ngIf","ngIfElse"],[1,"text-gray-3","mx-auto","block","mt-0.5","pt-px","mb-2.5","h-4"],[1,"flex","border-2","rounded-lg","bg-green-700","text-white","font-medium","border-solid","border-blue-400","px-4","py-3","text-lg","w-full","mt-2","-mb-2","justify-center",3,"click"],[1,"flex","flex-col","h-full"],[1,"w-full","ribbon","sticky","rounded-t-md"],[1,"whitespace-nowrap","!px-0","flex"],["appHorizontalScroll","",1,"flex","w-full","relative","flex-1","justify-center"],[1,"inviter-tab-item","w-full",3,"click"],[1,"flex-1","block","h-full","mt-2","pt-2.5","rounded-b-lg","overflow-hidden"],["class","w-full","style","--delay: 100ms",3,"ngClass",4,"ngIf"],["type","submit",1,"auth-btn","theme-btn","border","border-solid","border-transparent","bg-dark-purple","text-white","w-full","text-2xl","rounded-md","font-medium","relative","hover:bg-primary-color","fade-in","mt-1",2,"--delay","200ms",3,"click"],[1,"w-full",2,"--delay","100ms",3,"ngClass"],[1,"flex","items-center","gap-2","mb-6","relative"],[1,"icon-wrapper","flex","items-center","absolute","z-10","left-2.5"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","share-alt","aria-hidden","true"],["d","M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"],["formControlName","newCode","maxlength","20",1,"icon-input","flex-1","bg-white","rounded-md","text-left",3,"ionInput","ionBlur","placeholder"],["fill","clear","slot","end","aria-label","Show/hide",1,"absolute","right-0.5","rounded-sm","p-1","z-50","!pointer-events-auto","hover:bg-black/10","md:hidden",3,"touchstart","click"],["src","/assets/svgs/qr-icon.svg","alt","",1,"h-8"],["formControlName","recommenderId","maxlength","20",1,"icon-input","flex-1","border-2","bg-white","rounded-md","text-left",3,"ionInput","ionBlur","placeholder"],[2,"--delay","100ms",3,"ngClass"],[1,"text-lg","font-bold","text-gray-6"],["formControlName","username","type","text",1,"w-full","border-2","bg-white","rounded-md",3,"placeholder"],[2,"--delay","200ms",3,"ngClass"],["appPasswordToggle","","type","password","formControlName","password",1,"w-full","bg-white","rounded-md",3,"eyeClose","eyeOpen","clearOnEdit","placeholder"],[1,"cursor-pointer","w-7","h-7","flex","justify-center","items-center","z-10","absolute","right-2","top-1/2","transform","-translate-y-1/2","text-gray-4"],["appPasswordToggle","","type","password","formControlName","confirmPassword",1,"w-full","bg-white","rounded-md",3,"eyeClose","eyeOpen","clearOnEdit","placeholder"],["class","text-gray-5 font-medium text-sm text-right -mb-4 mt-2 capitalize fade-in","style","--delay: 350ms",4,"ngIf"],[1,"text-gray-5","font-medium","text-sm","text-right","-mb-4","mt-2","capitalize","fade-in",2,"--delay","350ms"],[3,"onScanned","isOpenChange","isOpen"]],template:function(t,i){if(t&1){let o=V();yt(jn),vt(0),y(1,"ng-scrollbar",16)(2,"div",17),F(3,Wn,13,11,"div",18),y(4,"form",19),pe(5,20)(6,20)(7,20),_()()(),F(8,ao,26,37,"ng-template",null,0,Q)(10,po,20,18,"ng-template",null,1,Q)(12,vo,47,54,"ng-template",null,2,Q)(14,_o,1,1,"app-qr-scan-modal",21),y(15,"app-captcha-modal",22),rt("isOpenChange",function(c){return S(o),ot(i.isOpenCaptchaModal,c)||(i.isOpenCaptchaModal=c),I(c)}),O("onSuccess",function(c){return S(o),I(i.onCaptchaSuccess(c))}),_()}if(t&2){let o=N(9),l=N(11),c=N(13);m(),C("autoHeightDisabled",!1),m(),R("failed",i.isFailed),m(),C("ngIf",i.step!==i.RegisterStep.ADD_INVITER),m(2),C("ngTemplateOutlet",o),m(),C("ngTemplateOutlet",l),m(),C("ngTemplateOutlet",c),m(8),C("captchaType",i.captchaType),nt("isOpen",i.isOpenCaptchaModal)}},dependencies:[we,Z,_t,_e,Ce,ee,je,$e,Ge,xt,Si,J,oe,Je,be,ze,qe,$t,Ye,Lt,Le,Ke,Ot,Ie,kt,Mt,Dt,Oe,Ct,he],styles:['ng-scrollbar[_ngcontent-%COMP%]{max-height:85vh}ion-input[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--highlight-color-focused: var(--strong);--highlight-color-valid: var(--strong);font-weight:500;box-shadow:0 10px 15px -3px #0000000d,0 4px 6px -2px #00000008}ion-input.icon-input[_ngcontent-%COMP%]{--padding-start: 22px}ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-inner-spin-button, ion-input[_ngcontent-%COMP%]     input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}ion-input[_ngcontent-%COMP%]     input{font-size:14px!important;height:100%;padding:0 12px!important}@media (min-width: 340px){ion-input[_ngcontent-%COMP%]     input{font-size:18px!important}}ion-input[_ngcontent-%COMP%]     input:-webkit-autofill, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     input:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     textarea:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]     select:-webkit-autofill:focus{border:0;filter:none;-webkit-text-fill-color:var(--strong);-webkit-box-shadow:0 0 0px 1000px var(--panel-3) inset;transition:background-color 50000s ease-in-out 0s}ion-input[_ngcontent-%COMP%]     .input-highlight{display:none}ion-input.icon-input[_ngcontent-%COMP%]     input{padding-right:42px!important}app-eye-close[_ngcontent-%COMP%], app-eye-open[_ngcontent-%COMP%]{display:block;width:1rem}.auth-btn[_ngcontent-%COMP%]{height:55px;box-shadow:0 10px 15px -3px #00000020,0 4px 6px -2px #00000008;text-shadow:2px 3px 6px rgba(0,0,0,.1);transition:all .26s ease-out}.auth-btn.success[_ngcontent-%COMP%]{background:#03bf3f;border:1px solid #7befa2}.auth-btn.success[_ngcontent-%COMP%]:hover{background:#03bf3f}.auth-btn.failed[_ngcontent-%COMP%]{background-color:red;border-color:red;color:#fff;opacity:1}.auth-btn.failed[_ngcontent-%COMP%]:hover{background-color:red}.auth-btn.disabled[_ngcontent-%COMP%]{cursor:not-allowed;box-shadow:none;text-shadow:none}.auth-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;margin:0 8px;border-radius:50%;width:1.5em;height:1.5em;border:.215em solid transparent;vertical-align:middle;font-size:16px;border-top-color:#fff;filter:drop-shadow(2px 3px 6px rgba(0,0,0,.1));animation:loader-2-2 1s cubic-bezier(.55,.15,.45,.85) infinite}.auth-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(2px 3px 6px rgba(0,0,0,.1))}auth-form.failed[_ngcontent-%COMP%]   .auth-btn[_ngcontent-%COMP%]{transition-delay:0;transition:none;background-color:red;border-color:red;color:#fff;opacity:1}.verification-btn[_ngcontent-%COMP%]{border-color:#d9b500}.verification-btn[_ngcontent-%COMP%]:disabled{box-shadow:none}.tab-item[_ngcontent-%COMP%]{color:#fff;border-radius:.375rem}.tab-item.active[_ngcontent-%COMP%]{position:relative;--tw-bg-opacity: 1;background-color:rgb(var(--main-blue) / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.error-label[_ngcontent-%COMP%]{color:red}.floating[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 7px var(--main-yellow));animation:floating 3s ease-in-out infinite;--distance: -5px}app-spinning-radial[_ngcontent-%COMP%]{filter:invert(1) opacity(.05)}.inviter-tab-item[_ngcontent-%COMP%]{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-top-left-radius:.375rem;border-top-right-radius:.375rem;padding:.5rem .25rem;text-align:center;font-size:.875rem;line-height:1.25rem;font-weight:500}@media (min-width: 340px){.inviter-tab-item[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem;font-size:1rem;line-height:1.5rem}}@media (min-width: 768px){.inviter-tab-item[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}}.inviter-tab-item[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(var(--main-blue) / var(--tw-text-opacity, 1))}.inviter-tab-item.active[_ngcontent-%COMP%]{position:relative;background-color:rgb(var(--main-blue) / .1);--tw-text-opacity: 1;color:rgb(var(--main-blue) / var(--tw-text-opacity, 1))}.inviter-tab-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;height:3px;left:0;bottom:0;width:100%;right:0;--tw-bg-opacity: 1;background-color:rgb(var(--main-blue) / var(--tw-bg-opacity, 1))}ion-input[_ngcontent-%COMP%]{color:#000;--strong: 0, 0, 0;--contrast-strong: 255, 255, 255}app-phone-control[_ngcontent-%COMP%]{color:#000}app-phone-control[_ngcontent-%COMP%]     input{color:#000}'],data:{animation:[Qe]}})};var Co=["modal"],bo=n=>({disabled:n});function wo(n,a){if(n&1){let e=V();y(0,"app-login-form",6,2),O("onFailed",function(i){S(e);let o=x(2);return I(o.isFailed=i)})("onFinish",function(){S(e);let i=x(2);return I(i.onFinish())}),y(2,"div",7)(3,"div",8),D(4),E(5,"translate"),_(),pe(6,9),_()()}if(n&2){let e=N(1);x(2);let t=N(4);m(4),H(" ",T(5,3,"login")," "),m(2),C("ngTemplateOutletContext",fe(5,bo,e.progress!=="Inputing"))("ngTemplateOutlet",t)}}function xo(n,a){if(n&1&&pe(0,13),n&2){x(3);let e=N(4);C("ngTemplateOutlet",e)}}function So(n,a){if(n&1){let e=V();y(0,"app-register-form",6,3),O("onFailed",function(i){S(e);let o=x(2);return I(o.isFailed=i)})("onFinish",function(){S(e);let i=x(2);return I(i.onFinish())}),y(2,"div",7)(3,"div",10)(4,"ion-icon",11),O("click",function(){S(e);let i=N(1);return I(i.handleBack())}),_(),y(5,"div",12),D(6),E(7,"translate"),_()(),mt(8,xo,1,1,"ng-container",13),_()()}if(n&2){let e=N(1),t=x(2);m(6),W(T(7,2,e.step===t.RegisterStep.ADD_INVITER?"enter-inviter-information":"register")),m(2),ht(e.step===t.RegisterStep.BIND_EMAIL_PHONE?8:-1)}}function Io(n,a){if(n&1&&(y(0,"div",5),mt(1,wo,7,7,"app-login-form"),mt(2,So,9,4,"app-register-form"),_()),n&2){let e=x();R("failed",e.isFailed),m(),ht(e.userService.authMode===e.AuthMode.LOGIN?1:-1),m(),ht(e.userService.authMode===e.AuthMode.REGISTER?2:-1)}}function Eo(n,a){if(n&1){let e=V();y(0,"ion-icon",14),O("click",function(){let i=S(e).disabled;x();let o=N(1);return I(!i&&o.dismiss())}),_()}}var Ji=class n extends Se{constructor(e,t){super();this.animationCtrl=e;this.userService=t}modalElementRef;mode="login";scaleInAnimation=Pt;AuthMode=Ne;RegisterStep=wt;isFailed=!1;ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}handlePresent(){Ri({AliyunCaptcha:"https://o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js"})}onFinish(){this.modalRef.dismiss()}handleDismiss(){this.isOpenChange.emit(!1)}handleDidPresent(){console.log(this.modalElementRef.nativeElement.shadowRoot);let e=this.modalElementRef.nativeElement.shadowRoot,t=this.modalElementRef.nativeElement.shadowRoot;if(!t)return;let i=t.querySelector('[part="content"]');if(!i)return;i.classList.add("glass-container");let o=document.createElement("template");o.innerHTML=`
  <div class="glass-container" part="glass-container">
    <div class="glass-filter" part="glass-filter"></div>
    <div class="glass-overlay" part="glass-overlay"></div>
    <div class="glass-specular" part="glass-specular"></div>
    <svg style="display: none">
      <filter id="abcd" x="0%" y="0%" width="100%" height="100%">
        <feTurbulence type="fractalNoise" baseFrequency="0.008 0.008" numOctaves="2" seed="92" result="noise"></feTurbulence>
        <feGaussianBlur in="noise" stdDeviation="2" result="blurred"></feGaussianBlur>
        <feDisplacementMap in="SourceGraphic" in2="blurred" scale="70" xChannelSelector="R" yChannelSelector="G"></feDisplacementMap>
      </filter>
    </svg>
    </div>
  `,i.appendChild(o.content.cloneNode(!0))}static \u0275fac=function(t){return new(t||n)(B(xe),B(Ue))};static \u0275cmp=K({type:n,selectors:[["app-auth-modal"]],viewQuery:function(t,i){if(t&1&&ge(Co,7,Fe),t&2){let o;ue(o=me())&&(i.modalElementRef=o.first)}},inputs:{mode:"mode"},features:[ne],decls:5,vars:3,consts:[["modal",""],["closeBtn",""],["loginForm",""],["registerForm",""],[1,"glass-modal","px-2",3,"willPresent","didDismiss","isOpen","enterAnimation","backdropDismiss"],[1,"modal-content","3xs:px-4","px-8"],[3,"onFailed","onFinish"],["header","",1,"modal-header"],[1,"modal-title","text-2xl","md:text-4xl","flex","justify-center","font-bold","pt-3","md:pt-4","fade-in",2,"--delay","100ms"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[1,"modal-title","text-2xl","md:text-4xl","flex","justify-center","font-bold","pt-3","md:pt-4"],["name","chevron-back-outline",1,"h-10","w-10","block","absolute","left-2","cursor-pointer","z-10",3,"click"],[1,"fade-in",2,"--delay","100ms"],[3,"ngTemplateOutlet"],["name","close-outline",1,"modal-close-btn","rounded-md","w-10","xs:w-10","h-10","xs:h-10","absolute","-right-2","-top-3","3xs:-right-3",3,"click"]],template:function(t,i){if(t&1){let o=V();y(0,"ion-modal",4,0),O("willPresent",function(){return S(o),I(i.handlePresent())})("didDismiss",function(){return S(o),I(i.handleDismiss())}),F(2,Io,3,4,"ng-template"),_(),F(3,Eo,1,0,"ng-template",null,1,Q)}t&2&&C("isOpen",i.isOpen)("enterAnimation",i.scaleInAnimation.bind(i,i.modalElementRef.nativeElement,i.animationCtrl))("backdropDismiss",i.userService.authMode===i.AuthMode.LOGIN)},dependencies:[we,St,Z,Ce,ee,J,oe,jt,Bt,he],styles:["ion-modal[_ngcontent-%COMP%]{--width: 400px;--height: auto}.modal-content.failed[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_angry-shake .4s}@keyframes _ngcontent-%COMP%_angry-shake{0%{transform:translate(4px,1px) rotate(0)}10%{transform:translate(-1px,-4px) rotate(-1deg)}20%{transform:translate(-6px) rotate(1deg)}30%{transform:translateY(4px) rotate(0)}40%{transform:translate(2px,-2px) rotate(1deg)}50%{transform:translate(-2px,4px) rotate(-1deg)}60%{transform:translate(-6px,2px) rotate(0)}70%{transform:translate(4px,2px) rotate(-1deg)}80%{transform:translate(-2px,-2px) rotate(1deg)}90%{transform:translate(4px,4px) rotate(0)}to{transform:translate(2px,-4px) rotate(-1deg)}}"],data:{animation:[Li,Pi,Qe]}})};export{Ji as AuthModalComponent};
