import{Uk as rt,Vk as un,Wk as ln}from"./chunk-FYIDI77X.js";import{a as Ie,b as M,c as et,d as q,e as ce,f as an,g as tt,h as be,i as Oe,j as cn,k as W,l as nt}from"./chunk-6Q6YHIRJ.js";import"./chunk-HZXAA3YK.js";import"./chunk-S6KP2GBQ.js";import"./chunk-O63J7XX2.js";import{b as xe,c as Je,e as on}from"./chunk-54F7A7GG.js";import"./chunk-LSDUHFNV.js";import{b as z,e as Le,f as tn,g as nn,h as rn,i as sn}from"./chunk-WCPZFELE.js";import{E as Jt,G as en,R as Ne,a as qt,b as jt,c as Vt,d as Zt,h as Me,i as Yt,t as Xt,y as Qt}from"./chunk-AJGGPJRP.js";import{b as O,i as $t,k as Qe}from"./chunk-3MOYO27G.js";import"./chunk-UXCDS6QA.js";import"./chunk-7D3XAEE7.js";import"./chunk-CG2EMPLA.js";import"./chunk-CTLUDKZB.js";import"./chunk-GSTDJRCA.js";import"./chunk-YVA7YSBN.js";import"./chunk-3WGOZNFF.js";import{a as ae,b as Xe,g as Ln,j as pe}from"./chunk-QGXACWGO.js";var mn=Ln(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});var dt;function kn(t){{let e=Buffer.from(t);e.reverse();let r=e.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return dt.toBigInt(t,!1)}_e.toBigIntLE=kn;function Wn(t){{let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return dt.toBigInt(t,!0)}_e.toBigIntBE=Wn;function Fn(t,e){{let r=t.toString(16),o=Buffer.from(r.padStart(e*2,"0").slice(0,e*2),"hex");return o.reverse(),o}return dt.fromBigInt(t,Buffer.allocUnsafe(e),!1)}_e.toBufferLE=Fn;function Gn(t,e){{let r=t.toString(16);return Buffer.from(r.padStart(e*2,"0").slice(0,e*2),"hex")}return dt.fromBigInt(t,Buffer.allocUnsafe(e),!0)}_e.toBufferBE=Gn});var cr={detectRpcUrl(t,e){return t.rpcUrls.default.http[0]?.includes(new URL(O.BLOCKCHAIN_API_RPC_URL).hostname)?`${t.rpcUrls.default.http[0]}?chainId=solana:${t.id}&projectId=${e}`:t.rpcUrls.default.http[0]},getChain(t,e){let r=t.find(o=>o.id===e);return r||W.DEFAULT_CHAIN},hexStringToNumber(t){let e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},getAddress(t){return t.publicKey?.toBase58()}};var Pe=class extends Error{constructor(e,r){super(e),this.error=r}};var it=class extends Pe{constructor(){super(...arguments),this.name="WalletAccountError"}};var st=class extends Pe{constructor(){super(...arguments),this.name="WalletSendTransactionError"}},ze=class extends Pe{constructor(){super(...arguments),this.name="WalletSignTransactionError"}},ot=class extends Pe{constructor(){super(...arguments),this.name="WalletSignMessageError"}};function ne(t){return"version"in t}var at="solana:signAndSendTransaction";var fn="solana:signMessage";var ke="solana:signTransaction";var ct="standard:connect";var dn="standard:disconnect";var ut="standard:events";function hn(t){return ct in t.features&&ut in t.features&&(at in t.features||ke in t.features)}function pn(t){if(typeof t=="string")return`solana:${t}`}var re=class{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,r){this.listeners[e].push(r)}removeListener(e,r){this.listeners[e]=this.listeners[e].filter(o=>o!==r)}emit(e,r){this.listeners[e].forEach(o=>o(r))}};var lt=class extends re{constructor(e){super(),this.id=O.CONNECTOR_ID.AUTH,this.name=O.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=O.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){let e=Ne.state.chains.get(O.CHAIN.SOLANA)?.accountState?.address;return e?new M(e):void 0}get chains(){let e=this.provider.getAvailableChainIds();return this.requestedChains.filter(r=>e.includes(r.caipNetworkId))}async connect(e={}){let r=e.chainId||this.getActiveChain()?.id,o=en("solana");if(await nn.authConnectorAuthenticate({authConnector:this.provider,chainId:pn(r),socialUri:e.socialUri,preferredAccountType:o,chainNamespace:O.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");let r=await this.provider.request({method:"solana_signMessage",params:{message:z.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return z.decode(r.signature)}async signTransaction(e){let r=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),o=z.decode(r.transaction);return ne(e)?ce.deserialize(o):q.from(o)}async signAndSendTransaction(e,r){let o=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:o,options:r},chainNamespace:this.chain})).signature}async sendTransaction(e,r,o){let a=await this.signTransaction(e);return await r.sendRawTransaction(a.serialize(),o)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(o=>this.serializeTransaction(o))},chainNamespace:this.chain})).transactions.map((o,a)=>{let g=e[a];if(!g)throw new Error("Invalid solana_signAllTransactions response");let C=z.decode(o);return ne(g)?ce.deserialize(C):q.from(C)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return z.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}};var ft=class extends re{constructor(e){super(),this.name="Coinbase Wallet",this.id=xe.ConnectorExplorerIds[O.CONNECTOR_ID.COINBASE_SDK]||this.name,this.explorerId=xe.ConnectorExplorerIds[O.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=O.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===rt.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return xe.ConnectorImageIds[O.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();let e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),new Qe(e)}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,r){return(await this.coinbase.signAndSendTransaction(e,r)).signature}async sendTransaction(e,r,o){let a=await this.signTransaction(e);return await r.sendRawTransaction(a.serialize(),o)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){let e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){let r=this.coinbase.publicKey;if(e&&!r)throw new Error("Not connected");return r}};var We=class extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}},Fe=class extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}};var zn=function(t,e,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(t):o?o.value:e.get(t)},bt,Ge=class extends rn{constructor({provider:e,chains:r,getActiveChain:o}){super({caipNetworks:r,namespace:"solana",provider:e}),this.eventEmitter=new re,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),bt.set(this,"1.0.0"),this.getActiveChain=o}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let r=e;return r===W.CHAIN_IDS.Deprecated_Mainnet?r=W.CHAIN_IDS.Mainnet:r===W.CHAIN_IDS.Deprecated_Devnet&&(r=W.CHAIN_IDS.Devnet),this.caipNetworks.find(o=>o.caipNetworkId===r)}).filter(Boolean)}get icon(){return Qt.state.connectorImages[this.id]}get version(){return zn(this,bt,"f")}get publicKey(){let e=this.getAccount(!1);if(e)return new M(e.publicKey)}async connect(){await super.connectWalletConnect();let e=this.getAccount(!0);return this.emit("connect",new M(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");let r=await this.internalRequest("solana_signMessage",{message:z.encode(e),pubkey:this.getAccount(!0).address});return z.decode(r.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");let r=this.serializeTransaction(e),o=await this.internalRequest("solana_signTransaction",ae({transaction:r,pubkey:this.getAccount(!0).address},this.getRawRPCParams(e)));if("signature"in o){let g=z.decode(o.signature);return e.addSignature(new M(this.getAccount(!0).publicKey),Buffer.from(g)),e}let a=Buffer.from(o.transaction,"base64");return ne(e)?ce.deserialize(new Uint8Array(a)):q.from(a)}async signAndSendTransaction(e,r){this.checkIfMethodIsSupported("solana_signAndSendTransaction");let o=this.serializeTransaction(e),a=await this.internalRequest("solana_signAndSendTransaction",{transaction:o,pubkey:this.getAccount(!0).address,sendOptions:r});return this.emit("pendingTransaction",void 0),a.signature}async sendTransaction(e,r,o){let a=await this.signTransaction(e),g=await r.sendRawTransaction(a.serialize(),o);return this.emit("pendingTransaction",void 0),g}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(o=>this.serializeTransaction(o))})).transactions.map((o,a)=>{let g=e[a];if(!g)throw new Error("Invalid transactions response");let C=Buffer.from(o,"base64");return ne(g)?ce.deserialize(new Uint8Array(C)):(this.emit("pendingTransaction",void 0),q.from(C))})}catch(r){if(r instanceof Fe){let o=[];for(let a of e)o.push(await this.signTransaction(a));return o}throw r}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){let e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(r=>({namespace:this.chain,address:$t.parseCaipAddress(r).address,type:"eoa"})))}setDefaultChain(e){this.provider.setDefaultChain(e)}internalRequest(e,r){let a=this.chains.find(g=>this.getActiveChain()?.id===g.id)?.caipNetworkId;switch(a){case W.CHAIN_IDS.Mainnet:this.sessionChains.includes(W.CHAIN_IDS.Mainnet)||(a=W.CHAIN_IDS.Deprecated_Mainnet);break;case W.CHAIN_IDS.Devnet:this.sessionChains.includes(W.CHAIN_IDS.Devnet)||(a=W.CHAIN_IDS.Deprecated_Devnet);break;default:break}return this.provider?.request({method:e,params:r},a)}get sessionChains(){return Le.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){let r=this.session?.namespaces.solana?.accounts[0];if(!r){if(e)throw new Error("Account not found");return}let o=r.split(":")[2];if(!o){if(e)throw new Error("Address not found");return}return{address:o,publicKey:z.decode(o)}}getRawRPCParams(e){return ne(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(r=>({data:z.encode(new Uint8Array(r.data)),keys:r.keys.map(o=>({isWritable:o.isWritable,isSigner:o.isSigner,pubkey:o.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new Fe(e)}};bt=new WeakMap;var Ke=qt({connection:null}),Se={state:Ke,subscribeKey(t,e){return Zt(Ke,t,e)},subscribe(t){return jt(Ke,()=>t(Ke))},setConnection(t){Ke.connection=Vt(t)}};var F=new M("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Ot=new M("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),He=new M("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),ni=new M("So11111111111111111111111111111111111111112"),ri=new M("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var me=t=>{let e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}};var Pt=pe(Ie(),1),ge=pe(mn(),1);var ht=t=>e=>{let r=(0,Pt.blob)(t,e),{encode:o,decode:a}=me(r),g=r;return g.decode=(C,E)=>{let x=a(C,E);return(0,ge.toBigIntLE)(Buffer.from(x))},g.encode=(C,E,x)=>{let T=(0,ge.toBufferLE)(C,t);return o(T,E,x)},g},pt=t=>e=>{let r=(0,Pt.blob)(t,e),{encode:o,decode:a}=me(r),g=r;return g.decode=(C,E)=>{let x=a(C,E);return(0,ge.toBigIntBE)(Buffer.from(x))},g.encode=(C,E,x)=>{let T=(0,ge.toBufferBE)(C,t);return o(T,E,x)},g},we=ht(8),ci=pt(8),Kn=ht(16),ui=pt(16),li=ht(24),fi=pt(24),di=ht(32),hi=pt(32);var Hn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,_t=Math.ceil,Y=Math.floor,H="[BigNumber Error] ",gn=H+"Number primitive has more than 15 significant digits: ",Q=1e14,I=14,Bt=9007199254740991,Dt=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ae=1e7,R=1e9;function wn(t){var e,r,o,a=A.prototype={constructor:A,toString:null,valueOf:null},g=new A(1),C=20,E=4,x=-7,T=21,G=-1e7,K=1e7,J=!1,ie=1,j=0,he={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},se="0123456789abcdefghijklmnopqrstuvwxyz",Ue=!0;function A(n,i){var s,h,u,f,m,c,l,p,d=this;if(!(d instanceof A))return new A(n,i);if(i==null){if(n&&n._isBigNumber===!0){d.s=n.s,!n.c||n.e>K?d.c=d.e=null:n.e<G?d.c=[d.e=0]:(d.e=n.e,d.c=n.c.slice());return}if((c=typeof n=="number")&&n*0==0){if(d.s=1/n<0?(n=-n,-1):1,n===~~n){for(f=0,m=n;m>=10;m/=10,f++);f>K?d.c=d.e=null:(d.e=f,d.c=[n]);return}p=String(n)}else{if(!Hn.test(p=String(n)))return o(d,p,c);d.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(f=p.indexOf("."))>-1&&(p=p.replace(".","")),(m=p.search(/e/i))>0?(f<0&&(f=m),f+=+p.slice(m+1),p=p.substring(0,m)):f<0&&(f=p.length)}else{if(P(i,2,se.length,"Base"),i==10&&Ue)return d=new A(n),V(d,C+d.e+1,E);if(p=String(n),c=typeof n=="number"){if(n*0!=0)return o(d,p,c,i);if(d.s=1/n<0?(p=p.slice(1),-1):1,A.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(gn+n)}else d.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(s=se.slice(0,i),f=m=0,l=p.length;m<l;m++)if(s.indexOf(h=p.charAt(m))<0){if(h=="."){if(m>f){f=l;continue}}else if(!u&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){u=!0,m=-1,f=0;continue}return o(d,String(n),c,i)}c=!1,p=r(p,i,10,d.s),(f=p.indexOf("."))>-1?p=p.replace(".",""):f=p.length}for(m=0;p.charCodeAt(m)===48;m++);for(l=p.length;p.charCodeAt(--l)===48;);if(p=p.slice(m,++l)){if(l-=m,c&&A.DEBUG&&l>15&&(n>Bt||n!==Y(n)))throw Error(gn+d.s*n);if((f=f-m-1)>K)d.c=d.e=null;else if(f<G)d.c=[d.e=0];else{if(d.e=f,d.c=[],m=(f+1)%I,f<0&&(m+=I),m<l){for(m&&d.c.push(+p.slice(0,m)),l-=I;m<l;)d.c.push(+p.slice(m,m+=I));m=I-(p=p.slice(m)).length}else m-=l;for(;m--;p+="0");d.c.push(+p)}}else d.c=[d.e=0]}A.clone=wn,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(n){var i,s;if(n!=null)if(typeof n=="object"){if(n.hasOwnProperty(i="DECIMAL_PLACES")&&(s=n[i],P(s,0,R,i),C=s),n.hasOwnProperty(i="ROUNDING_MODE")&&(s=n[i],P(s,0,8,i),E=s),n.hasOwnProperty(i="EXPONENTIAL_AT")&&(s=n[i],s&&s.pop?(P(s[0],-R,0,i),P(s[1],0,R,i),x=s[0],T=s[1]):(P(s,-R,R,i),x=-(T=s<0?-s:s))),n.hasOwnProperty(i="RANGE"))if(s=n[i],s&&s.pop)P(s[0],-R,-1,i),P(s[1],1,R,i),G=s[0],K=s[1];else if(P(s,-R,R,i),s)G=-(K=s<0?-s:s);else throw Error(H+i+" cannot be zero: "+s);if(n.hasOwnProperty(i="CRYPTO"))if(s=n[i],s===!!s)if(s)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))J=s;else throw J=!s,Error(H+"crypto unavailable");else J=s;else throw Error(H+i+" not true or false: "+s);if(n.hasOwnProperty(i="MODULO_MODE")&&(s=n[i],P(s,0,9,i),ie=s),n.hasOwnProperty(i="POW_PRECISION")&&(s=n[i],P(s,0,R,i),j=s),n.hasOwnProperty(i="FORMAT"))if(s=n[i],typeof s=="object")he=s;else throw Error(H+i+" not an object: "+s);if(n.hasOwnProperty(i="ALPHABET"))if(s=n[i],typeof s=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(s))Ue=s.slice(0,10)=="0123456789",se=s;else throw Error(H+i+" invalid: "+s)}else throw Error(H+"Object expected: "+n);return{DECIMAL_PLACES:C,ROUNDING_MODE:E,EXPONENTIAL_AT:[x,T],RANGE:[G,K],CRYPTO:J,MODULO_MODE:ie,POW_PRECISION:j,FORMAT:he,ALPHABET:se}},A.isBigNumber=function(n){if(!n||n._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var i,s,h=n.c,u=n.e,f=n.s;e:if({}.toString.call(h)=="[object Array]"){if((f===1||f===-1)&&u>=-R&&u<=R&&u===Y(u)){if(h[0]===0){if(u===0&&h.length===1)return!0;break e}if(i=(u+1)%I,i<1&&(i+=I),String(h[0]).length==i){for(i=0;i<h.length;i++)if(s=h[i],s<0||s>=Q||s!==Y(s))break e;if(s!==0)return!0}}}else if(h===null&&u===null&&(f===null||f===1||f===-1))return!0;throw Error(H+"Invalid BigNumber: "+n)},A.maximum=A.max=function(){return Ht(arguments,-1)},A.minimum=A.min=function(){return Ht(arguments,1)},A.random=(function(){var n=9007199254740992,i=Math.random()*n&2097151?function(){return Y(Math.random()*n)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(s){var h,u,f,m,c,l=0,p=[],d=new A(g);if(s==null?s=C:P(s,0,R),m=_t(s/I),J)if(crypto.getRandomValues){for(h=crypto.getRandomValues(new Uint32Array(m*=2));l<m;)c=h[l]*131072+(h[l+1]>>>11),c>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),h[l]=u[0],h[l+1]=u[1]):(p.push(c%1e14),l+=2);l=m/2}else if(crypto.randomBytes){for(h=crypto.randomBytes(m*=7);l<m;)c=(h[l]&31)*281474976710656+h[l+1]*1099511627776+h[l+2]*4294967296+h[l+3]*16777216+(h[l+4]<<16)+(h[l+5]<<8)+h[l+6],c>=9e15?crypto.randomBytes(7).copy(h,l):(p.push(c%1e14),l+=7);l=m/7}else throw J=!1,Error(H+"crypto unavailable");if(!J)for(;l<m;)c=i(),c<9e15&&(p[l++]=c%1e14);for(m=p[--l],s%=I,m&&s&&(c=Dt[I-s],p[l]=Y(m/c)*c);p[l]===0;p.pop(),l--);if(l<0)p=[f=0];else{for(f=-1;p[0]===0;p.splice(0,1),f-=I);for(l=1,c=p[0];c>=10;c/=10,l++);l<I&&(f-=I-l)}return d.e=f,d.c=p,d}})(),A.sum=function(){for(var n=1,i=arguments,s=new A(i[0]);n<i.length;)s=s.plus(i[n++]);return s},r=(function(){var n="0123456789";function i(s,h,u,f){for(var m,c=[0],l,p=0,d=s.length;p<d;){for(l=c.length;l--;c[l]*=h);for(c[0]+=f.indexOf(s.charAt(p++)),m=0;m<c.length;m++)c[m]>u-1&&(c[m+1]==null&&(c[m+1]=0),c[m+1]+=c[m]/u|0,c[m]%=u)}return c.reverse()}return function(s,h,u,f,m){var c,l,p,d,w,y,N,v,_=s.indexOf("."),U=C,S=E;for(_>=0&&(d=j,j=0,s=s.replace(".",""),v=new A(h),y=v.pow(s.length-_),j=d,v.c=i(ue($(y.c),y.e,"0"),10,u,n),v.e=v.c.length),N=i(s,h,u,m?(c=se,n):(c=n,se)),p=d=N.length;N[--d]==0;N.pop());if(!N[0])return c.charAt(0);if(_<0?--p:(y.c=N,y.e=p,y.s=f,y=e(y,v,U,S,u),N=y.c,w=y.r,p=y.e),l=p+U+1,_=N[l],d=u/2,w=w||l<0||N[l+1]!=null,w=S<4?(_!=null||w)&&(S==0||S==(y.s<0?3:2)):_>d||_==d&&(S==4||w||S==6&&N[l-1]&1||S==(y.s<0?8:7)),l<1||!N[0])s=w?ue(c.charAt(1),-U,c.charAt(0)):c.charAt(0);else{if(N.length=l,w)for(--u;++N[--l]>u;)N[l]=0,l||(++p,N=[1].concat(N));for(d=N.length;!N[--d];);for(_=0,s="";_<=d;s+=c.charAt(N[_++]));s=ue(s,p,c.charAt(0))}return s}})(),e=(function(){function n(h,u,f){var m,c,l,p,d=0,w=h.length,y=u%Ae,N=u/Ae|0;for(h=h.slice();w--;)l=h[w]%Ae,p=h[w]/Ae|0,m=N*l+p*y,c=y*l+m%Ae*Ae+d,d=(c/f|0)+(m/Ae|0)+N*p,h[w]=c%f;return d&&(h=[d].concat(h)),h}function i(h,u,f,m){var c,l;if(f!=m)l=f>m?1:-1;else for(c=l=0;c<f;c++)if(h[c]!=u[c]){l=h[c]>u[c]?1:-1;break}return l}function s(h,u,f,m){for(var c=0;f--;)h[f]-=c,c=h[f]<u[f]?1:0,h[f]=c*m+h[f]-u[f];for(;!h[0]&&h.length>1;h.splice(0,1));}return function(h,u,f,m,c){var l,p,d,w,y,N,v,_,U,S,b,L,Ye,Tt,Mt,te,Re,Z=h.s==u.s?1:-1,k=h.c,B=u.c;if(!k||!k[0]||!B||!B[0])return new A(!h.s||!u.s||(k?B&&k[0]==B[0]:!B)?NaN:k&&k[0]==0||!B?Z*0:Z/0);for(_=new A(Z),U=_.c=[],p=h.e-u.e,Z=f+p+1,c||(c=Q,p=X(h.e/I)-X(u.e/I),Z=Z/I|0),d=0;B[d]==(k[d]||0);d++);if(B[d]>(k[d]||0)&&p--,Z<0)U.push(1),w=!0;else{for(Tt=k.length,te=B.length,d=0,Z+=2,y=Y(c/(B[0]+1)),y>1&&(B=n(B,y,c),k=n(k,y,c),te=B.length,Tt=k.length),Ye=te,S=k.slice(0,te),b=S.length;b<te;S[b++]=0);Re=B.slice(),Re=[0].concat(Re),Mt=B[0],B[1]>=c/2&&Mt++;do{if(y=0,l=i(B,S,te,b),l<0){if(L=S[0],te!=b&&(L=L*c+(S[1]||0)),y=Y(L/Mt),y>1)for(y>=c&&(y=c-1),N=n(B,y,c),v=N.length,b=S.length;i(N,S,v,b)==1;)y--,s(N,te<v?Re:B,v,c),v=N.length,l=1;else y==0&&(l=y=1),N=B.slice(),v=N.length;if(v<b&&(N=[0].concat(N)),s(S,N,b,c),b=S.length,l==-1)for(;i(B,S,te,b)<1;)y++,s(S,te<b?Re:B,b,c),b=S.length}else l===0&&(y++,S=[0]);U[d++]=y,S[0]?S[b++]=k[Ye]||0:(S=[k[Ye]],b=1)}while((Ye++<Tt||S[0]!=null)&&Z--);w=S[0]!=null,U[0]||U.splice(0,1)}if(c==Q){for(d=1,Z=U[0];Z>=10;Z/=10,d++);V(_,f+(_.e=d+p*I-1)+1,m,w)}else _.e=p,_.r=+w;return _}})();function ee(n,i,s,h){var u,f,m,c,l;if(s==null?s=E:P(s,0,8),!n.c)return n.toString();if(u=n.c[0],m=n.e,i==null)l=$(n.c),l=h==1||h==2&&(m<=x||m>=T)?gt(l,m):ue(l,m,"0");else if(n=V(new A(n),i,s),f=n.e,l=$(n.c),c=l.length,h==1||h==2&&(i<=f||f<=x)){for(;c<i;l+="0",c++);l=gt(l,f)}else if(i-=m+(h===2&&f>m),l=ue(l,f,"0"),f+1>c){if(--i>0)for(l+=".";i--;l+="0");}else if(i+=f-c,i>0)for(f+1==c&&(l+=".");i--;l+="0");return n.s<0&&u?"-"+l:l}function Ht(n,i){for(var s,h,u=1,f=new A(n[0]);u<n.length;u++)h=new A(n[u]),(!h.s||(s=ve(f,h))===i||s===0&&f.s===i)&&(f=h);return f}function vt(n,i,s){for(var h=1,u=i.length;!i[--u];i.pop());for(u=i[0];u>=10;u/=10,h++);return(s=h+s*I-1)>K?n.c=n.e=null:s<G?n.c=[n.e=0]:(n.e=s,n.c=i),n}o=(function(){var n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,i=/^([^.]+)\.$/,s=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(f,m,c,l){var p,d=c?m:m.replace(u,"");if(h.test(d))f.s=isNaN(d)?null:d<0?-1:1;else{if(!c&&(d=d.replace(n,function(w,y,N){return p=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!l||l==p?y:w}),l&&(p=l,d=d.replace(i,"$1").replace(s,"0.$1")),m!=d))return new A(d,p);if(A.DEBUG)throw Error(H+"Not a"+(l?" base "+l:"")+" number: "+m);f.s=null}f.c=f.e=null}})();function V(n,i,s,h){var u,f,m,c,l,p,d,w=n.c,y=Dt;if(w){e:{for(u=1,c=w[0];c>=10;c/=10,u++);if(f=i-u,f<0)f+=I,m=i,l=w[p=0],d=Y(l/y[u-m-1]%10);else if(p=_t((f+1)/I),p>=w.length)if(h){for(;w.length<=p;w.push(0));l=d=0,u=1,f%=I,m=f-I+1}else break e;else{for(l=c=w[p],u=1;c>=10;c/=10,u++);f%=I,m=f-I+u,d=m<0?0:Y(l/y[u-m-1]%10)}if(h=h||i<0||w[p+1]!=null||(m<0?l:l%y[u-m-1]),h=s<4?(d||h)&&(s==0||s==(n.s<0?3:2)):d>5||d==5&&(s==4||h||s==6&&(f>0?m>0?l/y[u-m]:0:w[p-1])%10&1||s==(n.s<0?8:7)),i<1||!w[0])return w.length=0,h?(i-=n.e+1,w[0]=y[(I-i%I)%I],n.e=-i||0):w[0]=n.e=0,n;if(f==0?(w.length=p,c=1,p--):(w.length=p+1,c=y[I-f],w[p]=m>0?Y(l/y[u-m]%y[m])*c:0),h)for(;;)if(p==0){for(f=1,m=w[0];m>=10;m/=10,f++);for(m=w[0]+=c,c=1;m>=10;m/=10,c++);f!=c&&(n.e++,w[0]==Q&&(w[0]=1));break}else{if(w[p]+=c,w[p]!=Q)break;w[p--]=0,c=1}for(f=w.length;w[--f]===0;w.pop());}n.e>K?n.c=n.e=null:n.e<G&&(n.c=[n.e=0])}return n}function oe(n){var i,s=n.e;return s===null?n.toString():(i=$(n.c),i=s<=x||s>=T?gt(i,s):ue(i,s,"0"),n.s<0?"-"+i:i)}return a.absoluteValue=a.abs=function(){var n=new A(this);return n.s<0&&(n.s=1),n},a.comparedTo=function(n,i){return ve(this,new A(n,i))},a.decimalPlaces=a.dp=function(n,i){var s,h,u,f=this;if(n!=null)return P(n,0,R),i==null?i=E:P(i,0,8),V(new A(f),n+f.e+1,i);if(!(s=f.c))return null;if(h=((u=s.length-1)-X(this.e/I))*I,u=s[u])for(;u%10==0;u/=10,h--);return h<0&&(h=0),h},a.dividedBy=a.div=function(n,i){return e(this,new A(n,i),C,E)},a.dividedToIntegerBy=a.idiv=function(n,i){return e(this,new A(n,i),0,1)},a.exponentiatedBy=a.pow=function(n,i){var s,h,u,f,m,c,l,p,d,w=this;if(n=new A(n),n.c&&!n.isInteger())throw Error(H+"Exponent not an integer: "+oe(n));if(i!=null&&(i=new A(i)),c=n.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!n.c||!n.c[0])return d=new A(Math.pow(+oe(w),c?n.s*(2-mt(n)):+oe(n))),i?d.mod(i):d;if(l=n.s<0,i){if(i.c?!i.c[0]:!i.s)return new A(NaN);h=!l&&w.isInteger()&&i.isInteger(),h&&(w=w.mod(i))}else{if(n.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||c&&w.c[1]>=24e7:w.c[0]<8e13||c&&w.c[0]<=9999975e7)))return f=w.s<0&&mt(n)?-0:0,w.e>-1&&(f=1/f),new A(l?1/f:f);j&&(f=_t(j/I+2))}for(c?(s=new A(.5),l&&(n.s=1),p=mt(n)):(u=Math.abs(+oe(n)),p=u%2),d=new A(g);;){if(p){if(d=d.times(w),!d.c)break;f?d.c.length>f&&(d.c.length=f):h&&(d=d.mod(i))}if(u){if(u=Y(u/2),u===0)break;p=u%2}else if(n=n.times(s),V(n,n.e+1,1),n.e>14)p=mt(n);else{if(u=+oe(n),u===0)break;p=u%2}w=w.times(w),f?w.c&&w.c.length>f&&(w.c.length=f):h&&(w=w.mod(i))}return h?d:(l&&(d=g.div(d)),i?d.mod(i):f?V(d,j,E,m):d)},a.integerValue=function(n){var i=new A(this);return n==null?n=E:P(n,0,8),V(i,i.e+1,n)},a.isEqualTo=a.eq=function(n,i){return ve(this,new A(n,i))===0},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(n,i){return ve(this,new A(n,i))>0},a.isGreaterThanOrEqualTo=a.gte=function(n,i){return(i=ve(this,new A(n,i)))===1||i===0},a.isInteger=function(){return!!this.c&&X(this.e/I)>this.c.length-2},a.isLessThan=a.lt=function(n,i){return ve(this,new A(n,i))<0},a.isLessThanOrEqualTo=a.lte=function(n,i){return(i=ve(this,new A(n,i)))===-1||i===0},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&this.c[0]==0},a.minus=function(n,i){var s,h,u,f,m=this,c=m.s;if(n=new A(n,i),i=n.s,!c||!i)return new A(NaN);if(c!=i)return n.s=-i,m.plus(n);var l=m.e/I,p=n.e/I,d=m.c,w=n.c;if(!l||!p){if(!d||!w)return d?(n.s=-i,n):new A(w?m:NaN);if(!d[0]||!w[0])return w[0]?(n.s=-i,n):new A(d[0]?m:E==3?-0:0)}if(l=X(l),p=X(p),d=d.slice(),c=l-p){for((f=c<0)?(c=-c,u=d):(p=l,u=w),u.reverse(),i=c;i--;u.push(0));u.reverse()}else for(h=(f=(c=d.length)<(i=w.length))?c:i,c=i=0;i<h;i++)if(d[i]!=w[i]){f=d[i]<w[i];break}if(f&&(u=d,d=w,w=u,n.s=-n.s),i=(h=w.length)-(s=d.length),i>0)for(;i--;d[s++]=0);for(i=Q-1;h>c;){if(d[--h]<w[h]){for(s=h;s&&!d[--s];d[s]=i);--d[s],d[h]+=Q}d[h]-=w[h]}for(;d[0]==0;d.splice(0,1),--p);return d[0]?vt(n,d,p):(n.s=E==3?-1:1,n.c=[n.e=0],n)},a.modulo=a.mod=function(n,i){var s,h,u=this;return n=new A(n,i),!u.c||!n.s||n.c&&!n.c[0]?new A(NaN):!n.c||u.c&&!u.c[0]?new A(u):(ie==9?(h=n.s,n.s=1,s=e(u,n,0,3),n.s=h,s.s*=h):s=e(u,n,0,ie),n=u.minus(s.times(n)),!n.c[0]&&ie==1&&(n.s=u.s),n)},a.multipliedBy=a.times=function(n,i){var s,h,u,f,m,c,l,p,d,w,y,N,v,_,U,S=this,b=S.c,L=(n=new A(n,i)).c;if(!b||!L||!b[0]||!L[0])return!S.s||!n.s||b&&!b[0]&&!L||L&&!L[0]&&!b?n.c=n.e=n.s=null:(n.s*=S.s,!b||!L?n.c=n.e=null:(n.c=[0],n.e=0)),n;for(h=X(S.e/I)+X(n.e/I),n.s*=S.s,l=b.length,w=L.length,l<w&&(v=b,b=L,L=v,u=l,l=w,w=u),u=l+w,v=[];u--;v.push(0));for(_=Q,U=Ae,u=w;--u>=0;){for(s=0,y=L[u]%U,N=L[u]/U|0,m=l,f=u+m;f>u;)p=b[--m]%U,d=b[m]/U|0,c=N*p+d*y,p=y*p+c%U*U+v[f]+s,s=(p/_|0)+(c/U|0)+N*d,v[f--]=p%_;v[f]=s}return s?++h:v.splice(0,1),vt(n,v,h)},a.negated=function(){var n=new A(this);return n.s=-n.s||null,n},a.plus=function(n,i){var s,h=this,u=h.s;if(n=new A(n,i),i=n.s,!u||!i)return new A(NaN);if(u!=i)return n.s=-i,h.minus(n);var f=h.e/I,m=n.e/I,c=h.c,l=n.c;if(!f||!m){if(!c||!l)return new A(u/0);if(!c[0]||!l[0])return l[0]?n:new A(c[0]?h:u*0)}if(f=X(f),m=X(m),c=c.slice(),u=f-m){for(u>0?(m=f,s=l):(u=-u,s=c),s.reverse();u--;s.push(0));s.reverse()}for(u=c.length,i=l.length,u-i<0&&(s=l,l=c,c=s,i=u),u=0;i;)u=(c[--i]=c[i]+l[i]+u)/Q|0,c[i]=Q===c[i]?0:c[i]%Q;return u&&(c=[u].concat(c),++m),vt(n,c,m)},a.precision=a.sd=function(n,i){var s,h,u,f=this;if(n!=null&&n!==!!n)return P(n,1,R),i==null?i=E:P(i,0,8),V(new A(f),n,i);if(!(s=f.c))return null;if(u=s.length-1,h=u*I+1,u=s[u]){for(;u%10==0;u/=10,h--);for(u=s[0];u>=10;u/=10,h++);}return n&&f.e+1>h&&(h=f.e+1),h},a.shiftedBy=function(n){return P(n,-Bt,Bt),this.times("1e"+n)},a.squareRoot=a.sqrt=function(){var n,i,s,h,u,f=this,m=f.c,c=f.s,l=f.e,p=C+4,d=new A("0.5");if(c!==1||!m||!m[0])return new A(!c||c<0&&(!m||m[0])?NaN:m?f:1/0);if(c=Math.sqrt(+oe(f)),c==0||c==1/0?(i=$(m),(i.length+l)%2==0&&(i+="0"),c=Math.sqrt(+i),l=X((l+1)/2)-(l<0||l%2),c==1/0?i="5e"+l:(i=c.toExponential(),i=i.slice(0,i.indexOf("e")+1)+l),s=new A(i)):s=new A(c+""),s.c[0]){for(l=s.e,c=l+p,c<3&&(c=0);;)if(u=s,s=d.times(u.plus(e(f,u,p,1))),$(u.c).slice(0,c)===(i=$(s.c)).slice(0,c))if(s.e<l&&--c,i=i.slice(c-3,c+1),i=="9999"||!h&&i=="4999"){if(!h&&(V(u,u.e+C+2,0),u.times(u).eq(f))){s=u;break}p+=4,c+=4,h=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(V(s,s.e+C+2,1),n=!s.times(s).eq(f));break}}return V(s,s.e+C+1,E,n)},a.toExponential=function(n,i){return n!=null&&(P(n,0,R),n++),ee(this,n,i,1)},a.toFixed=function(n,i){return n!=null&&(P(n,0,R),n=n+this.e+1),ee(this,n,i)},a.toFormat=function(n,i,s){var h,u=this;if(s==null)n!=null&&i&&typeof i=="object"?(s=i,i=null):n&&typeof n=="object"?(s=n,n=i=null):s=he;else if(typeof s!="object")throw Error(H+"Argument not an object: "+s);if(h=u.toFixed(n,i),u.c){var f,m=h.split("."),c=+s.groupSize,l=+s.secondaryGroupSize,p=s.groupSeparator||"",d=m[0],w=m[1],y=u.s<0,N=y?d.slice(1):d,v=N.length;if(l&&(f=c,c=l,l=f,v-=f),c>0&&v>0){for(f=v%c||c,d=N.substr(0,f);f<v;f+=c)d+=p+N.substr(f,c);l>0&&(d+=p+N.slice(f)),y&&(d="-"+d)}h=w?d+(s.decimalSeparator||"")+((l=+s.fractionGroupSize)?w.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(s.fractionGroupSeparator||"")):w):d}return(s.prefix||"")+h+(s.suffix||"")},a.toFraction=function(n){var i,s,h,u,f,m,c,l,p,d,w,y,N=this,v=N.c;if(n!=null&&(c=new A(n),!c.isInteger()&&(c.c||c.s!==1)||c.lt(g)))throw Error(H+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+oe(c));if(!v)return new A(N);for(i=new A(g),p=s=new A(g),h=l=new A(g),y=$(v),f=i.e=y.length-N.e-1,i.c[0]=Dt[(m=f%I)<0?I+m:m],n=!n||c.comparedTo(i)>0?f>0?i:p:c,m=K,K=1/0,c=new A(y),l.c[0]=0;d=e(c,i,0,1),u=s.plus(d.times(h)),u.comparedTo(n)!=1;)s=h,h=u,p=l.plus(d.times(u=p)),l=u,i=c.minus(d.times(u=i)),c=u;return u=e(n.minus(s),h,0,1),l=l.plus(u.times(p)),s=s.plus(u.times(h)),l.s=p.s=N.s,f=f*2,w=e(p,h,f,E).minus(N).abs().comparedTo(e(l,s,f,E).minus(N).abs())<1?[p,h]:[l,s],K=m,w},a.toNumber=function(){return+oe(this)},a.toPrecision=function(n,i){return n!=null&&P(n,1,R),ee(this,n,i,2)},a.toString=function(n){var i,s=this,h=s.s,u=s.e;return u===null?h?(i="Infinity",h<0&&(i="-"+i)):i="NaN":(n==null?i=u<=x||u>=T?gt($(s.c),u):ue($(s.c),u,"0"):n===10&&Ue?(s=V(new A(s),C+u+1,E),i=ue($(s.c),s.e,"0")):(P(n,2,se.length,"Base"),i=r(ue($(s.c),u,"0"),10,n,h,!0)),h<0&&s.c[0]&&(i="-"+i)),i},a.valueOf=a.toJSON=function(){return oe(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,t!=null&&A.set(t),A}function X(t){var e=t|0;return t>0||t===e?e:e-1}function $(t){for(var e,r,o=1,a=t.length,g=t[0]+"";o<a;){for(e=t[o++]+"",r=I-e.length;r--;e="0"+e);g+=e}for(a=g.length;g.charCodeAt(--a)===48;);return g.slice(0,a+1||1)}function ve(t,e){var r,o,a=t.c,g=e.c,C=t.s,E=e.s,x=t.e,T=e.e;if(!C||!E)return null;if(r=a&&!a[0],o=g&&!g[0],r||o)return r?o?0:-E:C;if(C!=E)return C;if(r=C<0,o=x==T,!a||!g)return o?0:!a^r?1:-1;if(!o)return x>T^r?1:-1;for(E=(x=a.length)<(T=g.length)?x:T,C=0;C<E;C++)if(a[C]!=g[C])return a[C]>g[C]^r?1:-1;return x==T?0:x>T^r?1:-1}function P(t,e,r,o){if(t<e||t>r||t!==Y(t))throw Error(H+(o||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function mt(t){var e=t.c.length-1;return X(t.e/I)==e&&t.c[e]%2!=0}function gt(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ue(t,e,r){var o,a;if(e<0){for(a=r+".";++e;a+=r);t=a+t}else if(o=t.length,++e>o){for(a=r,e-=o;--e;a+=r);t+=a}else e<o&&(t=t.slice(0,e)+"."+t.slice(e));return t}var qn=wn(),An=qn;var Ci=new An("1e+18");var Cn=pe(Ie(),1);var wt=t=>{let e=(0,Cn.u8)(t),{encode:r,decode:o}=me(e),a=e;return a.decode=(g,C)=>!!o(g,C),a.encode=(g,C,E)=>{let x=Number(g);return r(x,C,E)},a};var En=pe(Ie(),1);var D=t=>{let e=(0,En.blob)(32,t),{encode:r,decode:o}=me(e),a=e;return a.decode=(g,C)=>{let E=o(g,C);return new M(E)},a.encode=(g,C,E)=>{let x=g.toBuffer();return r(x,C,E)},a};var Ce=class extends Error{constructor(e){super(e)}},le=class extends Ce{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}},At=class extends Ce{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}};var Be=class extends Ce{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}},fe=class extends Ce{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}},Ct=class extends Ce{constructor(){super(...arguments),this.name="TokenInvalidMintError"}};var Et=class extends Ce{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}};var Ut=(function(t){return t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension",t})(Ut||{});var Te=pe(Ie(),1);var qe=(function(t){return t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account",t})(qe||{}),yt=1;var Ee=pe(Ie(),1);var je=pe(Ie(),1);var jn=(0,je.struct)([(0,je.u8)("m"),(0,je.u8)("n"),wt("isInitialized"),D("signer1"),D("signer2"),D("signer3"),D("signer4"),D("signer5"),D("signer6"),D("signer7"),D("signer8"),D("signer9"),D("signer10"),D("signer11")]),Nt=jn.span;var Rt=(function(t){return t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen",t})(Rt||{}),yn=(0,Ee.struct)([D("mint"),D("owner"),we("amount"),(0,Ee.u32)("delegateOption"),D("delegate"),(0,Ee.u8)("state"),(0,Ee.u32)("isNativeOption"),we("isNative"),we("delegatedAmount"),(0,Ee.u32)("closeAuthorityOption"),D("closeAuthority")]),de=yn.span;async function Lt(t,e,r,o=F){let a=await t.getAccountInfo(e,r);return Vn(e,a,o)}function Vn(t,e,r=F){if(!e)throw new le;if(!e.owner.equals(r))throw new Be;if(e.data.length<de)throw new fe;let o=yn.decode(e.data.slice(0,de)),a=Buffer.alloc(0);if(e.data.length>de){if(e.data.length===Nt)throw new fe;if(e.data[de]!=qe.Account)throw new At;a=e.data.slice(de+yt)}return{address:t,mint:o.mint,owner:o.owner,amount:o.amount,delegate:o.delegateOption?o.delegate:null,delegatedAmount:o.delegatedAmount,isInitialized:o.state!==Rt.Uninitialized,isFrozen:o.state===Rt.Frozen,isNative:!!o.isNativeOption,rentExemptReserve:o.isNativeOption?o.isNative:null,closeAuthority:o.closeAuthorityOption?o.closeAuthority:null,tlvData:a}}function Nn(t,e,r){if(r.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(let o of r)t.push({pubkey:o instanceof M?o:o.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}var Ve=pe(Ie(),1);var xn=(0,Ve.struct)([(0,Ve.u8)("instruction"),we("amount"),(0,Ve.u8)("decimals")]);function In(t,e,r,o,a,g,C=[],E=F){let x=Nn([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}],o,C),T=Buffer.alloc(xn.span);return xn.encode({instruction:Ut.TransferChecked,amount:BigInt(a),decimals:g},T),new et({keys:x,programId:E,data:T})}var Sn=(0,Te.struct)([(0,Te.u32)("mintAuthorityOption"),D("mintAuthority"),we("supply"),(0,Te.u8)("decimals"),wt("isInitialized"),(0,Te.u32)("freezeAuthorityOption"),D("freezeAuthority")]),zt=Sn.span;async function vn(t,e,r,o=F){let a=await t.getAccountInfo(e,r);return Zn(e,a,o)}function Zn(t,e,r=F){if(!e)throw new le;if(!e.owner.equals(r))throw new Be;if(e.data.length<zt)throw new fe;let o=Sn.decode(e.data.slice(0,zt)),a=Buffer.alloc(0);if(e.data.length>zt){if(e.data.length<=de)throw new fe;if(e.data.length===Nt)throw new fe;if(e.data[de]!=qe.Mint)throw new Ct;a=e.data.slice(de+yt)}return{address:t,mintAuthority:o.mintAuthorityOption?o.mintAuthority:null,supply:o.supply,decimals:o.decimals,isInitialized:o.isInitialized,freezeAuthority:o.freezeAuthorityOption?o.freezeAuthority:null,tlvData:a}}function kt(t,e,r=!1,o=F,a=He){if(!r&&!M.isOnCurve(e.toBuffer()))throw new Et;let[g]=M.findProgramAddressSync([e.toBuffer(),o.toBuffer(),t.toBuffer()],a);return g}function Tn(t,e,r,o,a=F,g=He){return $n(t,e,r,o,Buffer.alloc(0),a,g)}function $n(t,e,r,o,a,g=F,C=He){let E=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:tt.programId,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1}];return new et({keys:E,programId:C,data:a})}async function Yn(t,e){let r=await t.getAccountInfo(e);if(!r)throw new Error("Mint account not found");if(r.owner.equals(F))return F;if(r.owner.equals(Ot))return Ot;throw new Error("Unknown mint owner program")}async function Mn({provider:t,to:e,amount:r,tokenMint:o,connection:a}){if(!t.publicKey)throw new Error("No public key found");if(r<=0)throw new Error("Amount must be greater than 0");try{let g=t.publicKey,C=new M(e),E=new M(o),x=await Yn(a,E),G=(await vn(a,E,void 0,x)).decimals;if(G<0)throw new Error("Invalid token decimals");let K=Math.floor(r*10**G),J=kt(E,g,!1,x),ie=kt(E,C,!1,x);try{if((await Lt(a,J,void 0,x)).amount<BigInt(K))throw new Error("Insufficient token balance")}catch(ee){throw ee instanceof le?new Error("Sender does not have a token account for this mint"):ee}let j=!1;try{await Lt(a,ie,void 0,x)}catch(ee){if(ee instanceof le)j=!0;else throw ee}let he=[],se=j?nt.UNIT_LIMIT_WITH_ATA_CREATION:nt.UNIT_LIMIT_TRANSFER_ONLY;he.push(Oe.setComputeUnitPrice({microLamports:nt.UNIT_PRICE_MICRO_LAMPORTS}),Oe.setComputeUnitLimit({units:se})),j&&he.push(Tn(g,ie,C,E,x)),he.push(In(J,E,ie,g,K,G,[],x));let{blockhash:Ue,lastValidBlockHeight:A}=await a.getLatestBlockhash();return new q({feePayer:g,blockhash:Ue,lastValidBlockHeight:A}).add(...he)}catch(g){throw new Error(`Failed to create SPL token transaction: ${g instanceof Error?g.message:"Unknown error"}`)}}var bn={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function Wt({provider:t,to:e,value:r,connection:o}){if(!t.publicKey)throw Error("No public key found");let a=new M(e),g=Math.floor(r*cn),{blockhash:C,lastValidBlockHeight:E}=await o.getLatestBlockhash(),x=[Oe.setComputeUnitPrice({microLamports:bn.UNIT_PRICE_MICRO_LAMPORTS}),Oe.setComputeUnitLimit({units:bn.UNIT_LIMIT}),tt.transfer({fromPubkey:t.publicKey,toPubkey:a,lamports:g})];return new q({feePayer:t.publicKey,blockhash:C,lastValidBlockHeight:E}).add(...x)}var Xn=function(t,e,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(t):o?o.value:e.get(t)},Qn=function(t,e,r,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r},xt,Ze,It=new Set;function Jn(t){$e=void 0,It.add(t)}function er(t){$e=void 0,It.delete(t)}var De={};function _n(){if(Ze||(Ze=Object.freeze({register:On,get:tr,on:nr}),typeof window>"u"))return Ze;let t=Object.freeze({register:On});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Ft(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ze}function On(...t){return t=t.filter(e=>!It.has(e)),t.length?(t.forEach(e=>Jn(e)),De.register?.forEach(e=>Pn(()=>e(...t))),function(){t.forEach(r=>er(r)),De.unregister?.forEach(r=>Pn(()=>r(...t)))}):()=>{}}var $e;function tr(){return $e||($e=[...It]),$e}function nr(t,e){return De[t]?.push(e)||(De[t]=[e]),function(){De[t]=De[t]?.filter(o=>e!==o)}}function Pn(t){try{t()}catch(e){console.error(e)}}var Ft=class extends Event{get detail(){return Xn(this,xt,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),xt.set(this,void 0),Qn(this,xt,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};xt=new WeakMap;function Bn(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}var Gt={"solana:mainnet":rt,"solana:testnet":ln,"solana:devnet":un};var St=class extends re{constructor({wallet:e,getActiveChain:r,requestedChains:o}){super(),this.type="ANNOUNCED",this.chain=O.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=r,this.requestedChains=o,this.name=Jt.getConnectorName(e.name)||e.name,this.id=xe.ConnectorExplorerIds[this.name]||this.name,this.explorerId=xe.ConnectorExplorerIds[this.name],this.imageUrl=this.wallet.icon,this.bindEvents()}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(r=>r.id===e||r.id===Gt[e]?.id)).filter(Boolean)}get publicKey(){let e=this.getAccount(!1);if(e)return new M(e.publicKey)}async connect(){await this.getWalletFeature(ct).connect().catch(a=>{throw new Qe(a)});let r=this.getAccount(!0),o=new M(r.publicKey);return this.emit("connect",o),r.address}async disconnect(){await this.getWalletFeature(dn).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){let r=this.getWalletFeature(fn),o=this.getAccount(!0),[a]=await r.signMessage({message:e,account:o});if(!a)throw new ot("Empty result");return a.signature}async signTransaction(e){let r=this.getWalletFeature(ke),o=this.getAccount(!0),a=this.serializeTransaction(e),[g]=await r.signTransaction({account:o,transaction:new Uint8Array(a),chain:this.getActiveChainName()});if(!g)throw new ze("Empty result");return this.emit("pendingTransaction",void 0),ne(e)?ce.deserialize(g.signedTransaction):q.from(g.signedTransaction)}async signAndSendTransaction(e,r){let o=this.getWalletFeature(at),a=this.getAccount(!0),[g]=await o.signAndSendTransaction({account:a,transaction:new Uint8Array(this.serializeTransaction(e)),options:Xe(ae({},r),{preflightCommitment:Bn(r?.preflightCommitment)}),chain:this.getActiveChainName()});if(!g)throw new st("Empty result");return this.emit("pendingTransaction",void 0),z.encode(g.signature)}async sendTransaction(e,r,o){let a=await this.signTransaction(e);return await r.sendRawTransaction(a.serialize(),o)}async signAllTransactions(e){let r=this.getWalletFeature(ke),o=this.getAccount(!0),a=this.getActiveChainName();return(await r.signTransaction(...e.map(C=>({transaction:new Uint8Array(this.serializeTransaction(C)),account:o,chain:a})))).map(({signedTransaction:C},E)=>{let x=e[E];if(!x)throw new ze("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),ne(x)?ce.deserialize(C):q.from(C)})}async request(e){return Promise.reject(new We("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){let r=this.wallet.accounts[0];if(e&&!r)throw new it;return r}getWalletFeature(e){if(!(e in this.wallet.features))throw new We(e);return this.wallet.features[e]}getActiveChainName(){let e=Object.entries(Gt).find(([,r])=>r.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(ut).on("change",r=>{if(r.accounts){let o=r.accounts[0];o&&this.emit("accountsChanged",new M(o.publicKey))}})}};var{get:rr,on:Dn}=_n(),ye=[];function Rn(t,e,r){let o=[Dn("register",(...a)=>{ye=[...ye,...Un(a,t,e)],r(...ye)}),Dn("unregister",(...a)=>{ye=ye.filter(g=>a.some(C=>C.name===g.wallet.name)),r(...ye)})];return ye=Un(rr(),t,e),r(...ye),()=>o.forEach(a=>a())}function Un(t,e,r){return t.filter(o=>o.name!=="WalletConnect"&&hn(o)).map(o=>new St({wallet:o,requestedChains:e,getActiveChain:r}))}var ir=[O.CONNECTOR_ID.AUTH,O.CONNECTOR_ID.WALLET_CONNECT],sr=[{pattern:/Attempt to debit an account but found no record of a prior credit/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Insufficient funds for fee/iu,message:"Not enough SOL to cover fees or rent"}],Kt=class extends tn{constructor(e={}){super({adapterType:O.ADAPTER_TYPES.SOLANA,namespace:O.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);let r=Me.getActiveCaipNetworkId(),a=(e.networks?.find(g=>g.caipNetworkId===r)||e.networks?.[0])?.rpcUrls.default.http[0];a&&Se.setConnection(new be(a,this.connectionSettings))}setAuthProvider(e){this.addConnector(new lt({w3mFrameProvider:e,getActiveChain:()=>Ne.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(){Xt.state.projectId||sn.open(on.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");let e=()=>Ne.getActiveCaipNetwork(this.namespace);Yt.isClient()&&"coinbaseSolana"in window&&this.addConnector(new ft({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:e})),Rn(this.getCaipNetworks(),e,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){let r=this.connectors.find(o=>o.id===e.id);return r?{accounts:await r.getAccounts()}:{accounts:[]}}async signMessage(e){let r=e.provider;if(!r)throw new Error("connectionControllerClient:signMessage - provider is undefined");let o=await r.signMessage(new TextEncoder().encode(e.message));return{signature:z.encode(o)}}async estimateGas(e){let r=Se.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");let a=await(await Wt({provider:e.provider,connection:r,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(r);return{gas:BigInt(a||0)}}async sendTransaction(e){let r=Se.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");let o=e.provider,a=e.tokenMint?await Mn({provider:o,connection:r,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await Wt({provider:o,connection:r,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),g=await o.sendTransaction(a,r).catch(C=>{if(C instanceof an){let E=C?.transactionError?.message??C?.message??"";for(let{pattern:x,message:T}of sr)if(x.test(E))throw new Error(T)}throw C});return await new Promise(C=>{let E=setInterval(async()=>{(await r.getSignatureStatus(g))?.value&&(clearInterval(E),C())},1e3)}),{hash:g}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){let r=this.connectors.find(T=>T.id===e.id);if(!r)throw new Error("Provider not found");let o=ae(ae({},r),e.id===O.CONNECTOR_ID.AUTH?{provider:r}:{}),a=e.rpcUrl||this.getCaipNetworks()?.find(T=>T.id===e.chainId)?.rpcUrls.default.http[0];if(!a)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);let g=this.getConnection({address:e.address,connectorId:r.id,connections:this.connections,connectors:this.connectors});if(g?.account)return this.emit("accountChanged",{address:g.account.address,chainId:g.caipNetwork?.id,connector:o}),{id:r.id,address:g.account.address,chainId:e.chainId,provider:r,type:r.type};let C=await r.connect({chainId:e.chainId,socialUri:e.socialUri});Se.setConnection(new be(a,this.connectionSettings)),this.emit("accountChanged",{address:C,chainId:e.chainId,connector:o});let E=r.id===O.CONNECTOR_ID.AUTH,x=this.getCaipNetworks()?.find(T=>T.id===e.chainId);return this.addConnection({connectorId:r.id,accounts:[{address:C}],caipNetwork:x,auth:E?{name:Me.getConnectedSocialProvider(),username:Me.getConnectedSocialUsername()}:void 0}),r.id!==O.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(r.id,r.provider),{id:r.id,address:C,chainId:e.chainId,provider:r,type:r.type}}async getBalance(e){let r=e.address,o=this.getCaipNetworks()?.find(x=>x.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"SOL"});let a=new be(o?.rpcUrls?.default?.http?.[0],this.connectionSettings),g=`${o?.caipNetworkId}:${e.address}`,C=this.balancePromises[g];if(C)return C;let E=Me.getNativeBalanceCacheForCaipAddress(g);return E?{balance:E.balance,symbol:E.symbol}:(this.balancePromises[g]=new Promise(async x=>{try{let G=(await a.getBalance(new M(r))/W.LAMPORTS_PER_SOL).toString();if(Me.updateNativeBalanceCache({caipAddress:g,balance:G,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");x({balance:G,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{x({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[g]}),this.balancePromises[g]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);let{caipNetwork:r}=e;r?.rpcUrls?.default?.http?.[0]&&Se.setConnection(new be(r.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,r){if(ir.includes(e))return;let o=g=>{this.onAccountsChanged([g.toBase58()],e,!1)},a=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",a),r.on("accountsChanged",o),r.on("connect",o),this.providerHandlers[e]={provider:r,disconnect:a,accountsChanged:o,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;let r=O.CONNECTOR_ID.WALLET_CONNECT;Le.listenWcProvider({universalProvider:e,namespace:O.CHAIN.SOLANA,onConnect:a=>this.onConnect(a,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:a=>this.onAccountsChanged(a,r,!1)});let o=new Ge({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>Ne.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){let{SolanaWalletConnectStandardWallet:a}=await import("./chunk-65INLOAJ.js");a.register(e)}return this.addConnector(o),Promise.resolve()}async connectWalletConnect(e){let r=await super.connectWalletConnect(e),o=this.getCaipNetworks()?.find(g=>g.id===e)?.rpcUrls.default.http[0],a=new be(o,this.connectionSettings);return Se.setConnection(a),r}async disconnect(e){if(e.id){let r=this.connectors.find(a=>a.id===e.id);if(!r)throw new Error("Provider not found");let o=this.connections.find(a=>Je.isLowerCaseMatch(a.connectorId,e.id));return await r.provider.disconnect(),this.deleteConnection(r.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:o?[o]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect(Xe(ae({},e),{type:""}))}async syncConnections({connectToFirstConnector:e,caipNetwork:r}){await Promise.all(this.connectors.filter(o=>{let{hasDisconnected:a,hasConnected:g}=Je.getConnectorStorageInfo(o.id,this.namespace);return!a&&g}).map(async o=>{if(o.id===O.CONNECTOR_ID.WALLET_CONNECT){let a=Le.getWalletConnectAccounts(this.universalProvider,this.namespace);a.length>0&&this.addConnection({connectorId:o.id,accounts:a.map(g=>({address:g.address})),caipNetwork:r})}else{let a=await o.connect({chainId:r?.id});a&&(this.addConnection({connectorId:o.id,accounts:[{address:a}],caipNetwork:r}),this.listenSolanaProviderEvents(o.id,o.provider))}})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new Ge({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>Ne.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{let o=this.connectors.find(a=>Je.isLowerCaseMatch(a.id,r.connectorId));if(!o)throw new Error("Connector not found");return await this.disconnect({id:o.id}),r}))}}};export{nt as SPL_COMPUTE_BUDGET_CONSTANTS,W as SolConstantsUtil,cr as SolHelpersUtil,Kt as SolanaAdapter};
